module.exports=[93695,(e,t,r)=>{t.exports=e.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},81769,(e,t,r)=>{t.exports=e.x("mongodb",()=>require("mongodb"))},67406,e=>{"use strict";var t=e.i(81769);let r=process.env.MONGODB_URI||process.env.MONGO_URI||"",n=process.env.MONGODB_DB||process.env.MONGO_DB;r||console.warn("MONGODB_URI is not set. MongoDB operations will fail until it's provided.");let a=global._mongoClient,i=global._mongoClientPromise;async function s(e){let s=await function(){if(!a){if(!r)return Promise.reject(Error("MONGODB_URI is not defined."));i=(a=new t.MongoClient(r)).connect();try{global._mongoClient=a,global._mongoClientPromise=i}catch(e){}}return i}(),o=function(e){if(!e)return;let t=e.split("?")[0],r=t.lastIndexOf("/");if(-1!==r)return t.substring(r+1)||void 0}(r);return s.db(e||n||o||"admin")}e.s(["getDb",()=>s])},18622,(e,t,r)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},24725,(e,t,r)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},24361,(e,t,r)=>{t.exports=e.x("util",()=>require("util"))},54799,(e,t,r)=>{t.exports=e.x("crypto",()=>require("crypto"))},88947,(e,t,r)=>{t.exports=e.x("stream",()=>require("stream"))},77438,e=>{"use strict";var t=e.i(67406),r=e.i(30565),n=e.i(81769);async function a(e){return(await (0,t.getDb)()).collection(e)}async function i(){return(await a("clients")).find().toArray()}async function s(e){let t=await a("clients"),r=await t.insertOne({...e,createdAt:new Date});return{...e,_id:r.insertedId}}async function o(){return(await a("services")).find().toArray()}async function l(e){let t=await a("services"),r=await t.insertOne({...e,createdAt:new Date});return{...e,_id:r.insertedId}}async function d(){return(await a("users")).find({jobRole:{$exists:!0}}).toArray()}async function c(e){let t=await a("users"),n={...e,jobRole:e.role??e.jobRole,role:e.authRole??"staff",createdAt:new Date};delete n.role,n.role=e.loginRole??e.authRole??"staff",e.password&&(n.password=(0,r.hashPassword)(e.password));let i=await t.insertOne(n);return{...n,_id:i.insertedId}}async function u(){return(await a("users")).find().toArray()}async function p(e){let t=await a("users"),n={...e};n.password&&(n.password=(0,r.hashPassword)(n.password));let i=await t.insertOne({...n,createdAt:new Date});return{...n,_id:i.insertedId}}async function w(e,t){let r=await a(e);if("string"==typeof t&&/^[a-fA-F0-9]{24}$/.test(t))return r.findOne({_id:new n.ObjectId(t)});if("invoices"===e){let e=await r.findOne({invoiceNo:t});if(e)return e}return await r.findOne({id:t})}async function f(e,t,i){let s=await a(e),o={...i||{}};if(o._id&&delete o._id,o&&o.password&&(o.password=(0,r.hashPassword)(o.password)),"string"==typeof t&&/^[a-fA-F0-9]{24}$/.test(t))return await s.updateOne({_id:new n.ObjectId(t)},{$set:o}),w(e,t);if("invoices"===e){let r=await s.findOne({invoiceNo:t});if(r)return await s.updateOne({_id:r._id},{$set:o}),w(e,String(r._id))}return await s.updateOne({id:t},{$set:o}),w(e,t)}async function g(e,t){let r=await a(e);return 1===(await r.deleteOne({_id:new n.ObjectId(t)})).deletedCount}async function h(){return(await a("invoices")).find().toArray()}async function v(e){let t=await a("invoices");try{let r=await t.find({}).sort({createdAt:-1}).limit(1).toArray(),n=0;if(r&&r.length){let e=r[0].id||r[0]._id||"",t=String(e).match(/pn-(\d+)/i);t&&(n=parseInt(t[1],10))}let a=n+1,i=String(a).padStart(5,"0"),s=`PN-${i}`,o=e?.invoiceNo||null;o||(o=`INV-${i}`);let l=await t.insertOne({...e,id:s,createdAt:new Date});return{...e,id:s,invoiceNo:o,_id:l.insertedId}}catch(n){let r=await t.insertOne({...e,createdAt:new Date});return{...e,_id:r.insertedId}}}async function x(){return(await a("quotations")).find().toArray()}async function y(e){let t=await a("quotations");try{let r=await t.find({}).sort({createdAt:-1}).limit(1).toArray(),n=0;if(r&&r.length){let e=r[0].id||r[0]._id||"",t=String(e).match(/pn-(\d+)/i);t&&(n=parseInt(t[1],10))}let a=n+1,i=String(a).padStart(5,"0"),s=`PN-${i}`,o=await t.insertOne({...e,id:s,createdAt:new Date});return{...e,id:s,_id:o.insertedId}}catch(n){let r=await t.insertOne({...e,createdAt:new Date});return{...e,_id:r.insertedId}}}e.s(["createClient",()=>s,"createInvoice",()=>v,"createQuotation",()=>y,"createService",()=>l,"createTeamMember",()=>c,"createUser",()=>p,"default",0,{getClients:i,createClient:s,getServices:o,createService:l,getTeamMembers:d,createTeamMember:c,getUsers:u,createUser:p,findById:w,updateById:f,deleteById:g},"deleteById",()=>g,"findById",()=>w,"getClients",()=>i,"getCollection",()=>a,"getInvoices",()=>h,"getQuotations",()=>x,"getServices",()=>o,"getTeamMembers",()=>d,"getUsers",()=>u,"updateById",()=>f])},20532,e=>{"use strict";var t=e.i(65533),r=e.i(19565),n=e.i(66149),a=e.i(78769),i=e.i(60399),s=e.i(36917),o=e.i(49233),l=e.i(15290),d=e.i(91746),c=e.i(63198),u=e.i(59060),p=e.i(42046),w=e.i(5797),f=e.i(3339),g=e.i(84857),h=e.i(63947),v=e.i(93695);e.i(61654);var x=e.i(69556),y=e.i(81837),m=e.i(77438);async function R(){try{let e=await m.getCollection("agencySettings"),t=await e.findOne({});if(!t)return y.NextResponse.json({name:"Pixelate Nest",aboutUs:"We are a leading creative agency specializing in digital solutions.",mission:"To deliver exceptional digital experiences that drive business growth.",vision:"To be the most trusted creative partner for businesses worldwide.",goal:"Empowering businesses through innovative technology and design.",approach:["Discovery & Research","Strategic Planning","Design & Development","Testing & Quality Assurance","Launch & Support"],terms:["Payment terms: 50% advance, 50% on completion","Project timeline is subject to timely feedback and approvals","Revisions beyond agreed scope will be charged separately","All deliverables remain property of Pixelate Nest until full payment","Client must provide necessary content and assets on time"],footerText:"Â© 2025 Pixelate Nest. All rights reserved.",address:"Bihar, India",email:"contact@pixelatenest.com",phone:"+91 XXXXXXXXXX",website:"https://www.pixelatenest.com"});return y.NextResponse.json(t)}catch(e){return console.error("Error fetching settings:",e),y.NextResponse.json({error:e.message||"Failed to fetch settings"},{status:500})}}async function O(e){try{let t=await e.json(),r=await m.getCollection("agencySettings");await r.findOne({})?await r.updateOne({},{$set:{...t,updatedAt:new Date}}):await r.insertOne({...t,createdAt:new Date,updatedAt:new Date});let n=await r.findOne({});return y.NextResponse.json(n)}catch(e){return console.error("Error updating settings:",e),y.NextResponse.json({error:e.message||"Failed to update settings"},{status:500})}}e.s(["GET",()=>R,"PUT",()=>O],36112);var b=e.i(36112);let A=new t.AppRouteRouteModule({definition:{kind:r.RouteKind.APP_ROUTE,page:"/api/settings/route",pathname:"/api/settings",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/Desktop/Projects/final-pixelate/dashboard/src/app/api/settings/route.ts",nextConfigOutput:"",userland:b}),{workAsyncStorage:_,workUnitAsyncStorage:C,serverHooks:E}=A;function N(){return(0,n.patchFetch)({workAsyncStorage:_,workUnitAsyncStorage:C})}async function I(e,t,n){A.isDev&&(0,a.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let y="/api/settings/route";y=y.replace(/\/index$/,"")||"/";let m=await A.prepare(e,t,{srcPage:y,multiZoneDraftMode:!1});if(!m)return t.statusCode=400,t.end("Bad Request"),null==n.waitUntil||n.waitUntil.call(n,Promise.resolve()),null;let{buildId:R,params:O,nextConfig:b,parsedUrl:_,isDraftMode:C,prerenderManifest:E,routerServerContext:N,isOnDemandRevalidate:I,revalidateOnlyGenerated:P,resolvedPathname:D,clientReferenceManifest:j,serverActionsManifest:S}=m,T=(0,l.normalizeAppPath)(y),M=!!(E.dynamicRoutes[T]||E.routes[D]),q=async()=>((null==N?void 0:N.render404)?await N.render404(e,t,_,!1):t.end("This page could not be found"),null);if(M&&!C){let e=!!E.routes[D],t=E.dynamicRoutes[T];if(t&&!1===t.fallback&&!e){if(b.experimental.adapterPath)return await q();throw new v.NoFallbackError}}let U=null;!M||A.isDev||C||(U="/index"===(U=D)?"/":U);let k=!0===A.isDev||!M,$=M&&!k;S&&j&&(0,s.setReferenceManifestsSingleton)({page:y,clientReferenceManifest:j,serverActionsManifest:S,serverModuleMap:(0,o.createServerModuleMap)({serverActionsManifest:S})});let H=e.method||"GET",B=(0,i.getTracer)(),X=B.getActiveScopeSpan(),F={params:O,prerenderManifest:E,renderOpts:{experimental:{authInterrupts:!!b.experimental.authInterrupts},cacheComponents:!!b.cacheComponents,supportsDynamicResponse:k,incrementalCache:(0,a.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:b.cacheLife,waitUntil:n.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,n)=>A.onRequestError(e,t,n,N)},sharedContext:{buildId:R}},G=new d.NodeNextRequest(e),K=new d.NodeNextResponse(t),L=c.NextRequestAdapter.fromNodeNextRequest(G,(0,c.signalFromNodeResponse)(t));try{let s=async e=>A.handle(L,F).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let r=B.getRootSpanAttributes();if(!r)return;if(r.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${r.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=r.get("next.route");if(n){let t=`${H} ${n}`;e.setAttributes({"next.route":n,"http.route":n,"next.span_name":t}),e.updateName(t)}else e.updateName(`${H} ${y}`)}),o=!!(0,a.getRequestMeta)(e,"minimalMode"),l=async a=>{var i,l;let d=async({previousCacheEntry:r})=>{try{if(!o&&I&&P&&!r)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let i=await s(a);e.fetchMetrics=F.renderOpts.fetchMetrics;let l=F.renderOpts.pendingWaitUntil;l&&n.waitUntil&&(n.waitUntil(l),l=void 0);let d=F.renderOpts.collectedTags;if(!M)return await (0,w.sendResponse)(G,K,i,F.renderOpts.pendingWaitUntil),null;{let e=await i.blob(),t=(0,f.toNodeOutgoingHttpHeaders)(i.headers);d&&(t[h.NEXT_CACHE_TAGS_HEADER]=d),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==F.renderOpts.collectedRevalidate&&!(F.renderOpts.collectedRevalidate>=h.INFINITE_CACHE)&&F.renderOpts.collectedRevalidate,n=void 0===F.renderOpts.collectedExpire||F.renderOpts.collectedExpire>=h.INFINITE_CACHE?void 0:F.renderOpts.collectedExpire;return{value:{kind:x.CachedRouteKind.APP_ROUTE,status:i.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:n}}}}catch(t){throw(null==r?void 0:r.isStale)&&await A.onRequestError(e,t,{routerKind:"App Router",routePath:y,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:$,isOnDemandRevalidate:I})},N),t}},c=await A.handleResponse({req:e,nextConfig:b,cacheKey:U,routeKind:r.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:E,isRoutePPREnabled:!1,isOnDemandRevalidate:I,revalidateOnlyGenerated:P,responseGenerator:d,waitUntil:n.waitUntil,isMinimalMode:o});if(!M)return null;if((null==c||null==(i=c.value)?void 0:i.kind)!==x.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==c||null==(l=c.value)?void 0:l.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});o||t.setHeader("x-nextjs-cache",I?"REVALIDATED":c.isMiss?"MISS":c.isStale?"STALE":"HIT"),C&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let u=(0,f.fromNodeOutgoingHttpHeaders)(c.value.headers);return o&&M||u.delete(h.NEXT_CACHE_TAGS_HEADER),!c.cacheControl||t.getHeader("Cache-Control")||u.get("Cache-Control")||u.set("Cache-Control",(0,g.getCacheControlHeader)(c.cacheControl)),await (0,w.sendResponse)(G,K,new Response(c.value.body,{headers:u,status:c.value.status||200})),null};X?await l(X):await B.withPropagatedContext(e.headers,()=>B.trace(u.BaseServerSpan.handleRequest,{spanName:`${H} ${y}`,kind:i.SpanKind.SERVER,attributes:{"http.method":H,"http.target":e.url}},l))}catch(t){if(t instanceof v.NoFallbackError||await A.onRequestError(e,t,{routerKind:"App Router",routePath:T,routeType:"route",revalidateReason:(0,p.getRevalidateReason)({isStaticGeneration:$,isOnDemandRevalidate:I})}),M)throw t;return await (0,w.sendResponse)(G,K,new Response(null,{status:500})),null}}e.s(["handler",()=>I,"patchFetch",()=>N,"routeModule",()=>A,"serverHooks",()=>E,"workAsyncStorage",()=>_,"workUnitAsyncStorage",()=>C],20532)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__19c1da53._.js.map