{"version":3,"sources":["../../../../../../../../Desktop/Projects/final-pixelate/dashboard/src/lib/pdf-fonts.ts"],"sourcesContent":["// Lightweight helper to register Noto Sans with jsPDF at runtime.\n// It fetches the TTF from Google's fonts CDN, converts to base64 and registers\n// it using doc.addFileToVFS + doc.addFont. Returns the family name to use.\nexport async function loadNotoSansForJsPDF(doc: any, fontName = 'NotoSans') {\n  try {\n    // Prefer a local copy (no network dependency). Place the TTF at /fonts/NotoSans-Regular.ttf\n    // If the local file isn't present, fall back to the Google fonts URL.\n    const localUrl = '/fonts/NotoSans-Regular.ttf';\n    let res = await fetch(localUrl, { method: 'GET' }).catch(() => null as any);\n    if (!res || !res.ok) {\n      // fallback to CDN\n      const cdn = 'https://fonts.gstatic.com/s/notosans/v27/o-0IIpQlx3QUlC5A4PNb4g.ttf';\n      res = await fetch(cdn);\n      if (!res.ok) throw new Error('Failed to fetch font from CDN');\n    }\n    const arrayBuffer = await res.arrayBuffer();\n    // convert to base64\n    const bytes = new Uint8Array(arrayBuffer);\n    let binary = '';\n    const chunkSize = 0x8000;\n    for (let i = 0; i < bytes.length; i += chunkSize) {\n      binary += String.fromCharCode.apply(null, Array.from(bytes.slice(i, i + chunkSize)) as any);\n    }\n    const base64 = typeof btoa !== 'undefined' ? btoa(binary) : Buffer.from(binary, 'binary').toString('base64');\n\n    const vfsName = fontName + '.ttf';\n    // jsPDF expects the base64 string without data: prefix\n    doc.addFileToVFS(vfsName, base64);\n    // register font: fontName, alias, style\n    doc.addFont(vfsName, fontName, 'normal');\n    return fontName;\n  } catch (e) {\n    console.error('Could not load Noto Sans for jsPDF', e);\n    return null;\n  }\n}\n"],"names":[],"mappings":"uCAGO,eAAe,EAAqB,CAAQ,CAAE,EAAW,UAAU,EACxE,GAAI,CAIF,IAAI,EAAM,MAAM,MADC,AACK,8BAAU,CAAE,OAAQ,KAAM,GAAG,KAAK,CAAC,IAAM,MAC/D,IAAI,CAAC,GAAO,CAAC,EAAI,EAAA,AAAE,EAAE,CAIf,CAAC,CADL,EAAM,MAAM,MADA,AACM,sEAAA,EACT,EAAE,CAAE,MAAM,AAAI,MAAM,iCAE/B,IAAM,EAAc,MAAM,EAAI,WAAW,GAEnC,EAAQ,IAAI,WAAW,GACzB,EAAS,GAEb,IAAK,IAAI,EAAI,EAAG,EAAI,EAAM,MAAM,CAAE,KAAK,IACrC,GAAU,GADsC,IAC/B,YAAY,CAAC,KAAK,CAAC,KAAM,MAAM,IAAI,CAAC,EAAM,KAAK,CAAC,EAAG,EAFpD,EAEwD,OAE1E,IAAM,EAAyB,aAAhB,OAAO,KAAuB,KAAK,GAAU,OAAO,IAAI,CAAC,EAAQ,UAAU,QAAQ,CAAC,UAE7F,EAAU,EAAW,OAK3B,OAHA,EAAI,YAAY,CAAC,EAAS,GAE1B,EAAI,OAAO,CAAC,EAAS,EAAU,UACxB,CACT,CAAE,MAAO,EAAG,CAEV,OADA,QAAQ,KAAK,CAAC,qCAAsC,GAC7C,IACT,CACF"}