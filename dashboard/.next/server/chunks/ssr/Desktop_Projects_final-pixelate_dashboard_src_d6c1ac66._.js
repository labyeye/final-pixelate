module.exports=[15404,a=>{"use strict";var b=a.i(57457),c=a.i(90782),d=a.i(59104);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-none border-2 bg-card text-card-foreground",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-4",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-4 pt-0",a),...c}));i.displayName="CardContent";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-4 pt-0",a),...c}));j.displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardFooter",()=>j,"CardHeader",()=>f,"CardTitle",()=>g])},63420,a=>{"use strict";var b=a.i(57457),c=a.i(90782),d=a.i(59104);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-14 w-full rounded-none border-2 border-foreground bg-background px-4 py-3 text-lg ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e])},2324,a=>{"use strict";var b=a.i(57457),c=a.i(90782),d=a.i(24231),e=a.i(15404),f=a.i(63420),g=a.i(73647);function h(){let[a,h]=(0,c.useState)([]),[i,j]=(0,c.useState)(null),{register:k,control:l,handleSubmit:m,reset:n,setValue:o,getValues:p}=(0,d.useForm)({defaultValues:{brandName:"",brandLogoBase64:"",entries:[]}}),{fields:q,append:r,remove:s,replace:t}=(0,d.useFieldArray)({control:l,name:"entries"});(0,c.useEffect)(()=>{let a=!0;return(async()=>{try{let b=await fetch("/api/reels");if(!b.ok)throw Error("Failed to fetch reels");let c=await b.json();a&&h(c||[])}catch(a){console.error(a)}})(),()=>{a=!1}},[]);let u=a=>a?new Promise((b,c)=>{let d=new FileReader;d.onload=()=>b(String(d.result)),d.onerror=c,d.readAsDataURL(a)}):Promise.resolve(""),v=async a=>{let b=a.target.files?.[0]??null;o("brandLogoBase64",await u(b))},w=async(a,b)=>{let c=b?await u(b):"",d=[...p().entries||[]];for(;d.length<=a;)d.push({thumbnailBase64:"",link:"",title:""});d[a]={...d[a]||{},thumbnailBase64:c},t(d)},x=async a=>{try{if(i){let b=await fetch(`/api/reels/${i}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)throw Error("Update failed");let c=await b.json();h(a=>a.map(a=>String(a._id??a.id)===String(i)?c:a)),j(null),n()}else{let b=await fetch("/api/reels",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!b.ok)throw Error("Save failed");let c=await b.json();h(a=>[c,...a]),n()}}catch(a){console.error("Failed to save reel",a)}},y=async a=>{if(confirm("Delete this reel?"))try{if(!(await fetch(`/api/reels/${a}`,{method:"DELETE"})).ok)throw Error("Delete failed");h(b=>b.filter(b=>String(b._id??b.id)!==String(a)))}catch(a){console.error(a)}};return(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("header",{children:[(0,b.jsx)("h1",{className:"text-4xl font-black",children:"Reels Management"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Upload a brand logo and multiple reel thumbnails with links. These will appear on the Video Editing page."})]}),(0,b.jsxs)(e.Card,{children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsx)(e.CardTitle,{children:i?"Edit Reel":"Add Reel"}),(0,b.jsx)(e.CardDescription,{children:"Brand logo + list of thumbnails and links"})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("form",{onSubmit:m(x),className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium",children:"Brand Name"}),(0,b.jsx)(f.Input,{...k("brandName")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium",children:"Brand Logo"}),(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:v})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium",children:"Thumbnails (reels)"}),(0,b.jsxs)("div",{className:"space-y-2",children:[q.map((a,c)=>(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-2 items-center",children:[(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:async a=>await w(c,a.target.files?.[0]??null)}),(0,b.jsx)(f.Input,{...k(`entries.${c}.link`),placeholder:"Link"}),(0,b.jsx)(f.Input,{...k(`entries.${c}.title`),placeholder:"Title (optional)"}),(0,b.jsx)("div",{className:"col-span-3",children:(0,b.jsx)(g.Button,{variant:"destructive",onClick:()=>s(c),children:"Remove"})})]},a.id)),(0,b.jsx)(g.Button,{type:"button",onClick:()=>r({thumbnailBase64:"",link:"",title:""}),children:"Add thumbnail"})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(g.Button,{type:"submit",children:i?"Update":"Save"}),(0,b.jsx)(g.Button,{variant:"ghost",onClick:()=>{n(),j(null)},children:"Reset"})]})]})})]}),(0,b.jsx)("div",{className:"space-y-2",children:a.map(a=>(0,b.jsx)("div",{className:"border p-4 rounded",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[a.brandLogoBase64?(0,b.jsx)("img",{src:a.brandLogoBase64,alt:a.brandName,style:{width:80,height:40,objectFit:"contain"}}):(0,b.jsx)("div",{className:"w-20 h-10 bg-gray-100"}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"font-bold",children:a.brandName}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(a.entries||[]).length," thumbnails"]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(g.Button,{onClick:()=>{j(String(a._id??a.id)),n({brandName:a.brandName||"",brandLogoBase64:a.brandLogoBase64||"",entries:a.entries||[]})},children:"Edit"}),(0,b.jsx)(g.Button,{variant:"destructive",onClick:()=>y(String(a._id??a.id)),children:"Delete"})]})]})},String(a._id??a.id)))})]})}a.s(["default",()=>h])}];

//# sourceMappingURL=Desktop_Projects_final-pixelate_dashboard_src_d6c1ac66._.js.map