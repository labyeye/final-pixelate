{"version":3,"sources":["../../../../../../../../Desktop/Projects/final-pixelate/dashboard/node_modules/%40radix-ui/react-tabs/dist/index.mjs","../../../../../../../../Desktop/Projects/final-pixelate/dashboard/src/components/ui/tabs.tsx","../../../../../../../../Desktop/Projects/final-pixelate/dashboard/src/app/%28crm%29/dashboard/page.tsx"],"sourcesContent":["\"use client\";\n\n// src/tabs.tsx\nimport * as React from \"react\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { createRovingFocusGroupScope } from \"@radix-ui/react-roving-focus\";\nimport { Presence } from \"@radix-ui/react-presence\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport * as RovingFocusGroup from \"@radix-ui/react-roving-focus\";\nimport { useDirection } from \"@radix-ui/react-direction\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { useId } from \"@radix-ui/react-id\";\nimport { jsx } from \"react/jsx-runtime\";\nvar TABS_NAME = \"Tabs\";\nvar [createTabsContext, createTabsScope] = createContextScope(TABS_NAME, [\n  createRovingFocusGroupScope\n]);\nvar useRovingFocusGroupScope = createRovingFocusGroupScope();\nvar [TabsProvider, useTabsContext] = createTabsContext(TABS_NAME);\nvar Tabs = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeTabs,\n      value: valueProp,\n      onValueChange,\n      defaultValue,\n      orientation = \"horizontal\",\n      dir,\n      activationMode = \"automatic\",\n      ...tabsProps\n    } = props;\n    const direction = useDirection(dir);\n    const [value, setValue] = useControllableState({\n      prop: valueProp,\n      onChange: onValueChange,\n      defaultProp: defaultValue ?? \"\",\n      caller: TABS_NAME\n    });\n    return /* @__PURE__ */ jsx(\n      TabsProvider,\n      {\n        scope: __scopeTabs,\n        baseId: useId(),\n        value,\n        onValueChange: setValue,\n        orientation,\n        dir: direction,\n        activationMode,\n        children: /* @__PURE__ */ jsx(\n          Primitive.div,\n          {\n            dir: direction,\n            \"data-orientation\": orientation,\n            ...tabsProps,\n            ref: forwardedRef\n          }\n        )\n      }\n    );\n  }\n);\nTabs.displayName = TABS_NAME;\nvar TAB_LIST_NAME = \"TabsList\";\nvar TabsList = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeTabs, loop = true, ...listProps } = props;\n    const context = useTabsContext(TAB_LIST_NAME, __scopeTabs);\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeTabs);\n    return /* @__PURE__ */ jsx(\n      RovingFocusGroup.Root,\n      {\n        asChild: true,\n        ...rovingFocusGroupScope,\n        orientation: context.orientation,\n        dir: context.dir,\n        loop,\n        children: /* @__PURE__ */ jsx(\n          Primitive.div,\n          {\n            role: \"tablist\",\n            \"aria-orientation\": context.orientation,\n            ...listProps,\n            ref: forwardedRef\n          }\n        )\n      }\n    );\n  }\n);\nTabsList.displayName = TAB_LIST_NAME;\nvar TRIGGER_NAME = \"TabsTrigger\";\nvar TabsTrigger = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeTabs, value, disabled = false, ...triggerProps } = props;\n    const context = useTabsContext(TRIGGER_NAME, __scopeTabs);\n    const rovingFocusGroupScope = useRovingFocusGroupScope(__scopeTabs);\n    const triggerId = makeTriggerId(context.baseId, value);\n    const contentId = makeContentId(context.baseId, value);\n    const isSelected = value === context.value;\n    return /* @__PURE__ */ jsx(\n      RovingFocusGroup.Item,\n      {\n        asChild: true,\n        ...rovingFocusGroupScope,\n        focusable: !disabled,\n        active: isSelected,\n        children: /* @__PURE__ */ jsx(\n          Primitive.button,\n          {\n            type: \"button\",\n            role: \"tab\",\n            \"aria-selected\": isSelected,\n            \"aria-controls\": contentId,\n            \"data-state\": isSelected ? \"active\" : \"inactive\",\n            \"data-disabled\": disabled ? \"\" : void 0,\n            disabled,\n            id: triggerId,\n            ...triggerProps,\n            ref: forwardedRef,\n            onMouseDown: composeEventHandlers(props.onMouseDown, (event) => {\n              if (!disabled && event.button === 0 && event.ctrlKey === false) {\n                context.onValueChange(value);\n              } else {\n                event.preventDefault();\n              }\n            }),\n            onKeyDown: composeEventHandlers(props.onKeyDown, (event) => {\n              if ([\" \", \"Enter\"].includes(event.key)) context.onValueChange(value);\n            }),\n            onFocus: composeEventHandlers(props.onFocus, () => {\n              const isAutomaticActivation = context.activationMode !== \"manual\";\n              if (!isSelected && !disabled && isAutomaticActivation) {\n                context.onValueChange(value);\n              }\n            })\n          }\n        )\n      }\n    );\n  }\n);\nTabsTrigger.displayName = TRIGGER_NAME;\nvar CONTENT_NAME = \"TabsContent\";\nvar TabsContent = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeTabs, value, forceMount, children, ...contentProps } = props;\n    const context = useTabsContext(CONTENT_NAME, __scopeTabs);\n    const triggerId = makeTriggerId(context.baseId, value);\n    const contentId = makeContentId(context.baseId, value);\n    const isSelected = value === context.value;\n    const isMountAnimationPreventedRef = React.useRef(isSelected);\n    React.useEffect(() => {\n      const rAF = requestAnimationFrame(() => isMountAnimationPreventedRef.current = false);\n      return () => cancelAnimationFrame(rAF);\n    }, []);\n    return /* @__PURE__ */ jsx(Presence, { present: forceMount || isSelected, children: ({ present }) => /* @__PURE__ */ jsx(\n      Primitive.div,\n      {\n        \"data-state\": isSelected ? \"active\" : \"inactive\",\n        \"data-orientation\": context.orientation,\n        role: \"tabpanel\",\n        \"aria-labelledby\": triggerId,\n        hidden: !present,\n        id: contentId,\n        tabIndex: 0,\n        ...contentProps,\n        ref: forwardedRef,\n        style: {\n          ...props.style,\n          animationDuration: isMountAnimationPreventedRef.current ? \"0s\" : void 0\n        },\n        children: present && children\n      }\n    ) });\n  }\n);\nTabsContent.displayName = CONTENT_NAME;\nfunction makeTriggerId(baseId, value) {\n  return `${baseId}-trigger-${value}`;\n}\nfunction makeContentId(baseId, value) {\n  return `${baseId}-content-${value}`;\n}\nvar Root2 = Tabs;\nvar List = TabsList;\nvar Trigger = TabsTrigger;\nvar Content = TabsContent;\nexport {\n  Content,\n  List,\n  Root2 as Root,\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n  Trigger,\n  createTabsScope\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\"\n\nimport * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-none bg-muted p-1 text-muted-foreground border-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-none px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useRef } from 'react'\nimport {\n  Card,\n  CardContent,\n  CardDescription,\n  CardHeader,\n  CardTitle,\n  CardFooter,\n} from \"@/components/ui/card\";\nimport type { Project, Quotation } from \"@/lib/data\";\nimport type { Client } from \"@/lib/data\";\nimport { cn } from \"@/lib/utils\";\nimport {\n  Bar,\n  BarChart,\n  CartesianGrid,\n  ResponsiveContainer,\n  XAxis,\n  YAxis,\n  Pie,\n  PieChart,\n  Cell,\n} from \"recharts\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport Link from \"next/link\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport {\n  ChartContainer,\n  ChartLegend,\n  ChartLegendContent,\n} from \"@/components/ui/chart\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\n\n// Helper: month names for display\nconst MONTH_NAMES = [\n  \"Jan\",\n  \"Feb\",\n  \"Mar\",\n  \"Apr\",\n  \"May\",\n  \"Jun\",\n  \"Jul\",\n  \"Aug\",\n  \"Sep\",\n  \"Oct\",\n  \"Nov\",\n  \"Dec\",\n];\n\nconst projectChartConfig = {\n  count: { label: \"Projects\" },\n  BACKLOG: { label: \"Backlog\", color: \"hsl(var(--chart-1))\" },\n  \"IN PROGRESS\": { label: \"In Progress\", color: \"hsl(var(--chart-2))\" },\n  \"IN REVIEW\": { label: \"In Review\", color: \"hsl(var(--chart-3))\" },\n  COMPLETED: { label: \"Completed\", color: \"hsl(var(--chart-4))\" },\n};\n\nexport default function DashboardPage() {\n  const { user } = useAuth();\n\n  const isStaff = user?.role === \"staff\";\n\n  const [stats, setStats] = useState<any[]>([]);\n  const [projects, setProjects] = useState<Project[]>([]);\n  const [invoices, setInvoices] = useState<any[]>([]);\n  const [expenses, setExpenses] = useState<any[]>([]);\n  const [clients, setClients] = useState<any[]>([]);\n  const [leads, setLeads] = useState<any[]>([]);\n  const [quotations, setQuotations] = useState<Quotation[]>([]);\n  const [services, setServices] = useState<any[]>([]);\n\n  // Animated number component: safe to use anywhere (including lists)\n  function AnimatedNumber({ value, duration = 800, currency = false }: { value: number; duration?: number; currency?: boolean }) {\n    const ref = useRef<number | null>(null);\n    const [display, setDisplay] = useState<number>(0);\n    useEffect(() => {\n      let start: number | null = null;\n      const from = 0;\n      const to = Number(value || 0);\n      if (to === from) {\n        setDisplay(to);\n        return;\n      }\n      const step = (ts: number) => {\n        if (!start) start = ts;\n        const elapsed = Math.min(duration, ts - start);\n        const pct = elapsed / duration;\n        const cur = Math.round(from + (to - from) * pct);\n        setDisplay(cur);\n        if (elapsed < duration) {\n          ref.current = requestAnimationFrame(step);\n        }\n      };\n      ref.current = requestAnimationFrame(step);\n      return () => {\n        if (ref.current) cancelAnimationFrame(ref.current as any);\n      };\n    }, [value, duration]);\n    return <>{currency ? `₹${Number(display || 0).toLocaleString()}` : display}</>;\n  }\n\n  useEffect(() => {\n    let mounted = true;\n\n    async function load() {\n      try {\n        const token = localStorage.getItem(\"auth_token\") || \"\";\n        const [projectsRes, invoicesRes, leadsRes, quotationsRes, servicesRes, expensesRes] =\n          await Promise.all([\n            fetch(\"/api/projects\"),\n            fetch(\"/api/invoices\"),\n            fetch(\"/api/leads\", {\n              headers: token ? { Authorization: \"Bearer \" + token } : {},\n            }),\n            fetch(\"/api/quotations\"),\n            fetch(\"/api/services\"),\n            fetch(\"/api/expenses\"),\n          ]);\n        const [\n          projectsData,\n          invoicesData,\n          leadsData,\n          quotationsData,\n          servicesData,\n          expensesData,\n        ] = await Promise.all([\n          projectsRes.json(),\n          invoicesRes.json(),\n          leadsRes.json(),\n          quotationsRes.json(),\n          servicesRes.json(),\n          expensesRes.json(),\n        ]);\n        if (!mounted) return;\n    setProjects(projectsData || []);\n    setInvoices(invoicesData || []);\n    setExpenses(expensesData || []);\n        // ensure leads is an array even if server returned an error object (401 etc)\n        setLeads(Array.isArray(leadsData) ? leadsData : []);\n        setQuotations(quotationsData || []);\n        setServices(servicesData || []);\n\n  // Derived metrics\n        const clientsList = await (await fetch(\"/api/clients\")).json();\n        setClients(clientsList || []);\n        const clientsCount = (clientsList || []).length || 0;\n        const projectsCount = (projectsData || []).length || 0;\n        const totalRevenue = (invoicesData || []).reduce(\n          (s: any, inv: any) => s + Number(inv.amount || 0),\n          0\n        );\n        // Use recorded expenses from the expenses collection for dashboard expense\n        const totalExpense = (expensesData || []).reduce(\n          (s: any, ex: any) => s + Number(ex.amount || 0),\n          0\n        );\n\n        setStats([\n          {\n            name: \"clients\",\n            value: clientsCount,\n            change: \"+1.1%\",\n            changeType: \"positive\",\n          },\n          {\n            name: \"projects\",\n            value: projectsCount,\n            change: \"+2.4%\",\n            changeType: \"positive\",\n          },\n          {\n            name: \"revenue\",\n            value: totalRevenue,\n            change: \"+4.2%\",\n            changeType: \"positive\",\n          },\n          {\n            name: \"expense\",\n            value: totalExpense,\n            change: \"-0.8%\",\n            changeType: \"negative\",\n          },\n        ]);\n      } catch (e) {\n        console.error(\"Failed to load dashboard data\", e);\n      }\n    }\n\n    load();\n\n    const handler = (ev: Event) => {\n      const custom = ev as CustomEvent;\n      (async () => {\n        try {\n          if (custom?.detail?.invoices) {\n            setInvoices(custom.detail.invoices || []);\n            const projectsRes = await fetch(\"/api/projects\");\n            const projectsData = await projectsRes.json();\n            if (!mounted) return;\n            setProjects(projectsData || []);\n          } else {\n            const [projectsRes, invoicesRes] = await Promise.all([\n              fetch(\"/api/projects\"),\n              fetch(\"/api/invoices\"),\n            ]);\n            const [projectsData, invoicesData] = await Promise.all([\n              projectsRes.json(),\n              invoicesRes.json(),\n            ]);\n            if (!mounted) return;\n            setProjects(projectsData || []);\n            setInvoices(invoicesData || []);\n          }\n        } catch (e) {\n          console.error(\"Failed to refresh dashboard data\", e);\n        }\n      })();\n    };\n\n    window.addEventListener(\"data:changed\", handler as EventListener);\n    return () => {\n      mounted = false;\n      window.removeEventListener(\"data:changed\", handler as EventListener);\n    };\n  }, []);\n\n  // Derived helper data\n  const projectStatusCounts = projects.reduce((acc, project) => {\n    const status = project.status || \"BACKLOG\";\n    acc[status] = (acc[status] || 0) + 1;\n    return acc;\n  }, {} as Record<string, number>);\n\n  const projectChartData = Object.keys(projectStatusCounts).map((status) => ({\n    status,\n    count: projectStatusCounts[status],\n    fill: `hsl(var(--chart-${\n      Object.keys(projectStatusCounts).indexOf(status) + 1\n    }))`,\n  }));\n\n  const leadsByStatus = leads.reduce((acc, lead) => {\n    const key = lead.status ?? \"NEW\";\n    acc[key] = (acc[key] || 0) + 1;\n    return acc;\n  }, {} as Record<string, number>);\n\n  const serviceUsageCounts = quotations\n    .filter((q) => q.status === \"APPROVED\")\n    .flatMap((q) => q.services ?? [])\n    .reduce((acc, service) => {\n      if (!service) return acc;\n      const name = service.name ?? \"Unknown\";\n      acc[name] = (acc[name] || 0) + 1;\n      return acc;\n    }, {} as Record<string, number>);\n\n  const serviceChartData = Object.entries(serviceUsageCounts)\n    .map(([service, count]) => ({ service, count }))\n    .sort((a, b) => b.count - a.count);\n\n  // Compute revenue per month for the last 6 months from invoices\n  const revenueData = (() => {\n    const now = new Date();\n    const months: { month: string; revenue: number }[] = [];\n    for (let i = 5; i >= 0; i--) {\n      const d = new Date(now.getFullYear(), now.getMonth() - i, 1);\n      months.push({ month: MONTH_NAMES[d.getMonth()], revenue: 0 });\n    }\n\n    for (const inv of invoices || []) {\n      const created = inv.createdAt ? new Date(inv.createdAt) : null;\n      if (!created || Number.isNaN(created.getTime())) continue;\n      const monthsAgo =\n        (now.getFullYear() - created.getFullYear()) * 12 +\n        (now.getMonth() - created.getMonth());\n      if (monthsAgo >= 0 && monthsAgo < 6) {\n        const idx = 5 - monthsAgo;\n        months[idx].revenue += Number(inv.amount || 0);\n      }\n    }\n\n    return months;\n  })();\n\n  const completedProjectChartData = (projects || [])\n    .filter((p) => p.status === \"COMPLETED\")\n    .map((p) => ({ title: p.title, amount: Number(p.amount || 0) }));\n\n  // Compute earnings for the logged-in staff user by summing payouts in project.assignees\n  const myEarnings = (() => {\n    if (!user || user.role !== \"staff\") return 0;\n    const uid = user.id ?? (user._id as any);\n    let sum = 0;\n    for (const p of projects || []) {\n      const ass = p.assignees || [];\n      for (const aRaw of ass) {\n        const a: any = aRaw as any;\n        // assignee id may be stored in multiple shapes; tolerate common keys\n        const aid =\n          a && (a.id ?? a._id ?? a.teamMemberId ?? a.memberId ?? a.userId ?? a);\n        if (!aid) continue;\n        if (String(aid) === String(uid)) {\n          sum += Number(a.payout || 0);\n        }\n      }\n    }\n    return sum;\n  })();\n\n  // Breakdown of earnings per project for the logged-in staff user\n  const myEarningsByProject = (() => {\n    if (!user || user.role !== \"staff\")\n      return [] as {\n        projectId: any;\n        title: string;\n        payout: number;\n        clientName?: string;\n      }[];\n    const uid = user.id ?? (user._id as any);\n    const map = new Map<\n      string,\n      { projectId: any; title: string; payout: number; clientName?: string }\n    >();\n    for (const p of projects || []) {\n      const ass = p.assignees || [];\n      for (const aRaw of ass) {\n        const a: any = aRaw as any;\n        const aid =\n          a && (a.id ?? a._id ?? a.teamMemberId ?? a.memberId ?? a.userId ?? a);\n        if (!aid) continue;\n        if (String(aid) === String(uid)) {\n          const pid = String(p._id ?? p.id ?? p.title);\n          // resolve client name with multiple fallbacks:\n          // 1) explicit p.clientName, 2) p.client as object with .name,\n          // 3) p.client or p.clientId treated as id to lookup in clients list,\n          // 4) p.client as string fallback, otherwise '-'\n          let clientName = (p as any).clientName || \"-\";\n          try {\n            if (!clientName || clientName === \"-\") {\n              // case: project.client is an object like { id, name }\n              if (\n                p.client &&\n                typeof p.client === \"object\" &&\n                ((p.client as any).name || (p.client as any).title)\n              ) {\n                clientName =\n                  (p.client as any).name ||\n                  (p.client as any).title ||\n                  String(p.client);\n              } else if (p.client) {\n                // p.client may be an id or a string name\n                const found = (clients || []).find(\n                  (c: any) => String(c.id ?? c._id) === String(p.client)\n                );\n                clientName = found?.name || String(p.client);\n              } else if ((p as any).clientId) {\n                const found = (clients || []).find(\n                  (c: any) =>\n                    String(c.id ?? c._id) === String((p as any).clientId)\n                );\n                clientName = found?.name || String((p as any).clientId);\n              } else {\n                clientName = \"-\";\n              }\n            }\n          } catch (e) {\n            clientName = \"-\";\n          }\n\n          const prev = map.get(pid) || {\n            projectId: p._id ?? p.id ?? pid,\n            title: p.title || \"Untitled\",\n            payout: 0,\n            clientName,\n          };\n          prev.payout += Number(a.payout || 0);\n          // keep the clientName (if already present, preserve)\n          if (!prev.clientName) prev.clientName = clientName;\n          map.set(pid, prev);\n        }\n      }\n    }\n    return Array.from(map.values()).sort((a, b) => b.payout - a.payout);\n  })();\n\n  \n\n  return (\n    <div className=\"space-y-8 font-headline\">\n      <header>\n        <h1 className=\"text-5xl font-black tracking-tighter\">DASHBOARD</h1>\n        <p className=\"text-muted-foreground text-lg\">\n          Real-time pulse of your agency.\n        </p>\n      </header>\n\n      <Tabs defaultValue=\"overview\">\n        <TabsList className=\"grid w-full grid-cols-1 h-auto\">\n          <TabsTrigger value=\"overview\" className=\"h-12 text-lg\">\n            Overview\n          </TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"overview\" className=\"space-y-8 mt-8\">\n          {isStaff ? (\n            <div className=\"grid grid-cols-1 lg:grid-cols-1 gap-8\">\n              <Card className=\"border-2 border-black\">\n                <CardHeader>\n                  <CardTitle className=\"text-2xl font-black tracking-tighter\">\n                    Leads Pipeline\n                  </CardTitle>\n                  <CardDescription>\n                    Current status of all leads.\n                  </CardDescription>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  {Object.entries(leadsByStatus).map(([status, count]) => (\n                    <div\n                      key={status}\n                      className=\"flex justify-between items-center bg-muted p-3\"\n                    >\n                      <span className=\"font-bold text-muted-foreground text-lg\">\n                        {status}\n                      </span>\n                      <span className=\"font-black text-3xl\">\n                        {Number(count)}\n                      </span>\n                    </div>\n                  ))}\n                </CardContent>\n              </Card>\n              <Card className=\"border-2 border-black\">\n                <CardHeader>\n                  <CardTitle className=\"text-2xl font-black tracking-tighter\">\n                    My Earnings\n                  </CardTitle>\n                  <CardDescription>\n                    Total payouts assigned to you across projects\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  <p className=\"text-5xl font-black\">\n                    ₹{Number(myEarnings || 0).toLocaleString()}\n                  </p>\n                </CardContent>\n              </Card>\n              <Card className=\"border-2 border-black\">\n                <CardHeader>\n                  <CardTitle className=\"text-2xl font-black tracking-tighter\">\n                    Earnings by Project\n                  </CardTitle>\n                  <CardDescription>\n                    Which projects contributed to your earnings\n                  </CardDescription>\n                </CardHeader>\n                <CardContent>\n                  {myEarningsByProject.length === 0 ? (\n                    <div className=\"text-sm text-muted-foreground\">\n                      No assigned payouts found\n                    </div>\n                  ) : (\n                    <Table>\n                      <TableHeader>\n                        <TableRow>\n                          <TableHead>Project</TableHead>\n                          <TableHead>Client</TableHead>\n                          <TableHead className=\"text-right\">Payout</TableHead>\n                        </TableRow>\n                      </TableHeader>\n                      <TableBody>\n                        {myEarningsByProject.map((p) => (\n                          <TableRow key={String(p.projectId)}>\n                            <TableCell className=\"font-bold\">\n                              {p.title}\n                            </TableCell>\n                            <TableCell>{p.clientName || \"-\"}</TableCell>\n                            <TableCell className=\"text-right font-black\">\n                              ₹{Number(p.payout || 0).toLocaleString()}\n                            </TableCell>\n                          </TableRow>\n                        ))}\n                      </TableBody>\n                    </Table>\n                  )}\n                </CardContent>\n              </Card>\n            </div>\n          ) : (\n            <>\n              <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4\">\n                {stats.map((stat) => (\n                  <Card key={stat.name} className=\"border-2 border-black\">\n                    <CardHeader>\n                      <CardTitle className=\"text-base font-bold text-muted-foreground tracking-widest\">\n                        {stat.name.toUpperCase()}\n                      </CardTitle>\n                    </CardHeader>\n                      <CardContent>\n                      <p className=\"text-5xl font-black tracking-tighter\">\n                        {stat.name === 'revenue' || stat.name === 'expense' ? (\n                          <AnimatedNumber value={Number(stat.value || 0)} duration={1000} currency />\n                        ) : stat.name === 'clients' ? (\n                          <AnimatedNumber value={Number(stat.value || 0)} duration={900} />\n                        ) : stat.name === 'projects' ? (\n                          <AnimatedNumber value={Number(stat.value || 0)} duration={900} />\n                        ) : (\n                          stat.value\n                        )}\n                      </p>\n                      <p\n                        className={cn(\n                          \"text-sm font-bold\",\n                          stat.changeType === \"positive\" && \"text-success\",\n                          stat.changeType === \"negative\" && \"text-destructive\"\n                        )}\n                      >\n                        {stat.change}\n                      </p>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n\n              <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n                <Card className=\"lg:col-span-2 border-2 border-black\">\n                  <CardHeader>\n                    <CardTitle className=\"text-2xl font-black tracking-tighter\">\n                      Recent Invoices\n                    </CardTitle>\n                    <CardDescription>\n                      A quick look at the latest billing activity.\n                    </CardDescription>\n                  </CardHeader>\n                  <CardContent>\n                    <Table>\n                      <TableHeader>\n                        <TableRow>\n                          <TableHead>Invoice ID</TableHead>\n                          <TableHead>Client</TableHead>\n                          <TableHead>Project / Title</TableHead>\n                          <TableHead>Amount</TableHead>\n                          <TableHead className=\"text-right\">Status</TableHead>\n                        </TableRow>\n                      </TableHeader>\n                      <TableBody>\n                        {invoices.slice(0, 4).map((invoice: any) => (\n                          <TableRow key={invoice.id}>\n                            <TableCell className=\"font-bold\">\n                              {invoice.id}\n                            </TableCell>\n                            <TableCell>\n                              {invoice.client || invoice.clientName || \"-\"}\n                            </TableCell>\n                            <TableCell>\n                              {invoice.clientName ||\n                                invoice.client ||\n                                clients.find(\n                                  (c: any) =>\n                                    String(c.id ?? c._id) ===\n                                    String(invoice.clientId)\n                                )?.name ||\n                                \"-\"}\n                            </TableCell>\n                            <TableCell>\n                              {invoice.title || invoice.projectTitle || \"-\"}\n                            </TableCell>\n                            <TableCell>\n                              ₹{Number(invoice.amount || 0).toLocaleString()}\n                            </TableCell>\n                            <TableCell className=\"text-right font-bold\">\n                              {invoice.status}\n                            </TableCell>\n                            \n                          </TableRow>\n                        ))}\n                      </TableBody>\n                    </Table>\n                  </CardContent>\n                </Card>\n                <Card className=\"border-2 border-black\">\n                  <CardHeader>\n                    <CardTitle className=\"text-2xl font-black tracking-tighter\">\n                      Leads Pipeline\n                    </CardTitle>\n                    <CardDescription>\n                      Current status of all leads.\n                    </CardDescription>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                    {Object.entries(leadsByStatus).map(([status, count]) => (\n                      <div\n                        key={status}\n                        className=\"flex justify-between items-center bg-muted p-3\"\n                      >\n                        <span className=\"font-bold text-muted-foreground text-lg\">\n                          {status}\n                        </span>\n                        <span className=\"font-black text-3xl\">\n                          <AnimatedNumber value={Number(count)} duration={700} />\n                        </span>\n                      </div>\n                    ))}\n                  </CardContent>\n                </Card>\n              </div>\n            </>\n          )}\n        </TabsContent>\n\n        {/* Insert monthly revenue into Overview for non-staff users */}\n        { !isStaff && (\n          <div className=\"space-y-8 mt-8\">\n            <Card className=\"lg:col-span-2 border-2 border-black\">\n              <CardHeader>\n                <CardTitle className=\"text-2xl font-black tracking-tighter\">\n                  MONTHLY REVENUE\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"h-[350px] w-full\">\n                  <ResponsiveContainer width=\"100%\" height=\"100%\">\n                    <BarChart\n                      data={revenueData}\n                      margin={{ top: 5, right: 20, left: -10, bottom: 5 }}\n                    >\n                      <CartesianGrid\n                        strokeDasharray=\"3 3\"\n                        stroke=\"hsl(var(--foreground))\"\n                        opacity={0.2}\n                      />\n                      <XAxis\n                        dataKey=\"month\"\n                        stroke=\"hsl(var(--foreground))\"\n                        fontSize={12}\n                        tickLine={false}\n                        axisLine={false}\n                      />\n                      <YAxis\n                        stroke=\"hsl(var(--foreground))\"\n                        fontSize={12}\n                        tickLine={false}\n                        axisLine={false}\n                        tickFormatter={(value) => `₹${value / 1000}k`}\n                      />\n                      <Bar dataKey=\"revenue\" radius={[4,4,0,0]}>\n                        {revenueData.map((entry, idx) => (\n                          <Cell key={entry.month} fill={['#0ea5e9','#7c3aed','#ef4444','#f59e0b','#10b981','#06b6d4'][idx % 6]} />\n                        ))}\n                      </Bar>\n                    </BarChart>\n                  </ResponsiveContainer>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        )}\n      </Tabs>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}