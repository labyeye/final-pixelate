module.exports=[68932,a=>{"use strict";var b=a.i(57457),c=a.i(90782),d=a.i(59104);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{className:"relative w-full overflow-auto",children:(0,b.jsx)("table",{ref:e,className:(0,d.cn)("w-full caption-bottom text-sm",a),...c})}));e.displayName="Table";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("thead",{ref:e,className:(0,d.cn)("[&_tr]:border-b",a),...c}));f.displayName="TableHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tbody",{ref:e,className:(0,d.cn)("[&_tr:last-child]:border-0",a),...c}));g.displayName="TableBody",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tfoot",{ref:e,className:(0,d.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...c})).displayName="TableFooter";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("tr",{ref:e,className:(0,d.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...c}));h.displayName="TableRow";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("th",{ref:e,className:(0,d.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...c}));i.displayName="TableHead";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("td",{ref:e,className:(0,d.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...c}));j.displayName="TableCell",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("caption",{ref:e,className:(0,d.cn)("mt-4 text-sm text-muted-foreground",a),...c})).displayName="TableCaption",a.s(["Table",()=>e,"TableBody",()=>g,"TableCell",()=>j,"TableHead",()=>i,"TableHeader",()=>f,"TableRow",()=>h])},15404,a=>{"use strict";var b=a.i(57457),c=a.i(90782),d=a.i(59104);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-none border-2 bg-card text-card-foreground",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-4",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-4 pt-0",a),...c}));i.displayName="CardContent";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-4 pt-0",a),...c}));j.displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardFooter",()=>j,"CardHeader",()=>f,"CardTitle",()=>g])},63420,a=>{"use strict";var b=a.i(57457),c=a.i(90782),d=a.i(59104);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-14 w-full rounded-none border-2 border-foreground bg-background px-4 py-3 text-lg ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e])},59361,a=>{"use strict";var b=a.i(57457),c=a.i(90782),d=a.i(59104);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-none border-2 border-foreground bg-background px-4 py-3 text-lg ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:e,...c}));e.displayName="Textarea",a.s(["Textarea",()=>e])},3644,a=>{"use strict";var b=a.i(57457),c=a.i(90782),d=a.i(90537),e=a.i(24231),f=a.i(88644),g=a.i(16458),h=a.i(15404),i=a.i(63420),j=a.i(73647),k=a.i(68932),l=a.i(59361);let m=f.z.object({title:f.z.string().min(1),link:f.z.string().url().or(f.z.string().min(0)),tech:f.z.string().optional(),rating:f.z.number().min(0).max(5).optional(),showOn:f.z.enum(["web-development","software-development","app-development","video-editing","photography","none"]),thumbnailBase64:f.z.string().optional(),note:f.z.string().optional()});function n(){let{user:a}=(0,d.useAuth)(),f=a?.role==="admin",[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)(null),r=(0,e.useForm)({resolver:(0,g.zodResolver)(m),defaultValues:{title:"",link:"",tech:"",rating:0,showOn:"none"}});(0,c.useEffect)(()=>{let a=!0;return(async()=>{try{let b=await fetch("/api/work-gallery");if(!b.ok)throw Error("Failed to fetch");let c=await b.json();a&&o(c||[])}catch(a){console.error("Failed to load gallery",a)}})(),()=>{a=!1}},[]);let s=async a=>a?new Promise((b,c)=>{let d=new FileReader;d.onload=()=>b(String(d.result)),d.onerror=c,d.readAsDataURL(a)}):null,t=async a=>{try{let b={...a};if(p){let a=await fetch(`/api/work-gallery/${p}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!a.ok)throw Error("Failed to update");let c=await a.json();o(a=>a.map(a=>String(a._id??a.id)===String(p)?c:a)),q(null),r.reset()}else{let a=await fetch("/api/work-gallery",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!a.ok)throw Error("Failed to save");let c=await a.json();o(a=>[...a,c]),r.reset()}}catch(a){console.error("Failed to save gallery item",a)}},u=async a=>{let b=a.target.files?.[0]??null,c=b?await s(b):null;r.setValue("thumbnailBase64",c||"")},v=async a=>{try{if(!confirm("Delete this gallery item?"))return;if(!(await fetch(`/api/work-gallery/${a}`,{method:"DELETE"})).ok)throw Error("Delete failed");o(b=>b.filter(b=>String(b._id??b.id)!==String(a)))}catch(a){console.error("Failed to delete",a)}};return(0,b.jsxs)("div",{className:"space-y-8 font-headline",children:[(0,b.jsxs)("header",{children:[(0,b.jsx)("h1",{className:"text-5xl font-black tracking-tighter",children:"Work Gallery Management"}),(0,b.jsx)("p",{className:"text-muted-foreground text-lg",children:"Upload project thumbnails and metadata. Choose where to show each item on the public website."})]}),(0,b.jsxs)(h.Card,{className:"border-2 border-black",children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{children:p?"Edit Gallery Item":"Add Gallery Item"}),(0,b.jsx)(h.CardDescription,{children:"Thumbnail, title, link, tech tags and rating"})]}),(0,b.jsx)(h.CardContent,{children:(0,b.jsxs)("form",{onSubmit:r.handleSubmit(a=>t(a)),className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium",children:"Title"}),(0,b.jsx)(i.Input,{...r.register("title")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium",children:"Project Link (optional)"}),(0,b.jsx)(i.Input,{...r.register("link")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium",children:"Tech / Tags (comma separated)"}),(0,b.jsx)(i.Input,{...r.register("tech")})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium",children:"Rating (0-5)"}),(0,b.jsx)(i.Input,{type:"number",min:0,max:5,...r.register("rating",{valueAsNumber:!0})})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium",children:"Show on"}),(0,b.jsxs)("select",{...r.register("showOn"),className:"w-full border rounded px-2 py-1",children:[(0,b.jsx)("option",{value:"none",children:"Do not display"}),(0,b.jsx)("option",{value:"web-development",children:"Web Development"}),(0,b.jsx)("option",{value:"software-development",children:"Software Development"}),(0,b.jsx)("option",{value:"app-development",children:"App Development"}),(0,b.jsx)("option",{value:"video-editing",children:"Video Editing"}),(0,b.jsx)("option",{value:"photography",children:"Photography"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium",children:"Thumbnail"}),(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:u})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium",children:"Note"}),(0,b.jsx)(l.Textarea,{...r.register("note")})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(j.Button,{type:"submit",children:p?"Update":"Save"}),(0,b.jsx)(j.Button,{variant:"ghost",onClick:()=>p?void(q(null),r.reset()):r.reset(),children:p?"Cancel":"Reset"})]})]})})]}),(0,b.jsx)("div",{className:"border-2 border-black",children:(0,b.jsxs)(k.Table,{children:[(0,b.jsx)(k.TableHeader,{children:(0,b.jsxs)(k.TableRow,{children:[(0,b.jsx)(k.TableHead,{children:"Preview"}),(0,b.jsx)(k.TableHead,{children:"Title"}),(0,b.jsx)(k.TableHead,{children:"Tech"}),(0,b.jsx)(k.TableHead,{className:"text-right",children:"Rating"}),(0,b.jsx)(k.TableHead,{children:"Show On"}),(0,b.jsx)(k.TableHead,{children:"Actions"})]})}),(0,b.jsx)(k.TableBody,{children:n.map(a=>(0,b.jsxs)(k.TableRow,{children:[(0,b.jsx)(k.TableCell,{children:a.thumbnailBase64?(0,b.jsx)("img",{src:a.thumbnailBase64,alt:a.title,style:{width:80,height:60,objectFit:"cover"}}):(0,b.jsx)("div",{className:"w-20 h-12 bg-gray-100 flex items-center justify-center",children:"No image"})}),(0,b.jsx)(k.TableCell,{className:"font-bold",children:a.title}),(0,b.jsx)(k.TableCell,{children:a.tech}),(0,b.jsx)(k.TableCell,{className:"text-right",children:a.rating??"-"}),(0,b.jsx)(k.TableCell,{children:a.showOn??"none"}),(0,b.jsx)(k.TableCell,{children:(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(j.Button,{size:"sm",onClick:()=>window.open(a.link||"#","_blank"),children:"Open"}),(0,b.jsx)(j.Button,{size:"sm",onClick:()=>{q(String(a._id??a.id)),r.reset({title:a.title||"",link:a.link||"",tech:a.tech||"",rating:Number(a.rating??0),showOn:a.showOn||"none",thumbnailBase64:a.thumbnailBase64||"",note:a.note||""})},children:"Edit"}),f?(0,b.jsx)(j.Button,{size:"sm",variant:"destructive",onClick:()=>v(String(a._id??a.id)),children:"Delete"}):null]})})]},a._id??a.id))})]})})]})}a.s(["default",()=>n])}];

//# sourceMappingURL=Desktop_Projects_final-pixelate_dashboard_src_ae1f2991._.js.map