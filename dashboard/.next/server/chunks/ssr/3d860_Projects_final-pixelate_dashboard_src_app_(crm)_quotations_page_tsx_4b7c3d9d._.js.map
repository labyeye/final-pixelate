{"version":3,"sources":["../../../../../../../../Desktop/Projects/final-pixelate/dashboard/src/app/%28crm%29/quotations/page.tsx","../../../../../../../../Desktop/Projects/final-pixelate/dashboard/src/components/quotations/quotation-pdf.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport jsPDF from \"jspdf\";\nimport { Button } from \"@/components/ui/button\";\nimport type { Quotation, Project } from \"@/lib/data\";\nimport { cn } from \"@/lib/utils\";\n// Quick quotation dialog removed per request\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { MoreVertical, Download } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { QuotationPDF } from \"@/components/quotations/quotation-pdf\";\nimport { formatCurrency } from \"@/lib/currency\";\nimport { renderToString } from \"react-dom/server\";\nimport { useAuth } from \"@/hooks/use-auth\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\n\n// This is a global state hack for demo purposes.\nif (typeof window !== \"undefined\" && !(window as any).__projectsStore) {\n  (window as any).__projectsStore = [];\n}\n\nexport default function QuotationsPage() {\n  const router = useRouter();\n  const [quotations, setQuotations] = useState<Quotation[]>([]);\n  const [clientsMap, setClientsMap] = useState<Record<string, any>>({});\n\n  const { toast } = useToast();\n  const { user } = useAuth();\n\n  useEffect(() => {\n    let mounted = true;\n    (async () => {\n      try {\n        const res = await fetch(\"/api/quotations\");\n        if (!res.ok)\n          throw new Error(`Failed to fetch quotations: ${res.status}`);\n        const items = await res.json();\n        if (mounted) setQuotations(items as Quotation[]);\n      } catch (err) {\n        console.error(\"Failed to load quotations\", err);\n      }\n    })();\n\n    // also load clients once for display in the table\n    (async () => {\n      try {\n        const res = await fetch(\"/api/clients\");\n        if (!res.ok) return;\n        const list = await res.json();\n        const map: Record<string, any> = {};\n        for (const c of list || []) {\n          if (c._id) map[String(c._id)] = c;\n          if (c.id) map[String(c.id)] = c;\n        }\n        if (mounted) setClientsMap(map);\n      } catch (e) {\n        // ignore\n      }\n    })();\n\n    return () => {\n      mounted = false;\n    };\n  }, []);\n\n  // Persist a status change to the server and update local state\n  const persistStatus = async (quote: Quotation, newStatus: string) => {\n    const token = localStorage.getItem(\"auth_token\") || \"\";\n    try {\n      const id = (quote as any).id || (quote as any)._id;\n      if (!id) throw new Error(\"No id to update\");\n      const res = await fetch(`/api/quotations/${id}`, {\n        method: \"PUT\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          ...(token ? { Authorization: `Bearer ${token}` } : {}),\n        },\n        body: JSON.stringify({ ...quote, status: newStatus }),\n      });\n      if (!res.ok) throw new Error(\"Failed to update status\");\n      const updated = await res.json();\n      setQuotations((prev) =>\n        prev.map((q) =>\n          ((q as any).id &&\n            (updated as any).id &&\n            (q as any).id === (updated as any).id) ||\n          ((q as any)._id &&\n            (updated as any)._id &&\n            String((q as any)._id) === String((updated as any)._id))\n            ? updated\n            : q\n        )\n      );\n      toast({ title: \"Updated\", description: \"Quotation status saved.\" });\n    } catch (err: any) {\n      console.error(\"Failed to persist status\", err);\n      toast({\n        title: \"Failed\",\n        description: err?.message || \"Could not update status\",\n      });\n    }\n  };\n\n  const updateStatus = (id: string, status: \"APPROVED\" | \"REJECTED\") => {\n    setQuotations((prev) =>\n      prev.map((q) => (q.id === id ? { ...q, status } : q))\n    );\n  };\n\n  const deleteQuotation = async (id: string) => {\n    const token = localStorage.getItem(\"auth_token\") || \"\";\n    try {\n      const res = await fetch(\"/api/quotations/\" + id, {\n        method: \"DELETE\",\n        headers: token ? { Authorization: \"Bearer \" + token } : {},\n      });\n      if (!res.ok) {\n        const body = await res.json().catch(() => ({}));\n        throw new Error(body?.error || \"Failed to delete\");\n      }\n      setQuotations((prev) => prev.filter((q) => q.id !== id));\n      toast({ title: \"Deleted\", description: \"Quotation deleted.\" });\n    } catch (e: any) {\n      console.error(\"Failed to delete quotation\", e);\n      toast({ title: \"Failed\", description: e.message || \"Could not delete\" });\n    }\n  };\n\n  const createProjectFromQuote = (quote: Quotation) => {\n    const servicesList = quote.services ?? [];\n    const newProject: Project = {\n      id: new Date().getTime(), // simple unique id\n      title: `New Project for ${quote.clientName}`,\n      client: quote.clientName,\n      progress: 0,\n      description: `Project created from quotation ${\n        quote.id\n      }. Services: ${servicesList.map((s) => s.name).join(\", \")}`,\n    };\n\n    // This is a global state hack for demo purposes.\n    (window as any).__projectsStore.push(newProject);\n\n    toast({\n      title: \"Project Created!\",\n      description: `A new project has been created for ${quote.clientName}.`,\n    });\n  };\n\n  const generatePdf = (quote: Quotation) => {\n    (async () => {\n      try {\n        // try to fetch client data so the PDF has full client details\n        let client = undefined;\n        if (quote.clientId) {\n          const res = await fetch(`/api/clients/${quote.clientId}`);\n          if (res.ok) client = await res.json();\n        }\n        // Use A4 paper (portrait) in mm so the PDF fills the page properly\n        const doc = new jsPDF({\n          unit: \"mm\",\n          format: \"a4\",\n          orientation: \"portrait\",\n        });\n        try {\n          const { loadNotoSansForJsPDF } = await import(\"@/lib/pdf-fonts\");\n          const family = await loadNotoSansForJsPDF(doc, \"NotoSans\");\n          if (family) {\n            try {\n              doc.setFont(family);\n            } catch (e) {}\n          }\n          const notoHref =\n            \"https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;700&display=swap\";\n          if (typeof document !== \"undefined\") {\n            if (!document.querySelector(`link[href=\"${notoHref}\"]`)) {\n              const link = document.createElement(\"link\");\n              link.rel = \"stylesheet\";\n              link.href = notoHref;\n              document.head.appendChild(link);\n            }\n            try {\n              await (document as any).fonts.load('1em \"Noto Sans\"');\n              await (document as any).fonts.ready;\n            } catch (e) {}\n          }\n          const displayId =\n            quote.id ||\n            (quote._id\n              ? `PN-${String(\n                  quotations.findIndex((q) => q === quote) + 1\n                ).padStart(5, \"0\")}`\n              : undefined);\n          const pdfBody = renderToString(\n            <QuotationPDF quote={quote} client={client} displayId={displayId} />\n          );\n          let styledHtml: string;\n          const fontLinkTag = `<link href=\"${notoHref}\" rel=\"stylesheet\">`;\n          try {\n            const fres = await fetch(\"/fonts/NotoSans-Regular.ttf\");\n            if (fres && fres.ok) {\n              const arrayBuffer = await fres.arrayBuffer();\n              const bytes = new Uint8Array(arrayBuffer);\n              let binary = \"\";\n              const chunkSize = 0x8000;\n              for (let i = 0; i < bytes.length; i += chunkSize) {\n                binary += String.fromCharCode.apply(\n                  null,\n                  Array.from(bytes.slice(i, i + chunkSize)) as any\n                );\n              }\n              const base64 =\n                typeof btoa !== \"undefined\"\n                  ? btoa(binary)\n                  : Buffer.from(binary, \"binary\").toString(\"base64\");\n              const fontDataFace = `\n                <style>\n                  @font-face {\n                    font-family: 'Noto Sans Local';\n                    src: url('data:font/truetype;base64,${base64}') format('truetype');\n                    font-weight: 400;\n                    font-style: normal;\n                    font-display: swap;\n                  }\n                </style>\n              `;\n              // fill the entire A4 page (210mm x 297mm)\n              styledHtml = `${fontDataFace}${fontLinkTag}<div style=\"width:100%;height:100%;margin:0;padding:0;box-sizing:border-box;\">${pdfBody}</div>`;\n            } else {\n              const localFontFace = `\n                <style>\n                  @font-face {\n                    font-family: 'Noto Sans Local';\n                    src: url('/fonts/NotoSans-Regular.ttf') format('truetype');\n                    font-weight: 400;\n                    font-style: normal;\n                    font-display: swap;\n                  }\n                  @font-face {\n                    font-family: 'Noto Sans Local';\n                    src: url('/fonts/NotoSans-Bold.ttf') format('truetype');\n                    font-weight: 700;\n                    font-style: normal;\n                    font-display: swap;\n                  }\n                </style>\n              `;\n              styledHtml = `${localFontFace}${fontLinkTag}<div style=\"width:100%;height:100%;margin:0;padding:0;box-sizing:border-box;font-family:'Noto Sans Local','Noto Sans',${\n                family ? family : \"sans-serif\"\n              };\">${pdfBody}</div>`;\n            }\n          } catch (e) {\n            styledHtml = `${fontLinkTag}<div style=\"width:100%;height:100%;margin:0;padding:0;box-sizing:border-box;font-family:'Noto Sans',${\n              family ? family : \"sans-serif\"\n            };\">${pdfBody}</div>`;\n          }\n\n          // Replace rupee glyphs with ASCII 'Rs.' to avoid missing glyphs in PDFs\n          const finalHtml = styledHtml.replace(/₹/g, \"Rs.\");\n\n          // Render to occupy the full page. Use the document's page width so\n          // units are consistent with the jsPDF instance (we created with mm).\n          const pageWidth = doc.internal.pageSize.getWidth();\n          const pageHeight = doc.internal.pageSize.getHeight();\n\n          doc.html(finalHtml, {\n            callback: function (doc) {\n              doc.save(`Quotation-${quote.id}.pdf`);\n            },\n            x: 0,\n            y: 0,\n            width: pageWidth,\n            windowWidth: 1200,\n          });\n        } catch (e) {\n          // if font loading fails, fall back to rendering without explicit font\n          const pdfContent = renderToString(\n            <QuotationPDF quote={quote} client={client} />\n          );\n          const finalPdfContent = String(pdfContent).replace(/₹/g, \"Rs.\");\n          const pageWidth = doc.internal.pageSize.getWidth();\n          doc.html(finalPdfContent, {\n            callback: function (doc) {\n              doc.save(`Quotation-${quote.id}.pdf`);\n            },\n            x: 0,\n            y: 0,\n            width: pageWidth,\n            windowWidth: 1200,\n          });\n        }\n      } catch (e) {\n        console.error(\"Failed to generate PDF\", e);\n        toast({ title: \"Failed\", description: \"Could not generate PDF\" });\n      }\n    })();\n  };\n\n  const getAuthorName = (authorId: number | undefined) => {\n    // we don't fetch users here for performance; return unknown when not provided\n    return \"Unknown\";\n  };\n\n  return (\n    <div className=\"space-y-8 font-headline\">\n      <header className=\"flex items-center justify-between gap-4\">\n        <div>\n          <h1 className=\"text-5xl font-black tracking-tighter\">QUOTATIONS</h1>\n          <p className=\"text-muted-foreground text-lg\">\n            Create, send, and track client quotations.\n          </p>\n        </div>\n        <div className=\"flex gap-2\">\n          <Button\n            size=\"lg\"\n            className=\"text-lg bg-[#F36F21] hover:bg-[#d85e1a]\"\n            onClick={() => router.push(\"/quotations/create\")}\n          >\n            New Professional Quotation\n          </Button>\n          {/* Quick Quotation removed — professional flow only */}\n        </div>\n      </header>\n\n      <div className=\"border-2 border-black rounded-lg overflow-hidden\">\n        <Table>\n          <TableHeader>\n            <TableRow className=\"border-b-2 border-black bg-gray-50\">\n              <TableHead className=\"text-base font-bold\">\n                Quote ID / Title\n              </TableHead>\n              <TableHead className=\"text-base font-bold\">Client</TableHead>\n              <TableHead className=\"text-base font-bold\">Date</TableHead>\n              <TableHead className=\"text-base font-bold\">Services</TableHead>\n              <TableHead className=\"text-base font-bold\">Modules</TableHead>\n              <TableHead className=\"text-base font-bold text-right\">\n                Total Amount\n              </TableHead>\n              <TableHead className=\"text-base font-bold text-center\">\n                Status\n              </TableHead>\n              <TableHead className=\"text-base font-bold text-right\">\n                Actions\n              </TableHead>\n            </TableRow>\n          </TableHeader>\n          <TableBody>\n            {quotations.length === 0 ? (\n              <TableRow>\n                <TableCell\n                  colSpan={8}\n                  className=\"text-center py-10 text-muted-foreground\"\n                >\n                  No quotations found. Create your first quotation to get\n                  started.\n                </TableCell>\n              </TableRow>\n            ) : (\n              quotations.map((quote, idx) => {\n                // Calculate total from services if available.\n                // Support multiple possible service shapes: { amount }, { total }, or { price, qty }\n                const servicesTotal = (quote.services || []).reduce(\n                  (sum: number, item: any) => {\n                    const fromAmount = Number(item?.amount ?? NaN);\n                    const fromTotal = Number(item?.total ?? NaN);\n                    const fromPriceQty =\n                      item?.price && item?.qty\n                        ? Number(item.price) * Number(item.qty)\n                        : NaN;\n                    const fromUnitPriceQty =\n                      item?.unitPrice && item?.qty\n                        ? Number(item.unitPrice) * Number(item.qty)\n                        : NaN;\n                    const val =\n                      Number.isFinite(fromAmount) && !Number.isNaN(fromAmount)\n                        ? fromAmount\n                        : Number.isFinite(fromTotal) && !Number.isNaN(fromTotal)\n                        ? fromTotal\n                        : Number.isFinite(fromPriceQty) &&\n                          !Number.isNaN(fromPriceQty)\n                        ? fromPriceQty\n                        : Number.isFinite(fromUnitPriceQty) &&\n                          !Number.isNaN(fromUnitPriceQty)\n                        ? fromUnitPriceQty\n                        : 0;\n                    return sum + val;\n                  },\n                  0\n                );\n                const totalAmount = servicesTotal || quote.amount || 0;\n\n                return (\n                  <TableRow\n                    key={quote._id ?? quote.id ?? idx}\n                    className=\"border-b border-gray-200 last:border-b-0 hover:bg-orange-50 transition-colors\"\n                  >\n                    <TableCell className=\"py-4 max-w-xs\">\n                      <div className=\"font-bold text-base text-[#F36F21]\">\n                        {(quote as any).quoteId ||\n                          quote.id ||\n                          `PN-${String(idx + 1).padStart(5, \"0\")}`}\n                      </div>\n                      <div className=\"text-sm font-semibold text-gray-900 mt-1 truncate\">\n                        {(quote as any).title || \"Untitled Project\"}\n                      </div>\n                      {(quote as any).subtitle && (\n                        <div className=\"text-xs text-gray-600 mt-0.5 truncate\">\n                          {(quote as any).subtitle}\n                        </div>\n                      )}\n                    </TableCell>\n\n                    <TableCell className=\"py-4\">\n                      <div className=\"font-bold text-gray-900\">\n                        {(quote.clientId &&\n                          clientsMap[String(quote.clientId)]?.businessName) ||\n                          (quote.clientId &&\n                            clientsMap[String(quote.clientId)]?.name) ||\n                          quote.clientName ||\n                          \"Client\"}\n                      </div>\n                      {quote.clientId &&\n                        clientsMap[String(quote.clientId)]?.email && (\n                          <div className=\"text-xs text-gray-600 mt-0.5\">\n                            {clientsMap[String(quote.clientId)].email}\n                          </div>\n                        )}\n                    </TableCell>\n\n                    <TableCell className=\"py-4\">\n                      <div className=\"text-sm text-gray-900\">\n                        {(quote as any).date\n                          ? new Date((quote as any).date).toLocaleDateString(\n                              \"en-GB\",\n                              {\n                                day: \"2-digit\",\n                                month: \"short\",\n                                year: \"numeric\",\n                              }\n                            )\n                          : \"N/A\"}\n                      </div>\n                    </TableCell>\n\n                    <TableCell className=\"py-4 max-w-xs\">\n                      <div className=\"flex flex-wrap gap-1\">\n                        {quote.services && quote.services.length > 0 ? (\n                          quote.services\n                            .slice(0, 3)\n                            .map((s: any, sidx: number) => (\n                              <Badge\n                                key={`${String(\n                                  s._id ?? s.id ?? s.serviceName ?? \"service\"\n                                )}-${sidx}`}\n                                variant=\"secondary\"\n                                className=\"text-xs\"\n                              >\n                                {s.serviceName || s.name || \"Service\"}\n                              </Badge>\n                            ))\n                        ) : (\n                          <span className=\"text-xs text-gray-500\">\n                            No services\n                          </span>\n                        )}\n                        {quote.services && quote.services.length > 3 && (\n                          <Badge variant=\"outline\" className=\"text-xs\">\n                            +{quote.services.length - 3} more\n                          </Badge>\n                        )}\n                      </div>\n                    </TableCell>\n\n                    <TableCell className=\"py-4 max-w-xs\">\n                      <div className=\"flex flex-wrap gap-1\">\n                        {(quote as any).modules &&\n                        (quote as any).modules.length > 0 ? (\n                          (quote as any).modules\n                            .slice(0, 2)\n                            .map((m: any, midx: number) => (\n                              <Badge\n                                key={`${String(\n                                  m._id ?? m.id ?? m.moduleName ?? \"module\"\n                                )}-${midx}`}\n                                variant=\"outline\"\n                                className=\"text-xs\"\n                              >\n                                {m.moduleName || \"Module\"}\n                              </Badge>\n                            ))\n                        ) : (\n                          <span className=\"text-xs text-gray-500\">\n                            No modules\n                          </span>\n                        )}\n                        {(quote as any).modules &&\n                          (quote as any).modules.length > 2 && (\n                            <Badge variant=\"outline\" className=\"text-xs\">\n                              +{(quote as any).modules.length - 2}\n                            </Badge>\n                          )}\n                      </div>\n                    </TableCell>\n\n                    <TableCell className=\"text-right font-bold text-base py-4\">\n                      {formatCurrency(totalAmount)}\n                    </TableCell>\n\n                    <TableCell className=\"text-center py-4\">\n                      <Select\n                        value={quote.status || \"PENDING\"}\n                        onValueChange={(v) => {\n                          setQuotations((prev) =>\n                            prev.map((q) => {\n                              const same =\n                                (q as any)._id && (quote as any)._id\n                                  ? String((q as any)._id) ===\n                                    String((quote as any)._id)\n                                  : (q as any).id && (quote as any).id\n                                  ? (q as any).id === (quote as any).id\n                                  : false;\n                              return same ? { ...q, status: v as any } : q;\n                            })\n                          );\n                          persistStatus(quote, v);\n                        }}\n                      >\n                        <SelectTrigger\n                          className={cn(\n                            \"h-9 px-3 font-semibold text-xs w-[110px]\",\n                            quote.status === \"APPROVED\" &&\n                              \"bg-green-100 text-green-800 border-green-300\",\n                            quote.status === \"REJECTED\" &&\n                              \"bg-red-100 text-red-800 border-red-300\",\n                            (!quote.status || quote.status === \"PENDING\") &&\n                              \"bg-yellow-100 text-yellow-800 border-yellow-300\"\n                          )}\n                        >\n                          <SelectValue />\n                        </SelectTrigger>\n                        <SelectContent>\n                          <SelectItem value=\"PENDING\">PENDING</SelectItem>\n                          <SelectItem value=\"APPROVED\">APPROVED</SelectItem>\n                          <SelectItem value=\"REJECTED\">REJECTED</SelectItem>\n                        </SelectContent>\n                      </Select>\n                    </TableCell>\n\n                    <TableCell className=\"text-right py-4\">\n                      <div className=\"flex items-center justify-end gap-2\">\n                        <Button\n                          size=\"sm\"\n                          variant=\"outline\"\n                          className=\"h-8\"\n                          onClick={() =>\n                            router.push(\n                              `/quotations/${\n                                (quote as any)._id || (quote as any).id\n                              }/view`\n                            )\n                          }\n                        >\n                          View\n                        </Button>\n\n                        {quote.status === \"APPROVED\" && (\n                          <Button\n                            size=\"sm\"\n                            className=\"bg-[#F36F21] hover:bg-[#d85e1a] h-8\"\n                            onClick={() => createProjectFromQuote(quote)}\n                          >\n                            Create Project\n                          </Button>\n                        )}\n\n                        <DropdownMenu>\n                          <DropdownMenuTrigger asChild>\n                            <Button\n                              variant=\"ghost\"\n                              size=\"icon\"\n                              className=\"h-8 w-8\"\n                            >\n                              <MoreVertical className=\"h-4 w-4\" />\n                            </Button>\n                          </DropdownMenuTrigger>\n                          <DropdownMenuContent align=\"end\">\n                            <DropdownMenuItem\n                              onClick={() => {\n                                const id =\n                                  (quote as any)._id || (quote as any).id;\n                                if (\n                                  id &&\n                                  confirm(\n                                    \"Are you sure you want to delete this quotation?\"\n                                  )\n                                ) {\n                                  deleteQuotation(String(id));\n                                }\n                              }}\n                              className=\"text-destructive font-semibold\"\n                            >\n                              Delete\n                            </DropdownMenuItem>\n                          </DropdownMenuContent>\n                        </DropdownMenu>\n                      </div>\n                    </TableCell>\n                  </TableRow>\n                );\n              })\n            )}\n          </TableBody>\n        </Table>\n      </div>\n    </div>\n  );\n}\n","import type { Quotation, Client } from \"@/lib/data\";\nimport React, { useEffect, useState } from \"react\";\nimport logo from \"@/assets/images/logo-transparent.png\";\nimport signImg from \"@/assets/images/sign.png\";\n\nexport function QuotationPDF({\n  quote,\n  client: initialClient,\n  displayId,\n}: {\n  quote: Quotation;\n  client?: Client;\n  displayId?: string;\n}) {\n  const [client, setClient] = useState<Client | undefined>(initialClient);\n  const [settings, setSettings] = useState<any>(null);\n\n  useEffect(() => {\n    let mounted = true;\n    \n    // Fetch client\n    if (!client && quote.clientId) {\n      (async () => {\n        try {\n          const res = await fetch(`/api/clients/${quote.clientId}`);\n          if (!mounted) return;\n          if (res.ok) {\n            const data = await res.json();\n            setClient(data);\n          }\n        } catch (e) {\n          // ignore\n        }\n      })();\n    }\n    \n    // Fetch settings\n    (async () => {\n      try {\n        const res = await fetch('/api/settings');\n        if (!mounted) return;\n        if (res.ok) {\n          const data = await res.json();\n          setSettings(data);\n        }\n      } catch (e) {\n        // ignore\n      }\n    })();\n    \n    return () => {\n      mounted = false;\n    };\n  }, [quote.clientId, client]);\n\n  const effectiveClientName = client?.name || quote.clientName || \"Client\";\n\n  // Calculate totals from services if available\n  const servicesTotal = (quote.services || []).reduce((sum: number, item) => sum + Number(item.amount || 0), 0);\n  const subtotal = servicesTotal || quote.amount || 0;\n  const discount = Number(quote.discount || 0);\n  const total = subtotal - discount;\n\n  const formatDate = (d?: string | Date | number) => {\n    if (!d) return \"—\";\n    const dt = d instanceof Date ? d : new Date(d);\n    if (isNaN(dt.getTime())) return \"—\";\n    return dt.toLocaleDateString('en-GB', {\n      day: '2-digit',\n      month: 'long',\n      year: 'numeric'\n    });\n  };\n\n  const formatCurrency = (v: number) => {\n    try {\n      return `Rs.${(v || 0).toLocaleString('en-IN')}`;\n    } catch (e) {\n      return `Rs.${(v || 0).toLocaleString()}`;\n    }\n  };\n\n  return (\n    <div\n      style={{\n        fontFamily: \"'Noto Sans Local', 'Noto Sans', Inter, Roboto, sans-serif\",\n        width: \"210mm\",\n        color: \"#111\",\n        background: \"#fff\",\n        fontSize: \"14px\",\n        lineHeight: \"1.6\",\n      }}\n    >\n      {/* PAGE 1: COVER PAGE */}\n      <div\n        style={{\n          width: \"210mm\",\n          height: \"297mm\",\n          padding: \"40mm 20mm\",\n          display: \"flex\",\n          flexDirection: \"column\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          textAlign: \"center\",\n          background: \"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)\",\n          pageBreakAfter: \"always\",\n        }}\n      >\n        <div\n          style={{\n            fontSize: \"52px\",\n            fontWeight: \"800\",\n            color: \"#111\",\n            marginBottom: \"30px\",\n            lineHeight: \"1.2\",\n            maxWidth: \"80%\",\n          }}\n        >\n          {(quote as any).title || \"Project Quotation\"}\n        </div>\n\n        <div\n          style={{\n            display: \"inline-block\",\n            padding: \"12px 32px\",\n            background: \"#F36F21\",\n            color: \"#fff\",\n            fontSize: \"18px\",\n            fontWeight: \"700\",\n            borderRadius: \"8px\",\n            marginBottom: \"40px\",\n          }}\n        >\n          {displayId || quote.id || \"QUOTE-001\"}\n        </div>\n\n        {(quote as any).subtitle && (\n          <div\n            style={{\n              fontSize: \"20px\",\n              color: \"#555\",\n              marginBottom: \"50px\",\n              maxWidth: \"70%\",\n            }}\n          >\n            {(quote as any).subtitle}\n          </div>\n        )}\n\n        <div style={{ fontSize: \"28px\", fontWeight: \"700\", color: \"#222\", marginBottom: \"20px\" }}>\n          {effectiveClientName}\n        </div>\n\n        <div style={{ fontSize: \"18px\", color: \"#666\" }}>\n          {formatDate(new Date())}\n        </div>\n      </div>\n\n      {/* PAGE 2: COMPANY INFORMATION (PERMANENT) */}\n      <div\n        style={{\n          width: \"210mm\",\n          minHeight: \"297mm\",\n          padding: \"20mm\",\n          background: \"#1a1a1a\",\n          color: \"#fff\",\n          pageBreakAfter: \"always\",\n        }}\n      >\n        {/* Company Header */}\n        <div style={{ textAlign: \"center\", marginBottom: \"40px\", paddingTop: \"20px\" }}>\n          <div style={{ fontSize: \"42px\", fontWeight: \"800\", color: \"#F36F21\", marginBottom: \"10px\" }}>\n            {settings?.companyName || \"Pixelate Nest\"}\n          </div>\n          <div style={{ fontSize: \"18px\", color: \"#ccc\" }}>\n            Creative Software & Digital Solutions\n          </div>\n        </div>\n\n        {/* About Section */}\n        {settings?.about && (\n          <div style={{ marginBottom: \"35px\" }}>\n            <div\n              style={{\n                fontSize: \"24px\",\n                fontWeight: \"700\",\n                color: \"#F36F21\",\n                marginBottom: \"15px\",\n                borderBottom: \"2px solid #F36F21\",\n                paddingBottom: \"8px\",\n              }}\n            >\n              About Us\n            </div>\n            <div style={{ fontSize: \"16px\", lineHeight: \"1.8\", color: \"#ddd\" }}>\n              {settings.about}\n            </div>\n          </div>\n        )}\n\n        {/* Mission, Vision, Goal Cards */}\n        <div\n          style={{\n            display: \"grid\",\n            gridTemplateColumns: \"1fr 1fr 1fr\",\n            gap: \"20px\",\n            marginBottom: \"35px\",\n          }}\n        >\n          {settings?.mission && (\n            <div\n              style={{\n                background: \"#2a2a2a\",\n                padding: \"20px\",\n                borderRadius: \"8px\",\n                borderLeft: \"4px solid #F36F21\",\n              }}\n            >\n              <div style={{ fontSize: \"18px\", fontWeight: \"700\", color: \"#F36F21\", marginBottom: \"10px\" }}>\n                Mission\n              </div>\n              <div style={{ fontSize: \"14px\", color: \"#ccc\", lineHeight: \"1.6\" }}>\n                {settings.mission}\n              </div>\n            </div>\n          )}\n\n          {settings?.vision && (\n            <div\n              style={{\n                background: \"#2a2a2a\",\n                padding: \"20px\",\n                borderRadius: \"8px\",\n                borderLeft: \"4px solid #F36F21\",\n              }}\n            >\n              <div style={{ fontSize: \"18px\", fontWeight: \"700\", color: \"#F36F21\", marginBottom: \"10px\" }}>\n                Vision\n              </div>\n              <div style={{ fontSize: \"14px\", color: \"#ccc\", lineHeight: \"1.6\" }}>\n                {settings.vision}\n              </div>\n            </div>\n          )}\n\n          {settings?.goal && (\n            <div\n              style={{\n                background: \"#2a2a2a\",\n                padding: \"20px\",\n                borderRadius: \"8px\",\n                borderLeft: \"4px solid #F36F21\",\n              }}\n            >\n              <div style={{ fontSize: \"18px\", fontWeight: \"700\", color: \"#F36F21\", marginBottom: \"10px\" }}>\n                Goal\n              </div>\n              <div style={{ fontSize: \"14px\", color: \"#ccc\", lineHeight: \"1.6\" }}>\n                {settings.goal}\n              </div>\n            </div>\n          )}\n        </div>\n\n        {/* Contact Information */}\n        <div\n          style={{\n            background: \"#2a2a2a\",\n            padding: \"25px\",\n            borderRadius: \"8px\",\n            marginTop: \"30px\",\n          }}\n        >\n          <div style={{ fontSize: \"22px\", fontWeight: \"700\", color: \"#F36F21\", marginBottom: \"20px\" }}>\n            Contact Information\n          </div>\n          <div style={{ display: \"grid\", gridTemplateColumns: \"1fr 1fr\", gap: \"15px\", fontSize: \"14px\" }}>\n            <div>\n              <div style={{ color: \"#999\", marginBottom: \"5px\" }}>Email</div>\n              <div style={{ color: \"#fff\", fontWeight: \"600\" }}>\n                {settings?.email || \"info@pixelatenest.com\"}\n              </div>\n            </div>\n            <div>\n              <div style={{ color: \"#999\", marginBottom: \"5px\" }}>Phone</div>\n              <div style={{ color: \"#fff\", fontWeight: \"600\" }}>\n                {settings?.phone || \"+91 XXXXXXXXXX\"}\n              </div>\n            </div>\n            <div>\n              <div style={{ color: \"#999\", marginBottom: \"5px\" }}>Address</div>\n              <div style={{ color: \"#fff\", fontWeight: \"600\" }}>\n                {settings?.address || \"Kala Bhawan, Akharaghat Road, Muzaffarpur, Bihar\"}\n              </div>\n            </div>\n            <div>\n              <div style={{ color: \"#999\", marginBottom: \"5px\" }}>Website</div>\n              <div style={{ color: \"#F36F21\", fontWeight: \"600\" }}>\n                {settings?.website || \"www.pixelatenest.com\"}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* PAGE 3+: QUOTATION DETAILS */}\n      <div style={{ width: \"210mm\", padding: \"20mm\" }}>\n        {/* Client Information */}\n        <div style={{ marginBottom: \"35px\" }}>\n          <div\n            style={{\n              fontSize: \"26px\",\n              fontWeight: \"700\",\n              color: \"#111\",\n              marginBottom: \"20px\",\n              borderBottom: \"3px solid #F36F21\",\n              paddingBottom: \"10px\",\n            }}\n          >\n            Client Information\n          </div>\n          <div style={{ background: \"#f8f9fa\", padding: \"20px\", borderRadius: \"8px\", fontSize: \"15px\" }}>\n            <div style={{ marginBottom: \"10px\" }}>\n              <strong>Name:</strong> {effectiveClientName}\n            </div>\n            {client?.email && (\n              <div style={{ marginBottom: \"10px\" }}>\n                <strong>Email:</strong> {client.email}\n              </div>\n            )}\n            {client?.phone && (\n              <div style={{ marginBottom: \"10px\" }}>\n                <strong>Phone:</strong> {client.phone}\n              </div>\n            )}\n            {client?.address && (\n              <div style={{ marginBottom: \"10px\" }}>\n                <strong>Address:</strong> {client.address}\n              </div>\n            )}\n            {client?.hasGst && (\n              <>\n                <div style={{ marginTop: \"15px\", fontWeight: \"700\", color: \"#F36F21\" }}>GST Details</div>\n                <div style={{ marginTop: \"8px\" }}>\n                  <strong>Company:</strong> {client.gstCompanyName}\n                </div>\n                <div style={{ marginTop: \"5px\" }}>\n                  <strong>GSTIN:</strong> {client.gstNumber}\n                </div>\n                <div style={{ marginTop: \"5px\" }}>\n                  <strong>Address:</strong> {client.gstAddress}\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n\n        {/* Objective */}\n        {(quote as any).objective && (\n          <div style={{ marginBottom: \"30px\" }}>\n            <div\n              style={{\n                fontSize: \"22px\",\n                fontWeight: \"700\",\n                color: \"#111\",\n                marginBottom: \"12px\",\n                borderLeft: \"4px solid #F36F21\",\n                paddingLeft: \"12px\",\n              }}\n            >\n              Objective\n            </div>\n            <div style={{ fontSize: \"15px\", lineHeight: \"1.7\", color: \"#333\" }}>\n              {(quote as any).objective}\n            </div>\n          </div>\n        )}\n\n        {/* Purpose */}\n        {(quote as any).purpose && (\n          <div style={{ marginBottom: \"30px\" }}>\n            <div\n              style={{\n                fontSize: \"22px\",\n                fontWeight: \"700\",\n                color: \"#111\",\n                marginBottom: \"12px\",\n                borderLeft: \"4px solid #F36F21\",\n                paddingLeft: \"12px\",\n              }}\n            >\n              Purpose\n            </div>\n            <div style={{ fontSize: \"15px\", lineHeight: \"1.7\", color: \"#333\" }}>\n              {(quote as any).purpose}\n            </div>\n          </div>\n        )}\n\n        {/* Scope */}\n        {(quote as any).scope && (quote as any).scope.length > 0 && (\n          <div style={{ marginBottom: \"30px\", pageBreakInside: \"avoid\" }}>\n            <div\n              style={{\n                fontSize: \"22px\",\n                fontWeight: \"700\",\n                color: \"#111\",\n                marginBottom: \"15px\",\n                borderLeft: \"4px solid #F36F21\",\n                paddingLeft: \"12px\",\n              }}\n            >\n              Scope of Work\n            </div>\n            <div style={{ paddingLeft: \"20px\" }}>\n              {(quote as any).scope.map((item: any, idx: number) => (\n                <div key={idx} style={{ marginBottom: \"8px\", fontSize: \"15px\" }}>\n                  <strong style={{ color: \"#F36F21\" }}>•</strong> {item}\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Deliverables */}\n        {(quote as any).deliverables && (quote as any).deliverables.length > 0 && (\n          <div style={{ marginBottom: \"30px\", pageBreakInside: \"avoid\" }}>\n            <div\n              style={{\n                fontSize: \"22px\",\n                fontWeight: \"700\",\n                color: \"#111\",\n                marginBottom: \"15px\",\n                borderLeft: \"4px solid #F36F21\",\n                paddingLeft: \"12px\",\n              }}\n            >\n              Deliverables\n            </div>\n            <div style={{ paddingLeft: \"20px\" }}>\n              {(quote as any).deliverables.map((item: any, idx: number) => (\n                <div key={idx} style={{ marginBottom: \"8px\", fontSize: \"15px\" }}>\n                  <strong style={{ color: \"#F36F21\" }}>•</strong> {item}\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Timeline */}\n        {(quote as any).timeline && (quote as any).timeline.length > 0 && (\n          <div style={{ marginBottom: \"35px\", pageBreakInside: \"avoid\" }}>\n            <div\n              style={{\n                fontSize: \"22px\",\n                fontWeight: \"700\",\n                color: \"#111\",\n                marginBottom: \"15px\",\n                borderLeft: \"4px solid #F36F21\",\n                paddingLeft: \"12px\",\n              }}\n            >\n              Timeline\n            </div>\n            <table style={{ width: \"100%\", borderCollapse: \"collapse\", fontSize: \"14px\" }}>\n              <thead>\n                <tr style={{ background: \"#F36F21\", color: \"#fff\" }}>\n                  <th style={{ padding: \"12px\", textAlign: \"left\", border: \"1px solid #ddd\" }}>Phase</th>\n                  <th style={{ padding: \"12px\", textAlign: \"left\", border: \"1px solid #ddd\" }}>Duration</th>\n                  <th style={{ padding: \"12px\", textAlign: \"left\", border: \"1px solid #ddd\" }}>Description</th>\n                </tr>\n              </thead>\n              <tbody>\n                {(quote as any).timeline.map((item: any, idx: number) => (\n                  <tr key={idx} style={{ background: idx % 2 === 0 ? \"#fff\" : \"#f8f9fa\" }}>\n                    <td style={{ padding: \"10px\", border: \"1px solid #ddd\" }}>{item.phase}</td>\n                    <td style={{ padding: \"10px\", border: \"1px solid #ddd\" }}>{item.duration}</td>\n                    <td style={{ padding: \"10px\", border: \"1px solid #ddd\" }}>{item.description}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n\n        {/* Services Table */}\n        {quote.services && quote.services.length > 0 && (\n          <div style={{ marginBottom: \"35px\", pageBreakInside: \"avoid\" }}>\n            <div\n              style={{\n                fontSize: \"22px\",\n                fontWeight: \"700\",\n                color: \"#111\",\n                marginBottom: \"15px\",\n                borderLeft: \"4px solid #F36F21\",\n                paddingLeft: \"12px\",\n              }}\n            >\n              Services\n            </div>\n            <table style={{ width: \"100%\", borderCollapse: \"collapse\", fontSize: \"14px\" }}>\n              <thead>\n                <tr style={{ background: \"#F36F21\", color: \"#fff\" }}>\n                  <th style={{ padding: \"12px\", textAlign: \"left\", border: \"1px solid #ddd\" }}>Service</th>\n                  <th style={{ padding: \"12px\", textAlign: \"left\", border: \"1px solid #ddd\" }}>Start Date</th>\n                  <th style={{ padding: \"12px\", textAlign: \"left\", border: \"1px solid #ddd\" }}>End Date</th>\n                  <th style={{ padding: \"12px\", textAlign: \"left\", border: \"1px solid #ddd\" }}>Deliverables</th>\n                  <th style={{ padding: \"12px\", textAlign: \"right\", border: \"1px solid #ddd\" }}>Amount</th>\n                </tr>\n              </thead>\n              <tbody>\n                {quote.services.map((service, idx: number) => (\n                  <tr key={idx} style={{ background: idx % 2 === 0 ? \"#fff\" : \"#f8f9fa\" }}>\n                    <td style={{ padding: \"10px\", border: \"1px solid #ddd\" }}>{service.name || \"-\"}</td>\n                    <td style={{ padding: \"10px\", border: \"1px solid #ddd\" }}>\n                      {service.startDate ? formatDate(service.startDate) : \"-\"}\n                    </td>\n                    <td style={{ padding: \"10px\", border: \"1px solid #ddd\" }}>\n                      {service.endDate ? formatDate(service.endDate) : \"-\"}\n                    </td>\n                    <td style={{ padding: \"10px\", border: \"1px solid #ddd\" }}>{service.deliverables || \"-\"}</td>\n                    <td style={{ padding: \"10px\", border: \"1px solid #ddd\", textAlign: \"right\", fontWeight: \"600\" }}>\n                      {formatCurrency(Number(service.amount || 0))}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        )}\n\n        {/* Pricing Breakdown */}\n        <div\n          style={{\n            marginBottom: \"35px\",\n            display: \"flex\",\n            justifyContent: \"flex-end\",\n            pageBreakInside: \"avoid\",\n          }}\n        >\n          <div style={{ width: \"300px\", background: \"#f8f9fa\", padding: \"20px\", borderRadius: \"8px\" }}>\n            <div\n              style={{\n                display: \"flex\",\n                justifyContent: \"space-between\",\n                fontSize: \"16px\",\n                marginBottom: \"12px\",\n              }}\n            >\n              <span style={{ fontWeight: \"600\" }}>Subtotal</span>\n              <span>{formatCurrency(subtotal)}</span>\n            </div>\n            {discount > 0 && (\n              <div\n                style={{\n                  display: \"flex\",\n                  justifyContent: \"space-between\",\n                  fontSize: \"16px\",\n                  marginBottom: \"12px\",\n                  color: \"#28a745\",\n                }}\n              >\n                <span style={{ fontWeight: \"600\" }}>Discount</span>\n                <span>- {formatCurrency(discount)}</span>\n              </div>\n            )}\n            <div\n              style={{\n                borderTop: \"2px solid #F36F21\",\n                paddingTop: \"12px\",\n                display: \"flex\",\n                justifyContent: \"space-between\",\n                fontSize: \"20px\",\n                fontWeight: \"700\",\n                color: \"#111\",\n              }}\n            >\n              <span>Total</span>\n              <span>{formatCurrency(total)}</span>\n            </div>\n          </div>\n        </div>\n\n        {/* Modules */}\n        {(quote as any).modules && (quote as any).modules.length > 0 && (\n          <div style={{ marginBottom: \"35px\", pageBreakInside: \"avoid\" }}>\n            <div\n              style={{\n                fontSize: \"22px\",\n                fontWeight: \"700\",\n                color: \"#111\",\n                marginBottom: \"15px\",\n                borderLeft: \"4px solid #F36F21\",\n                paddingLeft: \"12px\",\n              }}\n            >\n              Modules\n            </div>\n            <div style={{ display: \"grid\", gridTemplateColumns: \"1fr 1fr\", gap: \"15px\" }}>\n              {(quote as any).modules.map((module: any, idx: number) => (\n                <div\n                  key={idx}\n                  style={{\n                    background: \"#f8f9fa\",\n                    padding: \"15px\",\n                    borderRadius: \"8px\",\n                    borderLeft: \"3px solid #F36F21\",\n                  }}\n                >\n                  <div style={{ fontSize: \"16px\", fontWeight: \"700\", color: \"#111\", marginBottom: \"8px\" }}>\n                    {module.name || `Module ${idx + 1}`}\n                  </div>\n                  {module.description && (\n                    <div style={{ fontSize: \"14px\", color: \"#555\", marginBottom: \"8px\" }}>\n                      {module.description}\n                    </div>\n                  )}\n                  {module.status && (\n                    <div\n                      style={{\n                        display: \"inline-block\",\n                        padding: \"4px 12px\",\n                        background:\n                          module.status === \"completed\"\n                            ? \"#28a745\"\n                            : module.status === \"in-progress\"\n                            ? \"#ffc107\"\n                            : \"#6c757d\",\n                        color: \"#fff\",\n                        fontSize: \"12px\",\n                        fontWeight: \"600\",\n                        borderRadius: \"4px\",\n                      }}\n                    >\n                      {module.status}\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {/* Terms & Conditions */}\n        <div style={{ marginTop: \"40px\", pageBreakInside: \"avoid\" }}>\n          <div\n            style={{\n              fontSize: \"22px\",\n              fontWeight: \"700\",\n              color: \"#111\",\n              marginBottom: \"15px\",\n              borderLeft: \"4px solid #F36F21\",\n              paddingLeft: \"12px\",\n            }}\n          >\n            Terms & Conditions\n          </div>\n          <div style={{ fontSize: \"14px\", lineHeight: \"1.7\", color: \"#555\" }}>\n            {(quote as any).paymentTerms && (\n              <div style={{ marginBottom: \"10px\" }}>\n                <strong>Payment Terms:</strong> {(quote as any).paymentTerms}\n              </div>\n            )}\n            {(quote as any).customTerms && (quote as any).customTerms.length > 0 && (\n              <div style={{ marginTop: \"15px\" }}>\n                {(quote as any).customTerms.map((term: any, idx: number) => (\n                  <div key={idx} style={{ marginBottom: \"8px\" }}>\n                    <strong style={{ color: \"#F36F21\" }}>•</strong> {term}\n                  </div>\n                ))}\n              </div>\n            )}\n            {(!(quote as any).paymentTerms && (!(quote as any).customTerms || (quote as any).customTerms.length === 0)) && (\n              <div>\n                {settings?.termsAndConditions ||\n                  \"Payment due within 30 days. This quotation is valid for 15 days from the date of issue. All work is subject to our standard terms of service.\"}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Signature */}\n        <div style={{ marginTop: \"50px\", display: \"flex\", justifyContent: \"space-between\" }}>\n          <div style={{ textAlign: \"center\" }}>\n            <div style={{ borderTop: \"2px solid #111\", width: \"200px\", paddingTop: \"10px\", marginTop: \"60px\" }}>\n              <div style={{ fontWeight: \"700\", fontSize: \"15px\" }}>Client Signature</div>\n              <div style={{ fontSize: \"13px\", color: \"#666\", marginTop: \"5px\" }}>Date: __________</div>\n            </div>\n          </div>\n          <div style={{ textAlign: \"center\" }}>\n            <img\n              src={typeof signImg === \"string\" ? signImg : (signImg as any).src}\n              alt=\"Signature\"\n              style={{ width: \"150px\", height: \"80px\", objectFit: \"contain\" }}\n            />\n            <div style={{ borderTop: \"2px solid #111\", width: \"200px\", paddingTop: \"10px\" }}>\n              <div style={{ fontWeight: \"700\", fontSize: \"15px\" }}>Authorized Signature</div>\n              <div style={{ fontSize: \"13px\", color: \"#666\", marginTop: \"5px\" }}>\n                {settings?.companyName || \"Pixelate Nest\"}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div\n          style={{\n            marginTop: \"40px\",\n            paddingTop: \"20px\",\n            borderTop: \"1px solid #ddd\",\n            textAlign: \"center\",\n            fontSize: \"12px\",\n            color: \"#999\",\n          }}\n        >\n          <div>{settings?.companyName || \"Pixelate Nest\"} | Creative Software & Digital Solutions</div>\n          <div style={{ marginTop: \"5px\" }}>\n            {settings?.email || \"info@pixelatenest.com\"} | {settings?.phone || \"+91 XXXXXXXXXX\"}\n          </div>\n          <div style={{ marginTop: \"5px\" }}>\n            {settings?.address || \"Kala Bhawan, Akharaghat Road, Muzaffarpur, Bihar\"}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}