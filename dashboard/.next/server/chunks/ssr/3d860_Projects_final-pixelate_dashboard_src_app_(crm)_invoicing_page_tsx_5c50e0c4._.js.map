{"version":3,"sources":["../../../../../../../../Desktop/Projects/final-pixelate/dashboard/src/app/%28crm%29/invoicing/page.tsx","../../../../../../../../Desktop/Projects/final-pixelate/dashboard/src/components/invoices/add-invoice-dialog.tsx","../../../../../../../../Desktop/Projects/final-pixelate/dashboard/src/assets/images/logo-transparent.png.mjs%20%28structured%20image%20object%20with%20data%20url%29","../../../../../../../../Desktop/Projects/final-pixelate/dashboard/src/components/invoices/invoice-pdf.tsx","../../../../../../../../Desktop/Projects/final-pixelate/dashboard/src/components/invoices/edit-invoice-dialog.tsx","../../../../../../../../Desktop/Projects/final-pixelate/dashboard/src/components/invoices/record-payment-dialog.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { cn } from \"@/lib/utils\";\nimport { Button } from \"@/components/ui/button\";\nimport { useEffect, useState } from \"react\";\nimport { AddInvoiceDialog } from \"@/components/invoices/add-invoice-dialog\";\nimport EditInvoiceDialog from \"@/components/invoices/edit-invoice-dialog\";\nimport RecordPaymentDialog from \"@/components/invoices/record-payment-dialog\";\nimport { InvoicePDF } from \"@/components/invoices/invoice-pdf\";\nimport jsPDF from \"jspdf\";\nimport { renderToString } from \"react-dom/server\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\n\ntype Invoice = any;\n\nexport default function InvoicingPage() {\n  const [invoices, setInvoices] = useState<Invoice[]>([]);\n  const [clients, setClients] = useState<any[]>([]);\n  const [services, setServices] = useState<any[]>([]);\n  const [projects, setProjects] = useState<any[]>([]);\n  const [downloading, setDownloading] = useState<Record<string, boolean>>({});\n  const [previewInvoice, setPreviewInvoice] = useState<any | null>(null);\n  const [previewLoading, setPreviewLoading] = useState(false);\n\n  useEffect(() => {\n    let mounted = true;\n    (async () => {\n      try {\n        const res = await fetch(\"/api/invoices\");\n        if (!res.ok) throw new Error(`Failed to fetch invoices: ${res.status}`);\n        const list = await res.json();\n        if (mounted) setInvoices(list as Invoice[]);\n      } catch (err) {\n        console.error(\"Failed to load invoices\", err);\n      }\n    })();\n    (async () => {\n      try {\n        const [cRes, sRes, pRes] = await Promise.all([\n          fetch(\"/api/clients\"),\n          fetch(\"/api/services\"),\n          fetch(\"/api/projects\"),\n        ]);\n        const [cJson, sJson, pJson] = await Promise.all([\n          cRes.json(),\n          sRes.json(),\n          pRes.json(),\n        ]);\n        if (mounted) {\n          setClients(cJson || []);\n          setServices(sJson || []);\n          setProjects(pJson || []);\n        }\n      } catch (e) {\n        console.error(\"Failed to load invoice helpers\", e);\n      }\n    })();\n    return () => {\n      mounted = false;\n    };\n  }, []);\n  const refresh = async () => {\n    try {\n      const res = await fetch(\"/api/invoices\");\n      if (!res.ok) throw new Error(\"Failed to fetch invoices\");\n      const list = await res.json();\n      setInvoices(list as Invoice[]);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const downloadInvoice = async (invoice: any) => {\n    // Open preview dialog instead of auto-saving\n    setPreviewInvoice(invoice);\n  };\n\n  const sanitizeFileName = (s: string) =>\n    String(s || \"invoice\")\n      .replace(/[^a-z0-9\\-\\_ ]/gi, \"\")\n      .trim()\n      .replace(/\\s+/g, \"-\")\n      .slice(0, 120);\n\n  const generatePdfAndSave = async (invoice: any) => {\n    const id = String(invoice._id ?? invoice.id ?? Date.now());\n    const clientName =\n      invoice.clientName ||\n      invoice.client ||\n      clients.find((c) => String(c.id ?? c._id) === String(invoice.clientId))\n        ?.name ||\n      \"Client\";\n    const namePart = sanitizeFileName(clientName);\n    const fileName = `Invoice-${namePart}-${id}.pdf`;\n\n    try {\n      setPreviewLoading(true);\n      setDownloading((prev) => ({ ...prev, [id]: true }));\n      const pdfContent = renderToString(\n        <InvoicePDF\n          invoice={invoice}\n          client={clients.find(\n            (c) => String(c.id ?? c._id) === String(invoice.clientId)\n          )}\n        />\n      );\n      const doc = new jsPDF();\n      await doc.html(pdfContent, {\n        callback: function (doc) {\n          doc.save(fileName);\n        },\n        x: 10,\n        y: 10,\n        width: 180,\n        windowWidth: 800,\n      });\n    } catch (e) {\n      console.error(\"Failed to generate PDF\", e);\n    } finally {\n      setPreviewLoading(false);\n      setDownloading((prev) => {\n        const next = { ...prev };\n        delete next[id];\n        return next;\n      });\n      setPreviewInvoice(null);\n    }\n  };\n\n  return (\n    <div className=\"space-y-8 font-headline\">\n      <header className=\"flex items-center justify-between gap-4\">\n        <div>\n          <h1 className=\"text-5xl font-black tracking-tighter\">INVOICING</h1>\n          <p className=\"text-muted-foreground text-lg\">\n            Manage and track all client invoices.\n          </p>\n        </div>\n        <AddInvoiceDialog\n          clients={clients}\n          services={services}\n          projects={projects}\n          onCreated={refresh}\n        />\n      </header>\n\n      <div className=\"border-2 border-black\">\n        <Table>\n          <TableHeader>\n            <TableRow className=\"border-b-2 border-black\">\n              <TableHead className=\"text-base font-bold\">Invoice No</TableHead>\n              <TableHead className=\"text-base font-bold\">Client</TableHead>\n              <TableHead className=\"text-base font-bold\">\n                Project / Title\n              </TableHead>\n              <TableHead className=\"text-base font-bold\">Amount</TableHead>\n              <TableHead className=\"text-base font-bold\">Paid</TableHead>\n              <TableHead className=\"text-base font-bold\">Due Date</TableHead>\n              <TableHead className=\"text-right text-base font-bold\">\n                Status\n              </TableHead>\n              <TableHead className=\"text-right text-base font-bold\">\n                Actions\n              </TableHead>\n            </TableRow>\n          </TableHeader>\n          <TableBody>\n            {invoices.map((invoice) => (\n              <TableRow\n                key={invoice._id ?? invoice.id ?? invoice.invoiceNo}\n                className=\"border-b-2 border-black last:border-b-0\"\n              >\n                <TableCell className=\"font-bold text-base py-4\">\n                  {invoice.invoiceNo ?? invoice.id ?? invoice._id}\n                </TableCell>\n                <TableCell className=\"text-base py-4\">\n                  {invoice.clientName ||\n                    invoice.client ||\n                    clients.find(\n                      (c) => String(c.id ?? c._id) === String(invoice.clientId)\n                    )?.name ||\n                    \"-\"}\n                </TableCell>\n                <TableCell className=\"text-base py-4\">\n                  {invoice.title ?? invoice.projectTitle ?? \"-\"}\n                </TableCell>\n                <TableCell className=\"text-base py-4\">\n                  ‚Çπ{(invoice.amount ?? 0).toLocaleString()}\n                </TableCell>\n                <TableCell className=\"text-base py-4\">\n                  ‚Çπ{(invoice.paidAmount ?? 0).toLocaleString()}\n                </TableCell>\n                <TableCell className=\"text-base py-4\">\n                  {invoice.dueDate\n                    ? new Date(invoice.dueDate).toLocaleDateString()\n                    : \"\"}\n                </TableCell>\n                <TableCell className=\"text-right py-4\">\n                  <span\n                    className={cn(\n                      \"text-xl font-black tracking-widest p-2\",\n                      invoice.status === \"PAID\" &&\n                        \"bg-success text-success-foreground\",\n                      invoice.status === \"DUE\" &&\n                        \"bg-destructive text-destructive-foreground\",\n                      invoice.status === \"OVERDUE\" &&\n                        \"bg-accent text-accent-foreground\"\n                    )}\n                  >\n                    {invoice.status}\n                  </span>\n                </TableCell>\n                <TableCell className=\"text-right py-4\">\n                  <div className=\"flex items-center justify-end gap-2\">\n                    <EditInvoiceDialog\n                      invoice={invoice}\n                      clients={clients}\n                      services={services}\n                      projects={projects}\n                      onUpdated={refresh}\n                    />\n                    <RecordPaymentDialog\n                      invoice={invoice}\n                      onRecorded={refresh}\n                    />\n                    <Button\n                      size=\"sm\"\n                      onClick={() => downloadInvoice(invoice)}\n                      disabled={\n                        !!downloading[\n                          String(\n                            invoice.invoiceNo ?? invoice._id ?? invoice.id ?? \"\"\n                          )\n                        ]\n                      }\n                    >\n                      {downloading[\n                        String(\n                          invoice.invoiceNo ?? invoice._id ?? invoice.id ?? \"\"\n                        )\n                      ]\n                        ? \"Downloading...\"\n                        : \"Download\"}\n                    </Button>\n                    <Button\n                      size=\"sm\"\n                      variant=\"destructive\"\n                      onClick={async () => {\n                        if (!confirm(\"Delete this invoice?\")) return;\n                        try {\n                          const res = await fetch(\n                            `/api/invoices/${invoice._id ?? invoice.id}`,\n                            { method: \"DELETE\" }\n                          );\n                          if (!res.ok) throw new Error(\"Delete failed\");\n                          await refresh();\n                        } catch (err) {\n                          console.error(err);\n                        }\n                      }}\n                    >\n                      Delete\n                    </Button>\n                    {invoice.status !== \"PAID\" && (\n                      <Button\n                        size=\"sm\"\n                        className=\"bg-green-600 text-white\"\n                        onClick={async () => {\n                          try {\n                            // optimistic update\n                            setInvoices((prev) =>\n                              prev.map((inv) =>\n                                inv._id === invoice._id ||\n                                inv.id === invoice.id ||\n                                inv.invoiceNo === invoice.invoiceNo\n                                  ? { ...inv, status: \"PAID\" }\n                                  : inv\n                              )\n                            );\n                            const res = await fetch(\n                              `/api/invoices/${\n                                invoice._id ?? invoice.id ?? invoice.invoiceNo\n                              }`,\n                              {\n                                method: \"PUT\",\n                                headers: { \"Content-Type\": \"application/json\" },\n                                body: JSON.stringify({ status: \"PAID\" }),\n                              }\n                            );\n                            if (!res.ok) throw new Error(\"Failed to mark paid\");\n                            await refresh();\n                          } catch (err) {\n                            console.error(\n                              \"Failed to mark invoice as paid\",\n                              err\n                            );\n                            await refresh();\n                          }\n                        }}\n                      >\n                        Mark received\n                      </Button>\n                    )}\n                  </div>\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      </div>\n      {/* Preview Dialog */}\n      <Dialog\n        open={!!previewInvoice}\n        onOpenChange={(open) => {\n          if (!open) setPreviewInvoice(null);\n        }}\n      >\n        <DialogContent className=\"max-w-4xl w-full\">\n          <DialogHeader>\n            <DialogTitle>Invoice Preview</DialogTitle>\n          </DialogHeader>\n          <div className=\"space-y-4 max-h-[70vh] overflow-auto border-t pt-4\">\n            {previewInvoice ? (\n              <div className=\"p-4 bg-white\">\n                <InvoicePDF\n                  invoice={previewInvoice}\n                  client={clients.find((c) => String(c.id ?? c._id) === String(previewInvoice.clientId))}\n                />\n              </div>\n            ) : (\n              <div className=\"p-4\">No preview available</div>\n            )}\n          </div>\n          <DialogFooter>\n            <div className=\"flex gap-2\">\n              <Button size=\"sm\" onClick={() => setPreviewInvoice(null)}>\n                Close\n              </Button>\n              <Button\n                size=\"sm\"\n                onClick={() => previewInvoice && generatePdfAndSave(previewInvoice)}\n                disabled={previewLoading}\n              >\n                {previewLoading ? \"Preparing...\" : \"Download PDF\"}\n              </Button>\n            </div>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","\"use client\";\n\nimport React from \"react\";\nimport {\n  Dialog,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from \"@/components/ui/dialog\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Form,\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n} from \"@/components/ui/form\";\nimport { useForm } from \"react-hook-form\";\nimport type { Client, Service } from \"@/lib/data\";\nimport { InvoicePDF } from \"./invoice-pdf\";\nimport jsPDF from \"jspdf\";\nimport { renderToString } from \"react-dom/server\";\n\nexport function AddInvoiceDialog({\n  clients,\n  services,\n  projects,\n  onCreated,\n}: {\n  clients: Client[];\n  services: Service[];\n  projects: any[];\n  onCreated?: () => void;\n}) {\n  const [open, setOpen] = React.useState(false);\n  const form = useForm({\n    defaultValues: {\n      clientId: \"\",\n      serviceId: \"\",\n      projectTitle: \"\",\n      title: \"\",\n      amount: 0,\n      dueDate: \"\",\n      invoiceNo: \"\",\n    },\n  });\n\n  const handleSave = async (values: any) => {\n    try {\n      const invoice = {\n        clientId: values.clientId || null,\n        clientName:\n          clients.find((c) => String(c.id ?? c._id) === String(values.clientId))\n            ?.name || \"\",\n        serviceId: values.serviceId || null,\n        invoiceNo: values.invoiceNo || undefined,\n        projectTitle: values.projectTitle || values.title || \"\",\n        title: values.title || values.projectTitle || \"Invoice\",\n        amount: Number(values.amount || 0),\n        dueDate: values.dueDate || \"\",\n        status: \"DUE\",\n        createdAt: new Date(),\n      };\n      const res = await fetch(\"/api/invoices\", {\n        method: \"POST\",\n        body: JSON.stringify(invoice),\n        headers: { \"Content-Type\": \"application/json\" },\n      });\n      if (!res.ok) throw new Error(\"Failed to create invoice\");\n      const created = await res.json();\n\n      // generate PDF and download (A4, full page, use embedded fonts when possible)\n      const doc = new jsPDF({\n        unit: \"mm\",\n        format: \"a4\",\n        orientation: \"portrait\",\n      });\n      try {\n        const { loadNotoSansForJsPDF } = await import(\"@/lib/pdf-fonts\");\n        const family = await loadNotoSansForJsPDF(doc, \"NotoSans\");\n        if (family) {\n          try {\n            doc.setFont(family);\n          } catch (e) {}\n        }\n\n        const pdfBody = renderToString(\n          <InvoicePDF invoice={{ ...created, ...invoice }} />\n        );\n        const notoHref =\n          \"https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;700&display=swap\";\n\n        // attempt to inline local font as base64 for robust PDF rendering\n        let styledHtml: string;\n        try {\n          const fres = await fetch(\"/fonts/NotoSans-Regular.ttf\");\n          if (fres && fres.ok) {\n            const arrayBuffer = await fres.arrayBuffer();\n            const bytes = new Uint8Array(arrayBuffer);\n            let binary = \"\";\n            const chunkSize = 0x8000;\n            for (let i = 0; i < bytes.length; i += chunkSize) {\n              binary += String.fromCharCode.apply(\n                null,\n                Array.from(bytes.slice(i, i + chunkSize)) as any\n              );\n            }\n            const base64 =\n              typeof btoa !== \"undefined\"\n                ? btoa(binary)\n                : Buffer.from(binary, \"binary\").toString(\"base64\");\n            const fontDataFace = `\\n<style>\\n@font-face { font-family: 'Noto Sans Local'; src: url('data:font/truetype;base64,${base64}') format('truetype'); font-weight: 400; font-style: normal; font-display: swap; }\\n</style>\\n`;\n            styledHtml =\n              `${fontDataFace}<link href=\"${notoHref}\" rel=\"stylesheet\">` +\n              `<div style=\"width:100%;height:100%;margin:0;padding:0;box-sizing:border-box;\">${pdfBody}</div>`;\n          } else {\n            const localFontFace = `\\n<style>\\n@font-face { font-family: 'Noto Sans Local'; src: url('/fonts/NotoSans-Regular.ttf') format('truetype'); font-weight: 400; font-style: normal; font-display: swap; }\\n@font-face { font-family: 'Noto Sans Local'; src: url('/fonts/NotoSans-Bold.ttf') format('truetype'); font-weight: 700; font-style: normal; font-display: swap; }\\n</style>\\n`;\n            styledHtml = `${localFontFace}<link href=\"${notoHref}\" rel=\"stylesheet\"><div style=\"width:100%;height:100%;margin:0;padding:0;box-sizing:border-box;font-family:'Noto Sans Local','Noto Sans',${\n              family ? family : \"sans-serif\"\n            };\">${pdfBody}</div>`;\n          }\n        } catch (e) {\n          styledHtml = `<link href=\"${notoHref}\" rel=\"stylesheet\"><div style=\"width:100%;height:100%;margin:0;padding:0;box-sizing:border-box;font-family:'Noto Sans',${\n            family ? family : \"sans-serif\"\n          };\">${pdfBody}</div>`;\n        }\n\n        const finalHtml = styledHtml.replace(/‚Çπ/g, \"Rs.\");\n        const pageWidth = doc.internal.pageSize.getWidth();\n        const pageHeight = doc.internal.pageSize.getHeight();\n        doc.html(finalHtml, {\n          callback: function (doc) {\n            // Build filename: InvoiceID_ClientName.pdf (sanitize client name)\n            const invoiceId = created.id ?? created.invoiceNo ?? created._id;\n            const clientNameRaw =\n              created.clientName || invoice.clientName || \"\";\n            const sanitize = (s: string) =>\n              s.replace(/[\\\\/:*?\"<>|\\s]+/g, \"_\").replace(/^_+|_+$/g, \"\");\n            const clientSafe = sanitize(String(clientNameRaw || \"Client\"));\n            const filename = `${invoiceId}_${clientSafe}.pdf`;\n            doc.save(filename);\n          },\n          x: 0,\n          y: 0,\n          width: pageWidth,\n          windowWidth: 1200,\n        });\n      } catch (e) {\n        // fallback simple render\n        const pdfContent = renderToString(\n          <InvoicePDF invoice={{ ...created, ...invoice }} />\n        );\n        const finalPdfContent = String(pdfContent).replace(/‚Çπ/g, \"Rs.\");\n        const pageWidth = doc.internal.pageSize.getWidth();\n        doc.html(finalPdfContent, {\n          callback: function (doc) {\n            const invoiceId = created.id ?? created.invoiceNo ?? created._id;\n            const clientNameRaw =\n              created.clientName || invoice.clientName || \"\";\n            const sanitize = (s: string) =>\n              s.replace(/[\\\\/:*?\"<>|\\s]+/g, \"_\").replace(/^_+|_+$/g, \"\");\n            const clientSafe = sanitize(String(clientNameRaw || \"Client\"));\n            const filename = `${invoiceId}_${clientSafe}.pdf`;\n            doc.save(filename);\n          },\n          x: 0,\n          y: 0,\n          width: pageWidth,\n          windowWidth: 1200,\n        });\n      }\n\n      setOpen(false);\n      form.reset();\n      if (onCreated) onCreated();\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <DialogTrigger asChild>\n        <Button size=\"lg\" onClick={() => setOpen(true)}>\n          New Invoice\n        </Button>\n      </DialogTrigger>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Create Invoice</DialogTitle>\n        </DialogHeader>\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(handleSave)} className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <FormField\n                name=\"invoiceNo\"\n                control={form.control}\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Invoice No</FormLabel>\n                    <FormControl>\n                      <Input {...field} placeholder=\"Optional - INV-00001\" />\n                    </FormControl>\n                  </FormItem>\n                )}\n              />\n              <FormField\n                name=\"clientId\"\n                control={form.control}\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Client</FormLabel>\n                    <FormControl>\n                      <select {...field} className=\"w-full border p-2\">\n                        <option value=\"\">Select client</option>\n                        {clients.map((c) => (\n                          <option\n                            key={String(c.id ?? c._id)}\n                            value={String(c.id ?? c._id)}\n                          >\n                            {c.name}\n                          </option>\n                        ))}\n                      </select>\n                    </FormControl>\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                name=\"projectTitle\"\n                control={form.control}\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Project Title</FormLabel>\n                    <FormControl>\n                      <Input {...field} />\n                    </FormControl>\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                name=\"title\"\n                control={form.control}\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Invoice Title</FormLabel>\n                    <FormControl>\n                      <Input {...field} />\n                    </FormControl>\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                name=\"amount\"\n                control={form.control}\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Amount (‚Çπ)</FormLabel>\n                    <FormControl>\n                      <Input type=\"number\" {...field} />\n                    </FormControl>\n                  </FormItem>\n                )}\n              />\n            </div>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <FormField\n                name=\"dueDate\"\n                control={form.control}\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Due Date</FormLabel>\n                    <FormControl>\n                      <Input type=\"date\" {...field} />\n                    </FormControl>\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                name=\"serviceId\"\n                control={form.control}\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Service</FormLabel>\n                    <FormControl>\n                      <select {...field} className=\"w-full border p-2\">\n                        <option value=\"\">Select service</option>\n                        {services.map((s) => (\n                          <option\n                            key={String(s.id ?? s._id)}\n                            value={String(s.id ?? s._id)}\n                          >\n                            {s.name}\n                          </option>\n                        ))}\n                      </select>\n                    </FormControl>\n                  </FormItem>\n                )}\n              />\n            </div>\n\n            <DialogFooter>\n              <Button type=\"submit\" size=\"lg\" className=\"w-full\">\n                Create & Download PDF\n              </Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import src from \"IMAGE\";\nexport default { src, width: 1200, height: 1200, blurWidth: 8, blurHeight: 8, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAi0lEQVR42o2PMQuCYBCGHxM/P4vS9EsbhBpcjISmCPoxbQmtNbQV9EeCln6mJ4KLgh73wnPcM9zB2LKkQ0Uo8a0+4RhxehV83gU34UNHKDOu/zNfyU+47Ag7n+yRc7nnPIX37WLusEg0SZ3tjE06JRVex5pY22g8G68+zrisIhcTOATLZjZqghr8rgJ1EA4R//85uAAAAABJRU5ErkJggg==\"};\n","import React, { useEffect, useState } from \"react\";\nimport type { Client } from \"@/lib/data\";\nimport logo from \"@/assets/images/logo-transparent.png\";\nimport signImg from \"@/assets/images/sign.png\";\nimport { formatCurrency } from \"@/lib/currency\";\n\nfunction formatDate(value: any) {\n  try {\n    const d = new Date(value);\n    return d.toLocaleDateString(\"en-IN\", {\n      day: \"numeric\",\n      month: \"short\",\n      year: \"numeric\",\n    });\n  } catch (e) {\n    return String(value || \"\");\n  }\n}\n\nfunction getItems(invoice: any) {\n  if (!invoice) return [];\n  if (Array.isArray(invoice.items) && invoice.items.length)\n    return invoice.items;\n  if (Array.isArray(invoice.lineItems) && invoice.lineItems.length)\n    return invoice.lineItems;\n  if (invoice.amount && !Array.isArray(invoice.items))\n    return [\n      {\n        description: invoice.title || invoice.projectTitle || \"Service\",\n        quantity: 1,\n        price: Number(invoice.amount),\n      },\n    ];\n  return [];\n}\n\nexport function InvoicePDF({\n  invoice,\n  client: initialClient,\n}: {\n  invoice: any;\n  client?: Client;\n}) {\n  const [client, setClient] = useState<Client | undefined>(initialClient);\n\n  useEffect(() => {\n    let mounted = true;\n    if (!client && invoice?.clientId) {\n      (async () => {\n        try {\n          const res = await fetch(`https://backend.pixelatenest.com/api/clients/${invoice.clientId}`);\n          if (!mounted) return;\n          if (res.ok) {\n            const data = await res.json();\n            setClient(data as Client);\n          }\n        } catch (e) {\n          // ignore fetch errors for PDF render\n        }\n      })();\n    }\n    return () => {\n      mounted = false;\n    };\n  }, [invoice, client]);\n\n  const items = getItems(invoice);\n  const subtotal = items.reduce((s: number, it: any) => {\n    const qty = Number(it?.quantity ?? it?.qty ?? 1);\n    const price = Number(it?.price ?? it?.unitPrice ?? it?.amount ?? 0);\n    return s + qty * price;\n  }, 0);\n  const discount = Number(invoice?.discount ?? 0) || 0;\n  const tax = Number(invoice?.tax ?? 0) || 0;\n  const total = subtotal - discount + tax;\n\n  const paidAmount = Number(invoice?.paidAmount ?? invoice?.paid ?? 0) || 0;\n  let status = \"DUE\";\n  let statusColor = \"#e65200\";\n  if (paidAmount >= total && total > 0) {\n    status = \"PAID\";\n    statusColor = \"#16a34a\"; // green\n  } else if (paidAmount > 0 && paidAmount < total) {\n    status = \"PARTIAL\";\n    statusColor = \"#f59e0b\"; // amber\n  }\n\n  const effectiveClientName =\n    client?.name || invoice?.clientName || invoice?.client || \"Client\";\n\n  return (\n    <div\n      style={{\n        fontFamily: \"'Inter', 'Segoe UI', sans-serif\",\n        width: \"100%\",\n        padding: \"15mm 20mm\",\n        color: \"#333\",\n        background: \"#fff\",\n        boxSizing: \"border-box\",\n        maxWidth: \"210mm\",\n        minHeight: \"297mm\",\n        margin: \"0 auto\",\n      }}\n    >\n      {/* Header Section */}\n      <div\n        style={{\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          alignItems: \"flex-start\",\n          marginBottom: 20,\n        }}\n      >\n        <div style={{ display: \"flex\", alignItems: \"center\", gap: 12 }}>\n          <div\n            style={{\n              width: 60,\n              height: 60,\n              background: \"#e65200\",\n              borderRadius: 8,\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"center\",\n            }}\n          >\n            <img\n              src={typeof logo === \"string\" ? logo : (logo as any).src}\n              alt=\"Logo\"\n              style={{\n                width: 45,\n                height: 45,\n                objectFit: \"contain\",\n                filter: \"brightness(0) invert(1)\",\n              }}\n            />\n          </div>\n          <div>\n            <div style={{ fontSize: 22, fontWeight: 800, color: \"#e65200\" }}>\n              Pixelate Nest\n            </div>\n            <div style={{ fontSize: 12, color: \"#666\", marginTop: 2 }}>\n              Kalahanu Tech Studios\n            </div>\n          </div>\n        </div>\n\n        <div style={{ textAlign: \"right\" }}>\n          <div\n            style={{\n              fontSize: 26,\n              fontWeight: 800,\n              color: \"#e65200\",\n            }}\n          >\n            TAX INVOICE\n          </div>\n          <div style={{ marginTop: 8, display: \"flex\", justifyContent: \"flex-end\", alignItems: \"center\", gap: 12 }}>\n            <div style={{ display: \"inline-block\", padding: \"6px 10px\", borderRadius: 8, background: statusColor, color: \"#fff\", fontWeight: 800, fontSize: 12 }}>\n              {status}\n            </div>\n            <div style={{ fontSize: 11, color: \"#666\", marginTop: 0, textAlign: \"right\" }}>\n              <div>\n                <strong>Paid:</strong> {formatCurrency(paidAmount)}\n              </div>\n              <div>\n                <strong>Total:</strong> {formatCurrency(total)}\n              </div>\n            </div>\n          </div>\n          <div style={{ fontSize: 11, color: \"#666\", marginTop: 4 }}>\n            <div>\n              <strong>Invoice #:</strong>{\" \"}\n              {invoice?.id ?? invoice?.invoiceNo ?? invoice?._id}\n            </div>\n            <div>\n              <strong>Date:</strong>{\" \"}\n              {formatDate(invoice?.createdAt ?? Date.now())}\n            </div>\n            <div>\n              <strong>Due:</strong>{\" \"}\n              {invoice?.dueDate ? formatDate(invoice.dueDate) : \"On receipt\"}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Company and Client Info */}\n      <div\n        style={{\n          display: \"grid\",\n          gridTemplateColumns: \"1fr 1fr\",\n          gap: 30,\n          marginBottom: 20,\n        }}\n      >\n        <div>\n          <div\n            style={{\n              fontSize: 11,\n              fontWeight: 600,\n              color: \"#e65200\",\n              textTransform: \"uppercase\",\n              marginBottom: 6,\n            }}\n          >\n            From\n          </div>\n          <div style={{ fontSize: 14, fontWeight: 700, color: \"#333\" }}>\n            Pixelate Nest\n          </div>\n          <div style={{ fontSize: 11, color: \"#666\", marginTop: 3 }}>\n            GST: 10AADCK1491R2ZB\n          </div>\n          <div style={{ fontSize: 11, color: \"#666\", marginTop: 3 }}>\n            Kala Bhawan, Akharaghat Road\n          </div>\n          <div style={{ fontSize: 11, color: \"#666\", marginTop: 3 }}>\n            Muzaffarpur, Bihar - 842001\n          </div>\n        </div>\n\n        <div>\n          <div\n            style={{\n              fontSize: 11,\n              fontWeight: 600,\n              color: \"#e65200\",\n              textTransform: \"uppercase\",\n              marginBottom: 6,\n            }}\n          >\n            Bill To\n          </div>\n          <div\n            style={{\n              fontSize: 14,\n              fontWeight: 700,\n              color: \"#333\",\n              marginBottom: 4,\n            }}\n          >\n            {effectiveClientName}\n          </div>\n          <div style={{ fontSize: 11, color: \"#666\", marginBottom: 3 }}>\n            {client?.address || invoice?.clientAddress || \"\"}\n          </div>\n          <div style={{ fontSize: 11, color: \"#666\" }}>\n            {client?.email || invoice?.clientEmail || \"\"}\n          </div>\n          <div style={{ fontSize: 11, color: \"#666\" }}>\n            {client?.phone || invoice?.clientPhone || \"\"}\n          </div>\n        </div>\n      </div>\n\n      {/* Items Table */}\n      <div style={{ marginBottom: 20 }}>\n        <table\n          style={{\n            width: \"100%\",\n            borderCollapse: \"collapse\",\n            fontSize: 12,\n          }}\n        >\n          <thead>\n            <tr\n              style={{\n                background: \"#e65200\",\n                color: \"#fff\",\n              }}\n            >\n              <th\n                style={{\n                  padding: \"10px 12px\",\n                  textAlign: \"left\",\n                  fontWeight: 600,\n                  fontSize: 11,\n                }}\n              >\n                #\n              </th>\n              <th\n                style={{\n                  padding: \"10px 12px\",\n                  textAlign: \"left\",\n                  fontWeight: 600,\n                  fontSize: 11,\n                }}\n              >\n                Description\n              </th>\n              <th\n                style={{\n                  padding: \"10px 12px\",\n                  textAlign: \"right\",\n                  fontWeight: 600,\n                  fontSize: 11,\n                }}\n              >\n                Qty\n              </th>\n              <th\n                style={{\n                  padding: \"10px 12px\",\n                  textAlign: \"right\",\n                  fontWeight: 600,\n                  fontSize: 11,\n                }}\n              >\n                Unit Price\n              </th>\n              <th\n                style={{\n                  padding: \"10px 12px\",\n                  textAlign: \"right\",\n                  fontWeight: 600,\n                  fontSize: 11,\n                }}\n              >\n                Amount\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            {items.slice(0, 8).map((it: any, index: number) => {\n              const qty = Number(it?.quantity ?? it?.qty ?? 1);\n              const unit = Number(\n                it?.price ?? it?.unitPrice ?? it?.amount ?? 0\n              );\n              const amt = qty * unit;\n\n              return (\n                <tr\n                  key={index}\n                  style={{\n                    borderBottom: \"1px solid #eee\",\n                  }}\n                >\n                  <td\n                    style={{\n                      padding: \"10px 12px\",\n                      fontWeight: 500,\n                      color: \"#666\",\n                    }}\n                  >\n                    {index + 1}\n                  </td>\n                  <td\n                    style={{\n                      padding: \"10px 12px\",\n                      fontWeight: 500,\n                    }}\n                  >\n                    {it?.description || it?.name || \"Service\"}\n                  </td>\n                  <td\n                    style={{\n                      padding: \"10px 12px\",\n                      textAlign: \"right\",\n                      fontWeight: 500,\n                      color: \"#666\",\n                    }}\n                  >\n                    {qty}\n                  </td>\n                  <td\n                    style={{\n                      padding: \"10px 12px\",\n                      textAlign: \"right\",\n                      fontWeight: 500,\n                      color: \"#666\",\n                    }}\n                  >\n                    {formatCurrency(unit)}\n                  </td>\n                  <td\n                    style={{\n                      padding: \"10px 12px\",\n                      textAlign: \"right\",\n                      fontWeight: 600,\n                      color: \"#333\",\n                    }}\n                  >\n                    {formatCurrency(amt)}\n                  </td>\n                </tr>\n              );\n            })}\n          </tbody>\n        </table>\n      </div>\n\n      {/* Summary Section */}\n      <div\n        style={{\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          gap: 40,\n          marginBottom: 25,\n        }}\n      >\n        <div style={{ flex: 1 }}>\n          <div\n            style={{\n              fontSize: 11,\n              fontWeight: 600,\n              color: \"#e65200\",\n              textTransform: \"uppercase\",\n              marginBottom: 10,\n            }}\n          >\n            Notes\n          </div>\n          <div style={{ fontSize: 11, color: \"#666\", lineHeight: 1.5 }}>\n            {invoice?.notes ||\n              \"Payment due within 30 days of invoice date. Please include invoice number with payment.\"}\n          </div>\n        </div>\n\n        <div\n          style={{\n            width: 280,\n            padding: 15,\n            border: \"1px solid #eee\",\n          }}\n        >\n          <div\n            style={{\n              display: \"flex\",\n              justifyContent: \"space-between\",\n              marginBottom: 8,\n            }}\n          >\n            <span style={{ fontSize: 12, color: \"#666\" }}>Subtotal</span>\n            <span style={{ fontSize: 12, fontWeight: 600, color: \"#333\" }}>\n              {formatCurrency(subtotal)}\n            </span>\n          </div>\n\n          {discount > 0 && (\n            <div\n              style={{\n                display: \"flex\",\n                justifyContent: \"space-between\",\n                marginBottom: 8,\n              }}\n            >\n              <span style={{ fontSize: 12, color: \"#666\" }}>Discount</span>\n              <span style={{ fontSize: 12, fontWeight: 600, color: \"#333\" }}>\n                - {formatCurrency(discount)}\n              </span>\n            </div>\n          )}\n\n          {tax > 0 && (\n            <div\n              style={{\n                display: \"flex\",\n                justifyContent: \"space-between\",\n                marginBottom: 12,\n              }}\n            >\n              <span style={{ fontSize: 12, color: \"#666\" }}>Tax</span>\n              <span style={{ fontSize: 12, fontWeight: 600, color: \"#333\" }}>\n                {formatCurrency(tax)}\n              </span>\n            </div>\n          )}\n\n          <div\n            style={{\n              paddingTop: 12,\n              borderTop: \"2px solid #e65200\",\n              display: \"flex\",\n              justifyContent: \"space-between\",\n              alignItems: \"center\",\n            }}\n          >\n            <span\n              style={{\n                fontSize: 14,\n                fontWeight: 700,\n                color: \"#e65200\",\n              }}\n            >\n              Total\n            </span>\n            <span\n              style={{\n                fontSize: 18,\n                fontWeight: 800,\n                color: \"#e65200\",\n              }}\n            >\n              {formatCurrency(total)}\n            </span>\n          </div>\n        </div>\n      </div>\n\n      {/* Footer */}\n      <div\n        style={{\n          display: \"grid\",\n          gridTemplateColumns: \"1fr 1fr 1fr\",\n          gap: 20,\n          marginBottom: 20,\n          paddingTop: 20,\n          borderTop: \"1px solid #eee\",\n        }}\n      >\n        <div>\n          <div\n            style={{\n              fontSize: 11,\n              fontWeight: 600,\n              color: \"#e65200\",\n              textTransform: \"uppercase\",\n              marginBottom: 8,\n            }}\n          >\n            Payment Info\n          </div>\n          <div style={{ fontSize: 11, color: \"#666\", lineHeight: 1.5 }}>\n            <div>Bank: HDFC BANK PVT LTD</div>\n            <div>A/C: 0000 1234 5678</div>\n            <div>Name: Kalahanu Tech Studios</div>\n            <div>IFSC: HDFC0001234</div>\n          </div>\n        </div>\n\n        <div style={{ textAlign: \"center\",alignItems: \"center\" }}>\n          <img\n            src={typeof signImg === \"string\" ? signImg : (signImg as any).src}\n            alt=\"Signature\"\n            style={{\n              width: \"180px\",\n              height: \"100px\",\n              objectFit: \"contain\",\n            }}\n          />\n          <div\n            style={{\n              height: 1,\n              width: \"100%\",\n              backgroundColor: \"#e65200\",\n              margin: \"0 auto 6px\",\n              opacity: 0.5,\n            }}\n          />\n          <div style={{ fontSize: 12, fontWeight: 700, color: \"#333\" }}>\n            Labh Chandra Bothra\n          </div>\n          <div style={{ fontSize: 11, color: \"#666\" }}>Co-Founder</div>\n        </div>\n\n        <div style={{ textAlign: \"right\" }}>\n          <div\n            style={{\n              fontSize: 11,\n              fontWeight: 600,\n              color: \"#e65200\",\n              textTransform: \"uppercase\",\n              marginBottom: 8,\n            }}\n          >\n            Contact\n          </div>\n          <div style={{ fontSize: 11, color: \"#666\", lineHeight: 1.5 }}>\n            <div>üìß support@pixelatenest.com</div>\n            <div>üìû +91 9234112345</div>\n            <div>üåê pixelatenest.com</div>\n          </div>\n        </div>\n      </div>\n\n      {/* Terms */}\n      <div\n        style={{\n          fontSize: 10,\n          color: \"#666\",\n          textAlign: \"center\",\n          paddingTop: 15,\n          borderTop: \"1px solid #eee\",\n        }}\n      >\n        This invoice is computer generated and does not require a signature. All\n        goods and services remain the property of Pixelate Nest until paid in\n        full.\n      </div>\n    </div>\n  );\n}\n","\"use client\";\n\nimport React from 'react';\nimport { Dialog, DialogTrigger, DialogContent, DialogHeader, DialogTitle, DialogFooter } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Form, FormControl, FormField, FormItem, FormLabel } from '@/components/ui/form';\nimport { useForm } from 'react-hook-form';\n\nexport function EditInvoiceDialog({ invoice, clients, services, projects, onUpdated }: { invoice: any; clients: any[]; services: any[]; projects: any[]; onUpdated?: () => void }) {\n  const [open, setOpen] = React.useState(false);\n  const form = useForm({ defaultValues: { clientId: '', projectTitle: '', title: '', amount: 0, dueDate: '', serviceId: '', status: '', invoiceNo: '' } });\n\n  React.useEffect(() => {\n    if (open && invoice) {\n      form.reset({\n        clientId: String(invoice.clientId ?? invoice.client ?? invoice.clientName ?? ''),\n        invoiceNo: invoice.invoiceNo ?? invoice.invoiceNo ?? '',\n        projectTitle: invoice.projectTitle ?? invoice.title ?? '',\n        title: invoice.title ?? invoice.projectTitle ?? '',\n        amount: invoice.amount ?? 0,\n        dueDate: invoice.dueDate ? new Date(invoice.dueDate).toISOString().slice(0, 10) : '',\n        serviceId: String(invoice.serviceId ?? ''),\n        status: invoice.status ?? 'DUE',\n      });\n    }\n  }, [open, invoice]);\n\n  const handleSave = async (values: any) => {\n    try {\n      const body = {\n        clientId: values.clientId || null,\n        clientName: clients.find(c => String(c.id ?? c._id) === String(values.clientId))?.name || '',\n        invoiceNo: values.invoiceNo || undefined,\n        projectTitle: values.projectTitle || values.title || '',\n        title: values.title || values.projectTitle || 'Invoice',\n        amount: Number(values.amount || 0),\n        dueDate: values.dueDate || '',\n        serviceId: values.serviceId || null,\n        status: values.status || 'DUE',\n      };\n\n      const res = await fetch(`/api/invoices/${invoice._id ?? invoice.id}`, { method: 'PUT', body: JSON.stringify(body), headers: { 'Content-Type': 'application/json' } });\n      if (!res.ok) throw new Error('Failed to update invoice');\n      setOpen(false);\n      if (onUpdated) onUpdated();\n    } catch (e) {\n      console.error('Failed to save invoice', e);\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <DialogTrigger asChild>\n        <Button size=\"sm\">Edit</Button>\n      </DialogTrigger>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Edit Invoice</DialogTitle>\n        </DialogHeader>\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(handleSave)} className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <FormField name=\"invoiceNo\" control={form.control} render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Invoice No</FormLabel>\n                  <FormControl>\n                    <Input {...field} placeholder=\"INV-00001\" />\n                  </FormControl>\n                </FormItem>\n              )} />\n              <FormField name=\"clientId\" control={form.control} render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Client</FormLabel>\n                  <FormControl>\n                    <select {...field} className=\"w-full border p-2\">\n                      <option value=\"\">Select client</option>\n                      {clients.map(c => <option key={String(c.id ?? c._id)} value={String(c.id ?? c._id)}>{c.name}</option>)}\n                    </select>\n                  </FormControl>\n                </FormItem>\n              )} />\n\n              <FormField name=\"projectTitle\" control={form.control} render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Project Title</FormLabel>\n                  <FormControl>\n                    <Input {...field} />\n                  </FormControl>\n                </FormItem>\n              )} />\n\n              <FormField name=\"title\" control={form.control} render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Invoice Title</FormLabel>\n                  <FormControl>\n                    <Input {...field} />\n                  </FormControl>\n                </FormItem>\n              )} />\n\n              <FormField name=\"amount\" control={form.control} render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Amount (‚Çπ)</FormLabel>\n                  <FormControl>\n                    <Input type=\"number\" {...field} />\n                  </FormControl>\n                </FormItem>\n              )} />\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <FormField name=\"dueDate\" control={form.control} render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Due Date</FormLabel>\n                  <FormControl>\n                    <Input type=\"date\" {...field} />\n                  </FormControl>\n                </FormItem>\n              )} />\n\n              <FormField name=\"serviceId\" control={form.control} render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Service</FormLabel>\n                  <FormControl>\n                    <select {...field} className=\"w-full border p-2\">\n                      <option value=\"\">Select service</option>\n                      {services.map(s => <option key={String(s.id ?? s._id)} value={String(s.id ?? s._id)}>{s.name}</option>)}\n                    </select>\n                  </FormControl>\n                </FormItem>\n              )} />\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <FormField name=\"status\" control={form.control} render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Status</FormLabel>\n                  <FormControl>\n                    <select {...field} className=\"w-full border p-2\">\n                      <option value=\"DUE\">DUE</option>\n                      <option value=\"PAID\">PAID</option>\n                      <option value=\"OVERDUE\">OVERDUE</option>\n                    </select>\n                  </FormControl>\n                </FormItem>\n              )} />\n            </div>\n\n            <DialogFooter>\n              <Button type=\"submit\" size=\"lg\" className=\"w-full\">Save</Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\nexport default EditInvoiceDialog;\n","\"use client\";\n\nimport React from 'react';\nimport { Dialog, DialogTrigger, DialogContent, DialogHeader, DialogTitle, DialogFooter } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Form, FormControl, FormField, FormItem, FormLabel } from '@/components/ui/form';\nimport { useForm } from 'react-hook-form';\n\nexport function RecordPaymentDialog({ invoice, onRecorded }: { invoice: any; onRecorded?: () => void }) {\n  const [open, setOpen] = React.useState(false);\n  const form = useForm({ defaultValues: { amount: '', note: '' } });\n\n  // If invoice is already paid, don't show the record payment UI\n  if (invoice?.status === 'PAID') {\n    return null;\n  }\n\n  React.useEffect(() => {\n    if (open) {\n      form.reset({ amount: '', note: '' });\n    }\n  }, [open]);\n\n  const handleSave = async (values: any) => {\n    try {\n      const amt = Number(values.amount || 0);\n      if (!amt || amt <= 0) {\n        alert('Enter a valid amount');\n        return;\n      }\n      const existingPayments = Array.isArray(invoice.payments) ? invoice.payments.slice() : [];\n      const newPayment = { amount: amt, note: values.note || '', date: new Date() };\n      const updatedPayments = [...existingPayments, newPayment];\n      const paidAmount = (Number(invoice.paidAmount || 0) + amt);\n      const status = paidAmount >= Number(invoice.amount || 0) ? 'PAID' : 'PARTIAL';\n\n      const res = await fetch(`/api/invoices/${invoice._id ?? invoice.id}`, {\n        method: 'PUT',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ payments: updatedPayments, paidAmount, status }),\n      });\n      if (!res.ok) throw new Error('Failed to record payment');\n      setOpen(false);\n      if (onRecorded) onRecorded();\n    } catch (e) {\n      console.error('Record payment failed', e);\n      alert('Failed to record payment');\n    }\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <DialogTrigger asChild>\n        <Button size=\"sm\">Record payment</Button>\n      </DialogTrigger>\n      <DialogContent>\n        <DialogHeader>\n          <DialogTitle>Record Payment</DialogTitle>\n        </DialogHeader>\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(handleSave)} className=\"space-y-4\">\n            <FormField name=\"amount\" control={form.control} render={({ field }) => (\n              <FormItem>\n                <FormLabel>Amount (‚Çπ)</FormLabel>\n                <FormControl>\n                  <Input {...field} type=\"number\" />\n                </FormControl>\n              </FormItem>\n            )} />\n\n            <FormField name=\"note\" control={form.control} render={({ field }) => (\n              <FormItem>\n                <FormLabel>Note</FormLabel>\n                <FormControl>\n                  <Input {...field} />\n                </FormControl>\n              </FormItem>\n            )} />\n\n            <DialogFooter>\n              <Button type=\"submit\" size=\"lg\" className=\"w-full\">Save Payment</Button>\n            </DialogFooter>\n          </form>\n        </Form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n\nexport default RecordPaymentDialog;\n"],"names":[],"mappings":"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"}