module.exports=[63420,a=>{"use strict";var b=a.i(57457),c=a.i(90782),d=a.i(59104);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-14 w-full rounded-none border-2 border-foreground bg-background px-4 py-3 text-lg ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e])},79156,a=>{"use strict";var b=a.i(57457),c=a.i(90782),d=a.i(63420),e=a.i(73647);function f(){let[a,f]=(0,c.useState)(null),[g,h]=(0,c.useState)(!1),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(null);async function q(){if(a){j(!0);try{let b=localStorage.getItem("auth_token")||"",c=await fetch("/api/me",{method:"PATCH",headers:{"Content-Type":"application/json",...b?{Authorization:"Bearer "+b}:{}},body:JSON.stringify({name:a.name,email:a.email,jobRole:a.jobRole,avatar:a.avatar||null})});if(c.ok){let a=await c.json();f(a),alert("Profile updated")}else{let a=await c.json();alert("Failed: "+(a.error||c.status))}}catch(a){console.error(a),alert("Save failed")}j(!1)}}async function r(){if(!m)return alert("Enter new password");l(!0);try{let a=localStorage.getItem("auth_token")||"",b=await fetch("/api/me",{method:"POST",headers:{"Content-Type":"application/json",...a?{Authorization:"Bearer "+a}:{}},body:JSON.stringify({action:"change-password",newPassword:m})});if(b.ok)alert("Password changed"),n("");else{let a=await b.json();alert("Failed: "+(a.error||b.status))}}catch(a){console.error(a),alert("Change failed")}l(!1)}return((0,c.useEffect)(()=>{(async()=>{h(!0);try{let a=localStorage.getItem("auth_token")||"",b=await fetch("/api/me",{headers:a?{Authorization:"Bearer "+a}:{}});if(b.ok){let a=await b.json();f(a)}}catch(a){console.error(a)}h(!1)})()},[]),g)?(0,b.jsx)("div",{children:"Loading..."}):a?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Profile"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm",children:"Full name"}),(0,b.jsx)(d.Input,{value:a.name||"",onChange:a=>f(b=>({...b,name:a.target.value}))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm",children:"Email"}),(0,b.jsx)(d.Input,{value:a.email||"",onChange:a=>f(b=>({...b,email:a.target.value}))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm",children:"Job role"}),(0,b.jsx)(d.Input,{value:a.jobRole||"",onChange:a=>f(b=>({...b,jobRole:a.target.value}))})]})]}),(0,b.jsx)("div",{children:(0,b.jsx)(e.Button,{onClick:q,disabled:i,children:i?"Saving...":"Save profile"})}),(0,b.jsx)("hr",{}),(0,b.jsx)("h2",{className:"text-xl font-bold",children:"Change password"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm",children:"Upload avatar"}),(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:async a=>{let b=a.currentTarget.files&&a.currentTarget.files[0];if(!b)return;let c=new FileReader;c.onload=()=>{let a=c.result;a&&(p(a),f(b=>({...b,avatar:a})))},c.readAsDataURL(b)}}),o||a.avatar?(0,b.jsx)("img",{src:o||a.avatar,alt:"avatar",className:"w-24 h-24 rounded-md mt-2 object-cover"}):null]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm",children:"New password (enter only new password)"}),(0,b.jsx)(d.Input,{type:"password",value:m,onChange:a=>n(a.target.value)})]})]}),(0,b.jsx)("div",{children:(0,b.jsx)(e.Button,{variant:"secondary",onClick:r,disabled:k,children:k?"Updating...":"Change password"})})]}):(0,b.jsx)("div",{children:"No profile loaded"})}a.s(["default",()=>f])}];

//# sourceMappingURL=Desktop_Projects_final-pixelate_dashboard_src_36a033c3._.js.map