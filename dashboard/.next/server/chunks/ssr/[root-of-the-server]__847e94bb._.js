module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},71318,(a,b,c)=>{"use strict";b.exports=a.r(9161).vendored.contexts.AppRouterContext},58313,(a,b,c)=>{"use strict";b.exports=a.r(9161).vendored.contexts.HooksClientContext},71736,(a,b,c)=>{"use strict";b.exports=a.r(9161).vendored.contexts.ServerInsertedHtml},15404,a=>{"use strict";var b=a.i(57457),c=a.i(90782),d=a.i(59104);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-none border-2 bg-card text-card-foreground",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-4",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-4 pt-0",a),...c}));i.displayName="CardContent";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-4 pt-0",a),...c}));j.displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardFooter",()=>j,"CardHeader",()=>f,"CardTitle",()=>g])},29157,a=>{"use strict";var b=a.i(90782),c=a.i(24200),d=a.i(57457),e=Symbol.for("react.lazy"),f=b[" use ".trim().toString()];function g(a){var b;return null!=a&&"object"==typeof a&&"$$typeof"in a&&a.$$typeof===e&&"_payload"in a&&"object"==typeof(b=a._payload)&&null!==b&&"then"in b}function h(a){var e;let h,i=(e=a,(h=b.forwardRef((a,d)=>{let{children:e,...h}=a;if(g(e)&&"function"==typeof f&&(e=f(e._payload)),b.isValidElement(e)){var i;let a,f,g=(i=e,(f=(a=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?i.ref:(f=(a=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?i.props.ref:i.props.ref||i.ref),j=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(h,e.props);return e.type!==b.Fragment&&(j.ref=d?(0,c.composeRefs)(d,g):g),b.cloneElement(e,j)}return b.Children.count(e)>1?b.Children.only(null):null})).displayName=`${e}.SlotClone`,h),j=b.forwardRef((a,c)=>{let{children:e,...h}=a;g(e)&&"function"==typeof f&&(e=f(e._payload));let j=b.Children.toArray(e),l=j.find(k);if(l){let a=l.props.children,e=j.map(c=>c!==l?c:b.Children.count(a)>1?b.Children.only(null):b.isValidElement(a)?a.props.children:null);return(0,d.jsx)(i,{...h,ref:c,children:b.isValidElement(a)?b.cloneElement(a,void 0,e):null})}return(0,d.jsx)(i,{...h,ref:c,children:e})});return j.displayName=`${a}.Slot`,j}var i=h("Slot"),j=Symbol("radix.slottable");function k(a){return b.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===j}a.s(["Slot",()=>i,"createSlot",()=>h])},73647,a=>{"use strict";var b=a.i(57457),c=a.i(90782),d=a.i(29157),e=a.i(34924),f=a.i(59104);let g=(0,e.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-none text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/80 border-2 border-foreground",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80 border-2 border-foreground",outline:"border-2 border-foreground bg-background hover:bg-foreground hover:text-background",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 border-2 border-foreground",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 px-3",lg:"h-11 px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),h=c.forwardRef(({className:a,variant:c,size:e,asChild:h=!1,...i},j)=>{let k=h?d.Slot:"button";return(0,b.jsx)(k,{className:(0,f.cn)(g({variant:c,size:e,className:a})),ref:j,...i})});h.displayName="Button",a.s(["Button",()=>h,"buttonVariants",()=>g])},63420,a=>{"use strict";var b=a.i(57457),c=a.i(90782),d=a.i(59104);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-14 w-full rounded-none border-2 border-foreground bg-background px-4 py-3 text-lg ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e])},90537,a=>{"use strict";var b=a.i(57457),c=a.i(90782),d=a.i(757);let e=(0,c.createContext)(void 0),f=["/login"];a.s(["AuthProvider",0,({children:a})=>{let[g,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(!0),k=(0,d.useRouter)(),l=(0,d.usePathname)();return((0,c.useEffect)(()=>{let a=!0;return(async()=>{try{let b=sessionStorage.getItem("userId"),c=await fetch("/api/users"),d=await c.json();if(!a)return;if(b){let a=d.find(a=>(a.id??a._id)===(isNaN(Number(b))?b:Number(b)));a?h(a):(sessionStorage.removeItem("userId"),h(null))}else h(null)}catch(a){console.error("Could not access users or session storage.",a),h(null)}finally{a&&j(!1)}})(),()=>{a=!1}},[l]),(0,c.useEffect)(()=>{if(!i){let a=f.includes(l);g||a||k.push("/login")}},[i,g,l,k]),!i&&(g||f.includes(l)))?(0,b.jsx)(e.Provider,{value:{user:g,login:a=>(sessionStorage.setItem("userId",String(a)),(async()=>{try{let b=await fetch("/api/users"),c=(await b.json()).find(b=>{let c=b.id??b._id;return String(c)===String(a)});c&&h(c)}catch(a){}})(),!0),logout:()=>{h(null);try{sessionStorage.removeItem("userId")}catch(a){}try{localStorage.removeItem("auth_token")}catch(a){}try{k.replace("/login");try{k.refresh()}catch(a){}}catch(a){try{k.push("/login")}catch(a){}}},loading:i},children:a}):null},"useAuth",0,()=>{let a=(0,c.useContext)(e);if(void 0===a)throw Error("useAuth must be used within an AuthProvider");return a}])},35300,a=>{"use strict";var b=a.i(57457),c=a.i(90782),d=a.i(757),e=a.i(73647),f=a.i(15404),g=a.i(63420),h=a.i(90537);function i(){let a=(0,d.useRouter)(),{login:i}=(0,h.useAuth)(),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(!1);async function p(b){b.preventDefault(),o(!0);try{let b=await fetch("/api/auth/login",{method:"POST",body:JSON.stringify({email:j,password:l}),headers:{"Content-Type":"application/json"}}),c=await b.json();if(!b.ok)throw Error(c?.error||"Login failed");let{token:d,user:e}=c;d&&localStorage.setItem("auth_token",d),e&&(e.id||e._id)&&sessionStorage.setItem("userId",String(e.id??e._id)),i(e.id??e._id),a.replace("/dashboard")}catch(a){alert(a?.message||String(a))}finally{o(!1)}}return(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-background p-4 font-headline",children:(0,b.jsxs)(f.Card,{className:"w-full max-w-md border-4 border-black",children:[(0,b.jsxs)(f.CardHeader,{className:"text-center",children:[(0,b.jsx)(f.CardTitle,{className:"text-5xl font-black tracking-tighter",children:"PIXELATE NEST"}),(0,b.jsx)(f.CardDescription,{className:"text-lg font-bold text-muted-foreground",children:"AGENCY CRM LOGIN"})]}),(0,b.jsx)(f.CardContent,{children:(0,b.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"block text-sm font-medium",children:"Email"}),(0,b.jsx)(g.Input,{type:"email",value:j,onChange:a=>k(a.target.value),required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("label",{className:"block text-sm font-medium",children:"Password"}),(0,b.jsx)(g.Input,{type:"password",value:l,onChange:a=>m(a.target.value),required:!0})]}),(0,b.jsx)(e.Button,{type:"submit",className:"w-full",disabled:n,children:n?"Signing in...":"Sign in"})]})})]})})}function j(){return(0,b.jsx)(h.AuthProvider,{children:(0,b.jsx)(i,{})})}a.s(["default",()=>j])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__847e94bb._.js.map