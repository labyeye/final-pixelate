(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88383,e=>{"use strict";var a=e.i(34371),t=e.i(10913),i=e.i(2507);let r=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,i.cn)("rounded-none border-2 bg-card text-card-foreground",e),...t}));r.displayName="Card";let s=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-4",e),...t}));s.displayName="CardHeader";let l=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("h3",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let n=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("p",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",e),...t}));n.displayName="CardDescription";let d=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,i.cn)("p-4 pt-0",e),...t}));d.displayName="CardContent";let o=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)("div",{ref:r,className:(0,i.cn)("flex items-center p-4 pt-0",e),...t}));o.displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>d,"CardDescription",()=>n,"CardFooter",()=>o,"CardHeader",()=>s,"CardTitle",()=>l])},32473,e=>{"use strict";var a=e.i(34371),t=e.i(10913),i=e.i(2507);let r=t.forwardRef(({className:e,type:t,...r},s)=>(0,a.jsx)("input",{type:t,className:(0,i.cn)("flex h-14 w-full rounded-none border-2 border-foreground bg-background px-4 py-3 text-lg ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...r}));r.displayName="Input",e.s(["Input",()=>r])},4813,e=>{"use strict";var a=e.i(34371),t=e.i(10913),i=e.i(25009),r=e.i(88383),s=e.i(32473),l=e.i(63951);function n(){let[e,n]=(0,t.useState)([]),[d,o]=(0,t.useState)(null),{register:c,control:m,handleSubmit:f,reset:h,setValue:u,getValues:p}=(0,i.useForm)({defaultValues:{brandName:"",brandLogoBase64:"",entries:[]}}),{fields:x,append:g,remove:b,replace:j}=(0,i.useFieldArray)({control:m,name:"entries"});(0,t.useEffect)(()=>{let e=!0;return(async()=>{try{let a=await fetch("/api/reels");if(!a.ok)throw Error("Failed to fetch reels");let t=await a.json();e&&n(t||[])}catch(e){console.error(e)}})(),()=>{e=!1}},[]);let N=e=>e?new Promise((a,t)=>{let i=new FileReader;i.onload=()=>a(String(i.result)),i.onerror=t,i.readAsDataURL(e)}):Promise.resolve(""),v=async e=>{let a=e.target.files?.[0]??null;u("brandLogoBase64",await N(a))},y=async(e,a)=>{let t=a?await N(a):"",i=[...p().entries||[]];for(;i.length<=e;)i.push({thumbnailBase64:"",link:"",title:""});i[e]={...i[e]||{},thumbnailBase64:t},j(i)},C=async e=>{try{if(d){let a=await fetch(`/api/reels/${d}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok)throw Error("Update failed");let t=await a.json();n(e=>e.map(e=>String(e._id??e.id)===String(d)?t:e)),o(null),h()}else{let a=await fetch("/api/reels",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok)throw Error("Save failed");let t=await a.json();n(e=>[t,...e]),h()}}catch(e){console.error("Failed to save reel",e)}},w=async e=>{if(confirm("Delete this reel?"))try{if(!(await fetch(`/api/reels/${e}`,{method:"DELETE"})).ok)throw Error("Delete failed");n(a=>a.filter(a=>String(a._id??a.id)!==String(e)))}catch(e){console.error(e)}};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("header",{children:[(0,a.jsx)("h1",{className:"text-4xl font-black",children:"Reels Management"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Upload a brand logo and multiple reel thumbnails with links. These will appear on the Video Editing page."})]}),(0,a.jsxs)(r.Card,{children:[(0,a.jsxs)(r.CardHeader,{children:[(0,a.jsx)(r.CardTitle,{children:d?"Edit Reel":"Add Reel"}),(0,a.jsx)(r.CardDescription,{children:"Brand logo + list of thumbnails and links"})]}),(0,a.jsx)(r.CardContent,{children:(0,a.jsxs)("form",{onSubmit:f(C),className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Brand Name"}),(0,a.jsx)(s.Input,{...c("brandName")})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Brand Logo"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:v})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Thumbnails (reels)"}),(0,a.jsxs)("div",{className:"space-y-2",children:[x.map((e,t)=>(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2 items-center",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:async e=>await y(t,e.target.files?.[0]??null)}),(0,a.jsx)(s.Input,{...c(`entries.${t}.link`),placeholder:"Link"}),(0,a.jsx)(s.Input,{...c(`entries.${t}.title`),placeholder:"Title (optional)"}),(0,a.jsx)("div",{className:"col-span-3",children:(0,a.jsx)(l.Button,{variant:"destructive",onClick:()=>b(t),children:"Remove"})})]},e.id)),(0,a.jsx)(l.Button,{type:"button",onClick:()=>g({thumbnailBase64:"",link:"",title:""}),children:"Add thumbnail"})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(l.Button,{type:"submit",children:d?"Update":"Save"}),(0,a.jsx)(l.Button,{variant:"ghost",onClick:()=>{h(),o(null)},children:"Reset"})]})]})})]}),(0,a.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,a.jsx)("div",{className:"border p-4 rounded",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[e.brandLogoBase64?(0,a.jsx)("img",{src:e.brandLogoBase64,alt:e.brandName,style:{width:80,height:40,objectFit:"contain"}}):(0,a.jsx)("div",{className:"w-20 h-10 bg-gray-100"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-bold",children:e.brandName}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(e.entries||[]).length," thumbnails"]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(l.Button,{onClick:()=>{o(String(e._id??e.id)),h({brandName:e.brandName||"",brandLogoBase64:e.brandLogoBase64||"",entries:e.entries||[]})},children:"Edit"}),(0,a.jsx)(l.Button,{variant:"destructive",onClick:()=>w(String(e._id??e.id)),children:"Delete"})]})]})},String(e._id??e.id)))})]})}e.s(["default",()=>n])}]);