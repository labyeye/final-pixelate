(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88383,e=>{"use strict";var r=e.i(34371),t=e.i(10913),n=e.i(2507);let i=t.forwardRef(({className:e,...t},i)=>(0,r.jsx)("div",{ref:i,className:(0,n.cn)("rounded-none border-2 bg-card text-card-foreground",e),...t}));i.displayName="Card";let o=t.forwardRef(({className:e,...t},i)=>(0,r.jsx)("div",{ref:i,className:(0,n.cn)("flex flex-col space-y-1.5 p-4",e),...t}));o.displayName="CardHeader";let s=t.forwardRef(({className:e,...t},i)=>(0,r.jsx)("h3",{ref:i,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));s.displayName="CardTitle";let a=t.forwardRef(({className:e,...t},i)=>(0,r.jsx)("p",{ref:i,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));a.displayName="CardDescription";let l=t.forwardRef(({className:e,...t},i)=>(0,r.jsx)("div",{ref:i,className:(0,n.cn)("p-4 pt-0",e),...t}));l.displayName="CardContent";let d=t.forwardRef(({className:e,...t},i)=>(0,r.jsx)("div",{ref:i,className:(0,n.cn)("flex items-center p-4 pt-0",e),...t}));d.displayName="CardFooter",e.s(["Card",()=>i,"CardContent",()=>l,"CardDescription",()=>a,"CardFooter",()=>d,"CardHeader",()=>o,"CardTitle",()=>s])},7957,e=>{"use strict";var r=e.i(10913),t=e.i(25545),n=e.i(34371),i=Symbol.for("react.lazy"),o=r[" use ".trim().toString()];function s(e){var r;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===i&&"_payload"in e&&"object"==typeof(r=e._payload)&&null!==r&&"then"in r}function a(e){var i;let a,l=(i=e,(a=r.forwardRef((e,n)=>{let{children:i,...a}=e;if(s(i)&&"function"==typeof o&&(i=o(i._payload)),r.isValidElement(i)){var l;let e,o,s=(l=i,(o=(e=Object.getOwnPropertyDescriptor(l.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.ref:(o=(e=Object.getOwnPropertyDescriptor(l,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.props.ref:l.props.ref||l.ref),d=function(e,r){let t={...r};for(let n in r){let i=e[n],o=r[n];/^on[A-Z]/.test(n)?i&&o?t[n]=(...e)=>{let r=o(...e);return i(...e),r}:i&&(t[n]=i):"style"===n?t[n]={...i,...o}:"className"===n&&(t[n]=[i,o].filter(Boolean).join(" "))}return{...e,...t}}(a,i.props);return i.type!==r.Fragment&&(d.ref=n?(0,t.composeRefs)(n,s):s),r.cloneElement(i,d)}return r.Children.count(i)>1?r.Children.only(null):null})).displayName=`${i}.SlotClone`,a),d=r.forwardRef((e,t)=>{let{children:i,...a}=e;s(i)&&"function"==typeof o&&(i=o(i._payload));let d=r.Children.toArray(i),c=d.find(u);if(c){let e=c.props.children,i=d.map(t=>t!==c?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,n.jsx)(l,{...a,ref:t,children:r.isValidElement(e)?r.cloneElement(e,void 0,i):null})}return(0,n.jsx)(l,{...a,ref:t,children:i})});return d.displayName=`${e}.Slot`,d}var l=a("Slot"),d=Symbol("radix.slottable");function u(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===d}e.s(["Slot",()=>l,"createSlot",()=>a])},63951,e=>{"use strict";var r=e.i(34371),t=e.i(10913),n=e.i(7957),i=e.i(35727),o=e.i(2507);let s=(0,i.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-none text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/80 border-2 border-foreground",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/80 border-2 border-foreground",outline:"border-2 border-foreground bg-background hover:bg-foreground hover:text-background",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 border-2 border-foreground",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 px-3",lg:"h-11 px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),a=t.forwardRef(({className:e,variant:t,size:i,asChild:a=!1,...l},d)=>{let u=a?n.Slot:"button";return(0,r.jsx)(u,{className:(0,o.cn)(s({variant:t,size:i,className:e})),ref:d,...l})});a.displayName="Button",e.s(["Button",()=>a,"buttonVariants",()=>s])},32473,e=>{"use strict";var r=e.i(34371),t=e.i(10913),n=e.i(2507);let i=t.forwardRef(({className:e,type:t,...i},o)=>(0,r.jsx)("input",{type:t,className:(0,n.cn)("flex h-14 w-full rounded-none border-2 border-foreground bg-background px-4 py-3 text-lg ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:o,...i}));i.displayName="Input",e.s(["Input",()=>i])},17996,(e,r,t)=>{r.exports=e.r(62732)},43509,e=>{"use strict";var r=e.i(34371),t=e.i(10913),n=e.i(17996);let i=(0,t.createContext)(void 0),o=["/login"];e.s(["AuthProvider",0,({children:e})=>{let[s,a]=(0,t.useState)(null),[l,d]=(0,t.useState)(!0),u=(0,n.useRouter)(),c=(0,n.usePathname)();return((0,t.useEffect)(()=>{let e=!0;return(async()=>{try{let r=sessionStorage.getItem("userId"),t=await fetch("/api/users"),n=await t.json();if(!e)return;if(r){let e=n.find(e=>(e.id??e._id)===(isNaN(Number(r))?r:Number(r)));e?a(e):(sessionStorage.removeItem("userId"),a(null))}else a(null)}catch(e){console.error("Could not access users or session storage.",e),a(null)}finally{e&&d(!1)}})(),()=>{e=!1}},[c]),(0,t.useEffect)(()=>{if(!l){let e=o.includes(c);s||e||u.push("/login")}},[l,s,c,u]),!l&&(s||o.includes(c)))?(0,r.jsx)(i.Provider,{value:{user:s,login:e=>(sessionStorage.setItem("userId",String(e)),(async()=>{try{let r=await fetch("/api/users"),t=(await r.json()).find(r=>{let t=r.id??r._id;return String(t)===String(e)});t&&a(t)}catch(e){}})(),!0),logout:()=>{a(null);try{sessionStorage.removeItem("userId")}catch(e){}try{localStorage.removeItem("auth_token")}catch(e){}try{u.replace("/login");try{u.refresh()}catch(e){}}catch(e){try{u.push("/login")}catch(e){}}},loading:l},children:e}):null},"useAuth",0,()=>{let e=(0,t.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}])},60987,e=>{"use strict";var r=e.i(34371),t=e.i(10913),n=e.i(17996),i=e.i(63951),o=e.i(88383),s=e.i(32473),a=e.i(43509);function l(){let e=(0,n.useRouter)(),{login:l}=(0,a.useAuth)(),[d,u]=(0,t.useState)(""),[c,f]=(0,t.useState)(""),[g,p]=(0,t.useState)(!1);async function m(r){r.preventDefault(),p(!0);try{let r=await fetch("/api/auth/login",{method:"POST",body:JSON.stringify({email:d,password:c}),headers:{"Content-Type":"application/json"}}),t=await r.json();if(!r.ok)throw Error(t?.error||"Login failed");let{token:n,user:i}=t;n&&localStorage.setItem("auth_token",n),i&&(i.id||i._id)&&sessionStorage.setItem("userId",String(i.id??i._id)),l(i.id??i._id),e.replace("/dashboard")}catch(e){alert(e?.message||String(e))}finally{p(!1)}}return(0,r.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-background p-4 font-headline",children:(0,r.jsxs)(o.Card,{className:"w-full max-w-md border-4 border-black",children:[(0,r.jsxs)(o.CardHeader,{className:"text-center",children:[(0,r.jsx)(o.CardTitle,{className:"text-5xl font-black tracking-tighter",children:"PIXELATE NEST"}),(0,r.jsx)(o.CardDescription,{className:"text-lg font-bold text-muted-foreground",children:"AGENCY CRM LOGIN"})]}),(0,r.jsx)(o.CardContent,{children:(0,r.jsxs)("form",{onSubmit:m,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Email"}),(0,r.jsx)(s.Input,{type:"email",value:d,onChange:e=>u(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium",children:"Password"}),(0,r.jsx)(s.Input,{type:"password",value:c,onChange:e=>f(e.target.value),required:!0})]}),(0,r.jsx)(i.Button,{type:"submit",className:"w-full",disabled:g,children:g?"Signing in...":"Sign in"})]})})]})})}function d(){return(0,r.jsx)(a.AuthProvider,{children:(0,r.jsx)(l,{})})}e.s(["default",()=>d])}]);