(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88383,e=>{"use strict";var a=e.i(34371),t=e.i(10913),r=e.i(2507);let s=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,r.cn)("rounded-none border-2 bg-card text-card-foreground",e),...t}));s.displayName="Card";let l=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex flex-col space-y-1.5 p-4",e),...t}));l.displayName="CardHeader";let o=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("h3",{ref:s,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle";let i=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("p",{ref:s,className:(0,r.cn)("text-sm text-muted-foreground",e),...t}));i.displayName="CardDescription";let d=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,r.cn)("p-4 pt-0",e),...t}));d.displayName="CardContent";let n=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{ref:s,className:(0,r.cn)("flex items-center p-4 pt-0",e),...t}));n.displayName="CardFooter",e.s(["Card",()=>s,"CardContent",()=>d,"CardDescription",()=>i,"CardFooter",()=>n,"CardHeader",()=>l,"CardTitle",()=>o])},32473,e=>{"use strict";var a=e.i(34371),t=e.i(10913),r=e.i(2507);let s=t.forwardRef(({className:e,type:t,...s},l)=>(0,a.jsx)("input",{type:t,className:(0,r.cn)("flex h-14 w-full rounded-none border-2 border-foreground bg-background px-4 py-3 text-lg ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:l,...s}));s.displayName="Input",e.s(["Input",()=>s])},37863,e=>{"use strict";var a=e.i(34371),t=e.i(10913);e.i(30106);var r=e.i(7957),s=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,s)=>{let l=(0,r.createSlot)(`Primitive.${s}`),o=t.forwardRef((e,t)=>{let{asChild:r,...o}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(r?l:s,{...o,ref:t})});return o.displayName=`Primitive.${s}`,{...e,[s]:o}},{}),l=t.forwardRef((e,t)=>(0,a.jsx)(s.label,{...e,ref:t,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));l.displayName="Label";var o=e.i(35727),i=e.i(2507);let d=(0,o.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),n=t.forwardRef(({className:e,...t},r)=>(0,a.jsx)(l,{ref:r,className:(0,i.cn)(d(),e),...t}));n.displayName=l.displayName,e.s(["Label",()=>n],37863)},82485,e=>{"use strict";let a=(0,e.i(84674).default)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);e.s(["MoreVertical",()=>a],82485)},49133,e=>{"use strict";var a=e.i(34371),t=e.i(10913),r=e.i(7957),s=e.i(25009),l=e.i(2507),o=e.i(37863);let i=s.FormProvider,d=t.createContext({}),n=({...e})=>(0,a.jsx)(d.Provider,{value:{name:e.name},children:(0,a.jsx)(s.Controller,{...e})}),c=()=>{let e=t.useContext(d),a=t.useContext(m),{getFieldState:r,formState:l}=(0,s.useFormContext)(),o=r(e.name,l);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=a;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...o}},m=t.createContext({}),f=t.forwardRef(({className:e,...r},s)=>{let o=t.useId();return(0,a.jsx)(m.Provider,{value:{id:o},children:(0,a.jsx)("div",{ref:s,className:(0,l.cn)("space-y-2",e),...r})})});f.displayName="FormItem";let x=t.forwardRef(({className:e,...t},r)=>{let{error:s,formItemId:i}=c();return(0,a.jsx)(o.Label,{ref:r,className:(0,l.cn)(s&&"text-destructive",e),htmlFor:i,...t})});x.displayName="FormLabel";let u=t.forwardRef(({...e},t)=>{let{error:s,formItemId:l,formDescriptionId:o,formMessageId:i}=c();return(0,a.jsx)(r.Slot,{ref:t,id:l,"aria-describedby":s?`${o} ${i}`:`${o}`,"aria-invalid":!!s,...e})});u.displayName="FormControl";let p=t.forwardRef(({className:e,...t},r)=>{let{formDescriptionId:s}=c();return(0,a.jsx)("p",{ref:r,id:s,className:(0,l.cn)("text-sm text-muted-foreground",e),...t})});p.displayName="FormDescription";let b=t.forwardRef(({className:e,children:t,...r},s)=>{let{error:o,formMessageId:i}=c(),d=o?String(o?.message??""):t;return d?(0,a.jsx)("p",{ref:s,id:i,className:(0,l.cn)("text-sm font-medium text-destructive",e),...r,children:d}):null});b.displayName="FormMessage",e.s(["Form",()=>i,"FormControl",()=>u,"FormDescription",()=>p,"FormField",()=>n,"FormItem",()=>f,"FormLabel",()=>x,"FormMessage",()=>b])},32216,e=>{"use strict";var a=e.i(34371),t=e.i(10913),r=e.i(2507);let s=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:s,className:(0,r.cn)("w-full caption-bottom text-sm",e),...t})}));s.displayName="Table";let l=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("thead",{ref:s,className:(0,r.cn)("[&_tr]:border-b",e),...t}));l.displayName="TableHeader";let o=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("tbody",{ref:s,className:(0,r.cn)("[&_tr:last-child]:border-0",e),...t}));o.displayName="TableBody",t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("tfoot",{ref:s,className:(0,r.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let i=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("tr",{ref:s,className:(0,r.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));i.displayName="TableRow";let d=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("th",{ref:s,className:(0,r.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));d.displayName="TableHead";let n=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("td",{ref:s,className:(0,r.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));n.displayName="TableCell",t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("caption",{ref:s,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption",e.s(["Table",()=>s,"TableBody",()=>o,"TableCell",()=>n,"TableHead",()=>d,"TableHeader",()=>l,"TableRow",()=>i])},70995,e=>{"use strict";var a=e.i(34371),t=e.i(10913),r=e.i(40958),s=e.i(79804),l=e.i(2507);let o=r.Root,i=r.Trigger,d=r.Portal;r.Close;let n=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)(r.Overlay,{ref:s,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));n.displayName=r.Overlay.displayName;let c=t.forwardRef(({className:e,children:t,...o},i)=>(0,a.jsxs)(d,{children:[(0,a.jsx)(n,{}),(0,a.jsxs)(r.Content,{ref:i,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border-2 bg-background p-6 duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-none",e),...o,children:[t,(0,a.jsxs)(r.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(s.X,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));c.displayName=r.Content.displayName;let m=({className:e,...t})=>(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});m.displayName="DialogHeader";let f=({className:e,...t})=>(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});f.displayName="DialogFooter";let x=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)(r.Title,{ref:s,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));x.displayName=r.Title.displayName;let u=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)(r.Description,{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",e),...t}));u.displayName=r.Description.displayName,e.s(["Dialog",()=>o,"DialogContent",()=>c,"DialogDescription",()=>u,"DialogFooter",()=>f,"DialogHeader",()=>m,"DialogTitle",()=>x,"DialogTrigger",()=>i])},11811,e=>{"use strict";var a=e.i(34371),t=e.i(25009),r=e.i(90560),s=e.i(28993),l=e.i(63951),o=e.i(70995),i=e.i(32473),d=e.i(49133);let n=s.z.object({name:s.z.string().min(1),email:s.z.string().email(),role:s.z.union([s.z.literal("admin"),s.z.literal("staff")]),password:s.z.string().min(6).optional()});function c({isOpen:e,setIsOpen:s,initialValues:c,onSave:m}){let f=(0,t.useForm)({resolver:(0,r.zodResolver)(n),defaultValues:{name:c.name||"",email:c.email||"",role:c.role||"staff",password:""}});async function x(e){let a={name:e.name,email:e.email,role:e.role};e.password&&(a.password=e.password),await m(a),f.reset(),s(!1)}return(0,a.jsxs)(o.Dialog,{open:e,onOpenChange:s,children:[(0,a.jsx)(o.DialogTrigger,{asChild:!0,children:(0,a.jsx)("div",{})}),(0,a.jsxs)(o.DialogContent,{children:[(0,a.jsx)(o.DialogHeader,{children:(0,a.jsx)(o.DialogTitle,{className:"text-2xl font-bold",children:"Edit User"})}),(0,a.jsx)(d.Form,{...f,children:(0,a.jsxs)("form",{onSubmit:f.handleSubmit(x),className:"space-y-4",children:[(0,a.jsx)(d.FormField,{control:f.control,name:"name",render:({field:e})=>(0,a.jsxs)(d.FormItem,{children:[(0,a.jsx)(d.FormLabel,{children:"Name"}),(0,a.jsx)(d.FormControl,{children:(0,a.jsx)(i.Input,{...e})}),(0,a.jsx)(d.FormMessage,{})]})}),(0,a.jsx)(d.FormField,{control:f.control,name:"email",render:({field:e})=>(0,a.jsxs)(d.FormItem,{children:[(0,a.jsx)(d.FormLabel,{children:"Email"}),(0,a.jsx)(d.FormControl,{children:(0,a.jsx)(i.Input,{type:"email",...e})}),(0,a.jsx)(d.FormMessage,{})]})}),(0,a.jsx)(d.FormField,{control:f.control,name:"role",render:({field:e})=>(0,a.jsxs)(d.FormItem,{children:[(0,a.jsx)(d.FormLabel,{children:"Role"}),(0,a.jsx)(d.FormControl,{children:(0,a.jsxs)("select",{...e,className:"w-full border p-2",children:[(0,a.jsx)("option",{value:"staff",children:"Staff"}),(0,a.jsx)("option",{value:"admin",children:"Admin"})]})}),(0,a.jsx)(d.FormMessage,{})]})}),(0,a.jsx)(d.FormField,{control:f.control,name:"password",render:({field:e})=>(0,a.jsxs)(d.FormItem,{children:[(0,a.jsx)(d.FormLabel,{children:"New Password (leave blank to keep)"}),(0,a.jsx)(d.FormControl,{children:(0,a.jsx)(i.Input,{type:"password",...e})}),(0,a.jsx)(d.FormMessage,{})]})}),(0,a.jsx)(o.DialogFooter,{children:(0,a.jsx)(l.Button,{type:"submit",className:"w-full",children:"Save"})})]})})]})]})}e.s(["default",()=>c])},21829,e=>{"use strict";var a=e.i(34371),t=e.i(10913),r=e.i(32216),s=e.i(11811),l=e.i(41465),o=e.i(82485),i=e.i(43509),d=e.i(88383),n=e.i(63951);function c(){let{user:e}=(0,i.useAuth)(),[c,m]=(0,t.useState)([]),[f,x]=(0,t.useState)(null),[u,p]=(0,t.useState)(!1);if((0,t.useEffect)(()=>{let e=!0;return(async()=>{try{let a=await fetch("/api/users");if(!a.ok)throw Error(`Failed to fetch users: ${a.status}`);let t=await a.json();e&&m(t)}catch(e){console.error("Failed to load users",e)}})(),()=>{e=!1}},[]),e?.role!=="admin")return(0,a.jsx)("div",{className:"space-y-8 font-headline",children:(0,a.jsxs)(d.Card,{className:"border-2 border-black",children:[(0,a.jsx)(d.CardHeader,{children:(0,a.jsx)(d.CardTitle,{className:"text-2xl font-black tracking-tighter",children:"Access Denied"})}),(0,a.jsx)(d.CardContent,{children:(0,a.jsx)("p",{className:"text-lg",children:"You do not have permission to view this page."})})]})});let b=async e=>{try{let a=e._id??e.id,t=await fetch(`/api/users/${a}`,{method:"DELETE"});if(!t.ok)throw Error(`Failed to delete user: ${t.status}`);m(e=>e.filter(e=>(e._id??e.id)!==a))}catch(e){console.error("Failed to delete user",e)}},h=async(e,a)=>{try{let t=await fetch(`/api/users/${e}`,{method:"PUT",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error(`Failed to update user: ${t.status}`);let r=await t.json();m(a=>a.map(a=>(a._id??a.id)===e?r:a)),p(!1)}catch(e){throw console.error("Failed to save user",e),e}};return(0,a.jsxs)("div",{className:"space-y-8 font-headline",children:[(0,a.jsxs)("header",{className:"flex items-center justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-5xl font-black tracking-tighter",children:"LOGIN USERS"}),(0,a.jsx)("p",{className:"text-muted-foreground text-lg",children:"View, edit and delete login users."})]}),(0,a.jsx)("div",{})]}),(0,a.jsx)("div",{className:"border-2 border-black",children:(0,a.jsxs)(r.Table,{children:[(0,a.jsx)(r.TableHeader,{children:(0,a.jsxs)(r.TableRow,{className:"border-b-2 border-black",children:[(0,a.jsx)(r.TableHead,{className:"text-base font-bold",children:"Name"}),(0,a.jsx)(r.TableHead,{className:"text-base font-bold",children:"Email"}),(0,a.jsx)(r.TableHead,{className:"text-base font-bold",children:"Role"}),(0,a.jsx)(r.TableHead,{className:"text-right text-base font-bold",children:"Actions"})]})}),(0,a.jsx)(r.TableBody,{children:c.map(e=>(0,a.jsxs)(r.TableRow,{className:"border-b-2 border-black last:border-b-0",children:[(0,a.jsx)(r.TableCell,{className:"font-bold text-base py-4",children:e.name}),(0,a.jsx)(r.TableCell,{className:"text-base py-4",children:e.email}),(0,a.jsx)(r.TableCell,{className:"text-base py-4",children:e.role}),(0,a.jsx)(r.TableCell,{className:"text-right py-4 text-base font-bold",children:(0,a.jsx)("div",{className:"flex items-center justify-end gap-2",children:(0,a.jsxs)(l.DropdownMenu,{children:[(0,a.jsx)(l.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(n.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,a.jsx)(o.MoreVertical,{className:"h-5 w-5"})})}),(0,a.jsxs)(l.DropdownMenuContent,{align:"end",children:[(0,a.jsx)(l.DropdownMenuItem,{onClick:()=>{x(e),p(!0)},children:"Edit"}),(0,a.jsx)(l.DropdownMenuItem,{onClick:()=>b(e),className:"text-destructive",children:"Delete"})]})]})})})]},e._id??e.id))})]})}),f&&(0,a.jsx)(s.default,{isOpen:u,setIsOpen:p,initialValues:f,onSave:async e=>{let a=f._id??f.id;await h(a,e)}})]})}e.s(["default",()=>c])}]);