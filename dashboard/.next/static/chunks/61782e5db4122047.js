(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,42002,e=>{"use strict";var a=e.i(34371),t=e.i(10913),r=e.i(2507);let i=t.forwardRef(({className:e,...t},i)=>(0,a.jsx)("textarea",{className:(0,r.cn)("flex min-h-[80px] w-full rounded-none border-2 border-foreground bg-background px-4 py-3 text-lg ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...t}));i.displayName="Textarea",e.s(["Textarea",()=>i])},32216,e=>{"use strict";var a=e.i(34371),t=e.i(10913),r=e.i(2507);let i=t.forwardRef(({className:e,...t},i)=>(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:i,className:(0,r.cn)("w-full caption-bottom text-sm",e),...t})}));i.displayName="Table";let l=t.forwardRef(({className:e,...t},i)=>(0,a.jsx)("thead",{ref:i,className:(0,r.cn)("[&_tr]:border-b",e),...t}));l.displayName="TableHeader";let s=t.forwardRef(({className:e,...t},i)=>(0,a.jsx)("tbody",{ref:i,className:(0,r.cn)("[&_tr:last-child]:border-0",e),...t}));s.displayName="TableBody",t.forwardRef(({className:e,...t},i)=>(0,a.jsx)("tfoot",{ref:i,className:(0,r.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let d=t.forwardRef(({className:e,...t},i)=>(0,a.jsx)("tr",{ref:i,className:(0,r.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));d.displayName="TableRow";let o=t.forwardRef(({className:e,...t},i)=>(0,a.jsx)("th",{ref:i,className:(0,r.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));o.displayName="TableHead";let n=t.forwardRef(({className:e,...t},i)=>(0,a.jsx)("td",{ref:i,className:(0,r.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));n.displayName="TableCell",t.forwardRef(({className:e,...t},i)=>(0,a.jsx)("caption",{ref:i,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption",e.s(["Table",()=>i,"TableBody",()=>s,"TableCell",()=>n,"TableHead",()=>o,"TableHeader",()=>l,"TableRow",()=>d])},70995,e=>{"use strict";var a=e.i(34371),t=e.i(10913),r=e.i(40958),i=e.i(79804),l=e.i(2507);let s=r.Root,d=r.Trigger,o=r.Portal;r.Close;let n=t.forwardRef(({className:e,...t},i)=>(0,a.jsx)(r.Overlay,{ref:i,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));n.displayName=r.Overlay.displayName;let c=t.forwardRef(({className:e,children:t,...s},d)=>(0,a.jsxs)(o,{children:[(0,a.jsx)(n,{}),(0,a.jsxs)(r.Content,{ref:d,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border-2 bg-background p-6 duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-none",e),...s,children:[t,(0,a.jsxs)(r.Close,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(i.X,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));c.displayName=r.Content.displayName;let m=({className:e,...t})=>(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});m.displayName="DialogHeader";let x=({className:e,...t})=>(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});x.displayName="DialogFooter";let p=t.forwardRef(({className:e,...t},i)=>(0,a.jsx)(r.Title,{ref:i,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));p.displayName=r.Title.displayName;let h=t.forwardRef(({className:e,...t},i)=>(0,a.jsx)(r.Description,{ref:i,className:(0,l.cn)("text-sm text-muted-foreground",e),...t}));h.displayName=r.Description.displayName,e.s(["Dialog",()=>s,"DialogContent",()=>c,"DialogDescription",()=>h,"DialogFooter",()=>x,"DialogHeader",()=>m,"DialogTitle",()=>p,"DialogTrigger",()=>d])},82485,e=>{"use strict";let a=(0,e.i(84674).default)("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);e.s(["MoreVertical",()=>a],82485)},87416,e=>{"use strict";let a=(0,e.i(84674).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>a],87416)},83549,e=>{"use strict";var a=e.i(34371),t=e.i(35727),r=e.i(2507);let i=(0,t.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:t,...l}){return(0,a.jsx)("div",{className:(0,r.cn)(i({variant:t}),e),...l})}e.s(["Badge",()=>l])},67031,e=>{"use strict";let a=(0,e.i(84674).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>a],67031)},68957,e=>{"use strict";var a=e.i(34371),t=e.i(10913),r=e.i(32216),i=e.i(63951),l=e.i(41465),s=e.i(82485),d=e.i(6386),o=e.i(47384),n=e.i(79804),c=e.i(67031),m=e.i(87416),x=e.i(83549),p=e.i(70995),h=e.i(37863),u=e.i(32473),f=e.i(42002),g=e.i(37342),v=e.i(13248);function j(){let[e,j]=(0,t.useState)([]),[b,w]=(0,t.useState)(!1),[y,N]=(0,t.useState)(null),[T,C]=(0,t.useState)(!0),{toast:k}=(0,v.useToast)();(0,t.useEffect)(()=>{D()},[]);let D=async()=>{try{C(!0);let e=await fetch("/api/reviews?limit=100");if(!e.ok)throw Error(`Failed to fetch reviews: ${e.status}`);let a=await e.json();j(a)}catch(e){console.error("Failed to load reviews",e),k({title:"Error",description:"Failed to load reviews. Please try again.",variant:"destructive"})}finally{C(!1)}},S=async e=>{try{if(!(await fetch(`/api/reviews/${e._id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({approved:!0})})).ok)throw Error("Failed to approve review");j(a=>a.map(a=>a._id===e._id?{...a,approved:!0}:a)),k({title:"Success",description:"Review approved successfully"})}catch(e){console.error("Failed to approve review",e),k({title:"Error",description:"Failed to approve review",variant:"destructive"})}},R=async e=>{try{if(!(await fetch(`/api/reviews/${e._id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({approved:!1})})).ok)throw Error("Failed to reject review");j(a=>a.map(a=>a._id===e._id?{...a,approved:!1}:a)),k({title:"Success",description:"Review rejected"})}catch(e){console.error("Failed to reject review",e),k({title:"Error",description:"Failed to reject review",variant:"destructive"})}},F=async()=>{if(y)try{if(!(await fetch(`/api/reviews/${y._id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:y.name,email:y.email,brand:y.brand,workDone:y.workDone,rating:y.rating,message:y.message,approved:y.approved})})).ok)throw Error("Failed to update review");j(e=>e.map(e=>e._id===y._id?y:e)),w(!1),N(null),k({title:"Success",description:"Review updated successfully"})}catch(e){console.error("Failed to update review",e),k({title:"Error",description:"Failed to update review",variant:"destructive"})}},E=async e=>{if(confirm(`Are you sure you want to delete the review from ${e.name}?`))try{if(!(await fetch(`/api/reviews/${e._id}`,{method:"DELETE"})).ok)throw Error("Failed to delete review");j(a=>a.filter(a=>a._id!==e._id)),k({title:"Success",description:"Review deleted successfully"})}catch(e){console.error("Failed to delete review",e),k({title:"Error",description:"Failed to delete review",variant:"destructive"})}};return(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Customer Reviews"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"Manage and moderate customer testimonials"})]}),(0,a.jsx)(i.Button,{onClick:D,variant:"outline",children:"Refresh"})]}),(0,a.jsx)("div",{className:"rounded-md border",children:(0,a.jsxs)(r.Table,{children:[(0,a.jsx)(r.TableHeader,{children:(0,a.jsxs)(r.TableRow,{children:[(0,a.jsx)(r.TableHead,{children:"Customer"}),(0,a.jsx)(r.TableHead,{children:"Brand"}),(0,a.jsx)(r.TableHead,{children:"Service"}),(0,a.jsx)(r.TableHead,{children:"Rating"}),(0,a.jsx)(r.TableHead,{children:"Message"}),(0,a.jsx)(r.TableHead,{children:"Status"}),(0,a.jsx)(r.TableHead,{children:"Date"}),(0,a.jsx)(r.TableHead,{className:"text-right",children:"Actions"})]})}),(0,a.jsx)(r.TableBody,{children:T?(0,a.jsx)(r.TableRow,{children:(0,a.jsx)(r.TableCell,{colSpan:8,className:"text-center py-8",children:"Loading reviews..."})}):0===e.length?(0,a.jsx)(r.TableRow,{children:(0,a.jsx)(r.TableCell,{colSpan:8,className:"text-center py-8",children:"No reviews yet"})}):e.map(e=>{let t;return(0,a.jsxs)(r.TableRow,{children:[(0,a.jsx)(r.TableCell,{children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:e.email})]})}),(0,a.jsx)(r.TableCell,{children:e.brand}),(0,a.jsx)(r.TableCell,{children:(0,a.jsx)(x.Badge,{variant:"outline",children:e.workDone})}),(0,a.jsx)(r.TableCell,{children:(t=e.rating,(0,a.jsx)("div",{className:"flex gap-1",children:[1,2,3,4,5].map(e=>(0,a.jsx)(d.Star,{className:`w-4 h-4 ${e<=t?"fill-yellow-400 text-yellow-400":"text-gray-400"}`},e))}))}),(0,a.jsx)(r.TableCell,{className:"max-w-xs truncate",children:e.message}),(0,a.jsx)(r.TableCell,{children:e.approved?(0,a.jsx)(x.Badge,{className:"bg-green-500",children:"Approved"}):(0,a.jsx)(x.Badge,{variant:"secondary",children:"Pending"})}),(0,a.jsx)(r.TableCell,{children:new Date(e.createdAt).toLocaleDateString()}),(0,a.jsx)(r.TableCell,{className:"text-right",children:(0,a.jsxs)(l.DropdownMenu,{children:[(0,a.jsx)(l.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(i.Button,{variant:"ghost",className:"h-8 w-8 p-0",children:(0,a.jsx)(s.MoreVertical,{className:"h-4 w-4"})})}),(0,a.jsxs)(l.DropdownMenuContent,{align:"end",children:[!e.approved&&(0,a.jsxs)(l.DropdownMenuItem,{onClick:()=>S(e),children:[(0,a.jsx)(o.Check,{className:"mr-2 h-4 w-4"}),"Approve"]}),e.approved&&(0,a.jsxs)(l.DropdownMenuItem,{onClick:()=>R(e),children:[(0,a.jsx)(n.X,{className:"mr-2 h-4 w-4"}),"Reject"]}),(0,a.jsxs)(l.DropdownMenuItem,{onClick:()=>{N(e),w(!0)},children:[(0,a.jsx)(c.Edit,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,a.jsxs)(l.DropdownMenuItem,{onClick:()=>E(e),className:"text-red-600",children:[(0,a.jsx)(m.Trash2,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},e._id)})})]})}),(0,a.jsx)(p.Dialog,{open:b,onOpenChange:w,children:(0,a.jsxs)(p.DialogContent,{className:"max-w-2xl",children:[(0,a.jsx)(p.DialogHeader,{children:(0,a.jsx)(p.DialogTitle,{children:"Edit Review"})}),y&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{htmlFor:"edit-name",children:"Name"}),(0,a.jsx)(u.Input,{id:"edit-name",value:y.name,onChange:e=>N({...y,name:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{htmlFor:"edit-email",children:"Email"}),(0,a.jsx)(u.Input,{id:"edit-email",type:"email",value:y.email,onChange:e=>N({...y,email:e.target.value})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{htmlFor:"edit-brand",children:"Brand"}),(0,a.jsx)(u.Input,{id:"edit-brand",value:y.brand,onChange:e=>N({...y,brand:e.target.value})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{htmlFor:"edit-service",children:"Service"}),(0,a.jsxs)(g.Select,{value:y.workDone,onValueChange:e=>N({...y,workDone:e}),children:[(0,a.jsx)(g.SelectTrigger,{id:"edit-service",children:(0,a.jsx)(g.SelectValue,{})}),(0,a.jsxs)(g.SelectContent,{children:[(0,a.jsx)(g.SelectItem,{value:"Video Editing",children:"Video Editing"}),(0,a.jsx)(g.SelectItem,{value:"Web Development",children:"Web Development"}),(0,a.jsx)(g.SelectItem,{value:"App Development",children:"App Development"}),(0,a.jsx)(g.SelectItem,{value:"Software Development",children:"Software Development"}),(0,a.jsx)(g.SelectItem,{value:"Digital Marketing",children:"Digital Marketing"}),(0,a.jsx)(g.SelectItem,{value:"UI/UX Design",children:"UI/UX Design"}),(0,a.jsx)(g.SelectItem,{value:"Other",children:"Other"})]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(h.Label,{children:["Rating: ",y.rating," stars"]}),(0,a.jsx)("div",{className:"flex gap-2 mt-2",children:[1,2,3,4,5].map(e=>(0,a.jsx)(d.Star,{className:`w-6 h-6 cursor-pointer ${e<=y.rating?"fill-yellow-400 text-yellow-400":"text-gray-400"}`,onClick:()=>N({...y,rating:e})},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Label,{htmlFor:"edit-message",children:"Testimonial"}),(0,a.jsx)(f.Textarea,{id:"edit-message",value:y.message,onChange:e=>N({...y,message:e.target.value}),rows:5})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"checkbox",id:"edit-approved",checked:y.approved,onChange:e=>N({...y,approved:e.target.checked}),className:"rounded"}),(0,a.jsx)(h.Label,{htmlFor:"edit-approved",children:"Approved"})]})]}),(0,a.jsxs)(p.DialogFooter,{children:[(0,a.jsx)(i.Button,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),(0,a.jsx)(i.Button,{onClick:F,children:"Save Changes"})]})]})})]})}e.s(["default",()=>j])}]);