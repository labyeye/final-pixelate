(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,32216,e=>{"use strict";var t=e.i(34371),l=e.i(10913),a=e.i(2507);let r=l.forwardRef(({className:e,...l},r)=>(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:r,className:(0,a.cn)("w-full caption-bottom text-sm",e),...l})}));r.displayName="Table";let i=l.forwardRef(({className:e,...l},r)=>(0,t.jsx)("thead",{ref:r,className:(0,a.cn)("[&_tr]:border-b",e),...l}));i.displayName="TableHeader";let s=l.forwardRef(({className:e,...l},r)=>(0,t.jsx)("tbody",{ref:r,className:(0,a.cn)("[&_tr:last-child]:border-0",e),...l}));s.displayName="TableBody",l.forwardRef(({className:e,...l},r)=>(0,t.jsx)("tfoot",{ref:r,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...l})).displayName="TableFooter";let n=l.forwardRef(({className:e,...l},r)=>(0,t.jsx)("tr",{ref:r,className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...l}));n.displayName="TableRow";let o=l.forwardRef(({className:e,...l},r)=>(0,t.jsx)("th",{ref:r,className:(0,a.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...l}));o.displayName="TableHead";let d=l.forwardRef(({className:e,...l},r)=>(0,t.jsx)("td",{ref:r,className:(0,a.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...l}));d.displayName="TableCell",l.forwardRef(({className:e,...l},r)=>(0,t.jsx)("caption",{ref:r,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",e),...l})).displayName="TableCaption",e.s(["Table",()=>r,"TableBody",()=>s,"TableCell",()=>d,"TableHead",()=>o,"TableHeader",()=>i,"TableRow",()=>n])},88383,e=>{"use strict";var t=e.i(34371),l=e.i(10913),a=e.i(2507);let r=l.forwardRef(({className:e,...l},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("rounded-none border-2 bg-card text-card-foreground",e),...l}));r.displayName="Card";let i=l.forwardRef(({className:e,...l},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("flex flex-col space-y-1.5 p-4",e),...l}));i.displayName="CardHeader";let s=l.forwardRef(({className:e,...l},r)=>(0,t.jsx)("h3",{ref:r,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",e),...l}));s.displayName="CardTitle";let n=l.forwardRef(({className:e,...l},r)=>(0,t.jsx)("p",{ref:r,className:(0,a.cn)("text-sm text-muted-foreground",e),...l}));n.displayName="CardDescription";let o=l.forwardRef(({className:e,...l},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("p-4 pt-0",e),...l}));o.displayName="CardContent";let d=l.forwardRef(({className:e,...l},r)=>(0,t.jsx)("div",{ref:r,className:(0,a.cn)("flex items-center p-4 pt-0",e),...l}));d.displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>o,"CardDescription",()=>n,"CardFooter",()=>d,"CardHeader",()=>i,"CardTitle",()=>s])},32473,e=>{"use strict";var t=e.i(34371),l=e.i(10913),a=e.i(2507);let r=l.forwardRef(({className:e,type:l,...r},i)=>(0,t.jsx)("input",{type:l,className:(0,a.cn)("flex h-14 w-full rounded-none border-2 border-foreground bg-background px-4 py-3 text-lg ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...r}));r.displayName="Input",e.s(["Input",()=>r])},42002,e=>{"use strict";var t=e.i(34371),l=e.i(10913),a=e.i(2507);let r=l.forwardRef(({className:e,...l},r)=>(0,t.jsx)("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-none border-2 border-foreground bg-background px-4 py-3 text-lg ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...l}));r.displayName="Textarea",e.s(["Textarea",()=>r])},84190,e=>{"use strict";var t=e.i(34371),l=e.i(10913),a=e.i(43509),r=e.i(25009),i=e.i(28993),s=e.i(90560),n=e.i(88383),o=e.i(32473),d=e.i(63951),c=e.i(32216),m=e.i(42002);let h=i.z.object({title:i.z.string().min(1),link:i.z.string().url().or(i.z.string().min(0)),tech:i.z.string().optional(),rating:i.z.number().min(0).max(5).optional(),showOn:i.z.enum(["web-development","software-development","app-development","video-editing","photography","none"]),thumbnailBase64:i.z.string().optional(),note:i.z.string().optional()});function f(){let{user:e}=(0,a.useAuth)(),i=e?.role==="admin",[f,x]=(0,l.useState)([]),[u,b]=(0,l.useState)(null),p=(0,r.useForm)({resolver:(0,s.zodResolver)(h),defaultValues:{title:"",link:"",tech:"",rating:0,showOn:"none"}});(0,l.useEffect)(()=>{let e=!0;return(async()=>{try{let t=await fetch("/api/work-gallery");if(!t.ok)throw Error("Failed to fetch");let l=await t.json();e&&x(l||[])}catch(e){console.error("Failed to load gallery",e)}})(),()=>{e=!1}},[]);let g=async e=>e?new Promise((t,l)=>{let a=new FileReader;a.onload=()=>t(String(a.result)),a.onerror=l,a.readAsDataURL(e)}):null,j=async e=>{try{let t={...e};if(u){let e=await fetch(`/api/work-gallery/${u}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw Error("Failed to update");let l=await e.json();x(e=>e.map(e=>String(e._id??e.id)===String(u)?l:e)),b(null),p.reset()}else{let e=await fetch("/api/work-gallery",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw Error("Failed to save");let l=await e.json();x(e=>[...e,l]),p.reset()}}catch(e){console.error("Failed to save gallery item",e)}},w=async e=>{let t=e.target.files?.[0]??null,l=t?await g(t):null;p.setValue("thumbnailBase64",l||"")},v=async e=>{try{if(!confirm("Delete this gallery item?"))return;if(!(await fetch(`/api/work-gallery/${e}`,{method:"DELETE"})).ok)throw Error("Delete failed");x(t=>t.filter(t=>String(t._id??t.id)!==String(e)))}catch(e){console.error("Failed to delete",e)}};return(0,t.jsxs)("div",{className:"space-y-8 font-headline",children:[(0,t.jsxs)("header",{children:[(0,t.jsx)("h1",{className:"text-5xl font-black tracking-tighter",children:"Work Gallery Management"}),(0,t.jsx)("p",{className:"text-muted-foreground text-lg",children:"Upload project thumbnails and metadata. Choose where to show each item on the public website."})]}),(0,t.jsxs)(n.Card,{className:"border-2 border-black",children:[(0,t.jsxs)(n.CardHeader,{children:[(0,t.jsx)(n.CardTitle,{children:u?"Edit Gallery Item":"Add Gallery Item"}),(0,t.jsx)(n.CardDescription,{children:"Thumbnail, title, link, tech tags and rating"})]}),(0,t.jsx)(n.CardContent,{children:(0,t.jsxs)("form",{onSubmit:p.handleSubmit(e=>j(e)),className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Title"}),(0,t.jsx)(o.Input,{...p.register("title")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Project Link (optional)"}),(0,t.jsx)(o.Input,{...p.register("link")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Tech / Tags (comma separated)"}),(0,t.jsx)(o.Input,{...p.register("tech")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Rating (0-5)"}),(0,t.jsx)(o.Input,{type:"number",min:0,max:5,...p.register("rating",{valueAsNumber:!0})})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Show on"}),(0,t.jsxs)("select",{...p.register("showOn"),className:"w-full border rounded px-2 py-1",children:[(0,t.jsx)("option",{value:"none",children:"Do not display"}),(0,t.jsx)("option",{value:"web-development",children:"Web Development"}),(0,t.jsx)("option",{value:"software-development",children:"Software Development"}),(0,t.jsx)("option",{value:"app-development",children:"App Development"}),(0,t.jsx)("option",{value:"video-editing",children:"Video Editing"}),(0,t.jsx)("option",{value:"photography",children:"Photography"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Thumbnail"}),(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:w})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Note"}),(0,t.jsx)(m.Textarea,{...p.register("note")})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(d.Button,{type:"submit",children:u?"Update":"Save"}),(0,t.jsx)(d.Button,{variant:"ghost",onClick:()=>u?void(b(null),p.reset()):p.reset(),children:u?"Cancel":"Reset"})]})]})})]}),(0,t.jsx)("div",{className:"border-2 border-black",children:(0,t.jsxs)(c.Table,{children:[(0,t.jsx)(c.TableHeader,{children:(0,t.jsxs)(c.TableRow,{children:[(0,t.jsx)(c.TableHead,{children:"Preview"}),(0,t.jsx)(c.TableHead,{children:"Title"}),(0,t.jsx)(c.TableHead,{children:"Tech"}),(0,t.jsx)(c.TableHead,{className:"text-right",children:"Rating"}),(0,t.jsx)(c.TableHead,{children:"Show On"}),(0,t.jsx)(c.TableHead,{children:"Actions"})]})}),(0,t.jsx)(c.TableBody,{children:f.map(e=>(0,t.jsxs)(c.TableRow,{children:[(0,t.jsx)(c.TableCell,{children:e.thumbnailBase64?(0,t.jsx)("img",{src:e.thumbnailBase64,alt:e.title,style:{width:80,height:60,objectFit:"cover"}}):(0,t.jsx)("div",{className:"w-20 h-12 bg-gray-100 flex items-center justify-center",children:"No image"})}),(0,t.jsx)(c.TableCell,{className:"font-bold",children:e.title}),(0,t.jsx)(c.TableCell,{children:e.tech}),(0,t.jsx)(c.TableCell,{className:"text-right",children:e.rating??"-"}),(0,t.jsx)(c.TableCell,{children:e.showOn??"none"}),(0,t.jsx)(c.TableCell,{children:(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(d.Button,{size:"sm",onClick:()=>window.open(e.link||"#","_blank"),children:"Open"}),(0,t.jsx)(d.Button,{size:"sm",onClick:()=>{b(String(e._id??e.id)),p.reset({title:e.title||"",link:e.link||"",tech:e.tech||"",rating:Number(e.rating??0),showOn:e.showOn||"none",thumbnailBase64:e.thumbnailBase64||"",note:e.note||""})},children:"Edit"}),i?(0,t.jsx)(d.Button,{size:"sm",variant:"destructive",onClick:()=>v(String(e._id??e.id)),children:"Delete"}):null]})})]},e._id??e.id))})]})})]})}e.s(["default",()=>f])}]);